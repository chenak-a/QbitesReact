{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _GenericChartComponent = require(\"../../GenericChartComponent\");\n\nvar _GenericChartComponent2 = _interopRequireDefault(_GenericChartComponent);\n\nvar _utils = require(\"../../utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar PADDING = 10;\nvar MIN_WIDTH = PADDING;\n\nvar HoverTextNearMouse = function (_Component) {\n  _inherits(HoverTextNearMouse, _Component);\n\n  function HoverTextNearMouse(props) {\n    _classCallCheck(this, HoverTextNearMouse);\n\n    var _this = _possibleConstructorReturn(this, (HoverTextNearMouse.__proto__ || Object.getPrototypeOf(HoverTextNearMouse)).call(this, props));\n\n    _this.state = {\n      textWidth: undefined,\n      textHeight: undefined\n    };\n    _this.saveNode = _this.saveNode.bind(_this);\n    _this.updateTextSize = _this.updateTextSize.bind(_this);\n    _this.renderSVG = _this.renderSVG.bind(_this);\n    return _this;\n  }\n\n  _createClass(HoverTextNearMouse, [{\n    key: \"saveNode\",\n    value: function saveNode(node) {\n      this.textNode = node;\n    }\n  }, {\n    key: \"updateTextSize\",\n    value: function updateTextSize() {\n      var _props = this.props,\n          bgWidth = _props.bgWidth,\n          bgHeight = _props.bgHeight;\n\n      if (bgWidth === \"auto\" || bgHeight === \"auto\") {\n        var textNode = this.textNode;\n\n        if (textNode) {\n          var _textNode$getBBox = textNode.getBBox(),\n              width = _textNode$getBBox.width,\n              height = _textNode$getBBox.height;\n\n          if (this.state.textWidth !== width || this.state.textHeight !== height) {\n            this.setState({\n              textWidth: width,\n              textHeight: height\n            });\n          }\n        }\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.updateTextSize();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.updateTextSize();\n    }\n  }, {\n    key: \"getBgWidth\",\n    value: function getBgWidth() {\n      var bgWidth = this.props.bgWidth;\n      var textWidth = this.state.textWidth;\n\n      if (bgWidth !== \"auto\") {\n        return bgWidth;\n      } else if (textWidth !== undefined) {\n        return textWidth + PADDING;\n      } else {\n        return MIN_WIDTH;\n      }\n    }\n  }, {\n    key: \"getBgHeight\",\n    value: function getBgHeight() {\n      var bgHeight = this.props.bgHeight;\n      var textHeight = this.state.textHeight;\n\n      if (bgHeight !== \"auto\") {\n        return bgHeight;\n      } else if (textHeight !== undefined) {\n        return textHeight + PADDING;\n      } else {\n        return MIN_WIDTH;\n      }\n    }\n  }, {\n    key: \"renderSVG\",\n    value: function renderSVG(moreProps) {\n      var _props2 = this.props,\n          fontFamily = _props2.fontFamily,\n          fontSize = _props2.fontSize,\n          fill = _props2.fill,\n          bgFill = _props2.bgFill,\n          bgOpacity = _props2.bgOpacity; // console.log(moreProps)\n\n      var textMetaData = helper(_extends({}, this.props, {\n        bgWidth: this.getBgWidth(),\n        bgHeight: this.getBgHeight()\n      }), moreProps);\n\n      if ((0, _utils.isDefined)(textMetaData)) {\n        var rect = textMetaData.rect,\n            text = textMetaData.text;\n        return _react2.default.createElement(\"g\", null, _react2.default.createElement(\"rect\", _extends({\n          fill: bgFill,\n          fillOpacity: bgOpacity,\n          stroke: bgFill\n        }, rect)), _react2.default.createElement(\"text\", {\n          ref: this.saveNode,\n          fontSize: fontSize,\n          fontFamily: fontFamily,\n          textAnchor: \"start\",\n          alignmentBaseline: \"central\",\n          fill: fill,\n          x: text.x,\n          y: text.y\n        }, text.text));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var text = this.props.text;\n\n      if (text) {\n        return _react2.default.createElement(_GenericChartComponent2.default, {\n          svgDraw: this.renderSVG,\n          drawOn: [\"mousemove\"]\n        });\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return HoverTextNearMouse;\n}(_react.Component);\n\nvar numberOrString = _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.oneOf([\"auto\"])]);\n\nHoverTextNearMouse.propTypes = {\n  fontFamily: _propTypes2.default.string.isRequired,\n  fontSize: _propTypes2.default.number.isRequired,\n  fill: _propTypes2.default.string.isRequired,\n  text: _propTypes2.default.string.isRequired,\n  bgFill: _propTypes2.default.string.isRequired,\n  bgOpacity: _propTypes2.default.number.isRequired,\n  bgWidth: numberOrString.isRequired,\n  bgHeight: numberOrString.isRequired,\n  show: _propTypes2.default.bool.isRequired\n};\nHoverTextNearMouse.defaultProps = {\n  fontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n  fontSize: 12,\n  fill: \"#000000\",\n  bgFill: \"#FA9325\",\n  bgOpacity: 0.5\n};\n\nfunction helper(props, moreProps) {\n  var show = props.show,\n      bgWidth = props.bgWidth,\n      bgHeight = props.bgHeight;\n  var mouseXY = moreProps.mouseXY,\n      _moreProps$chartConfi = moreProps.chartConfig,\n      height = _moreProps$chartConfi.height,\n      width = _moreProps$chartConfi.width,\n      mouseInsideCanvas = moreProps.show;\n\n  if (show && mouseInsideCanvas) {\n    var _mouseXY = _slicedToArray(mouseXY, 2),\n        x = _mouseXY[0],\n        y = _mouseXY[1];\n\n    var cx = x < width / 2 ? x + PADDING : x - bgWidth - PADDING;\n    var cy = y < height / 2 ? y + PADDING : y - bgHeight - PADDING;\n    var rect = {\n      x: cx,\n      y: cy,\n      width: bgWidth,\n      height: bgHeight\n    };\n    var text = {\n      text: props.text,\n      x: cx + PADDING / 2,\n      y: cy + bgHeight / 2\n    };\n    return {\n      rect: rect,\n      text: text\n    };\n  }\n}\n\nexports.default = HoverTextNearMouse;","map":{"version":3,"sources":["../../../../src/lib/interactive/components/HoverTextNearMouse.js"],"names":["PADDING","MIN_WIDTH","HoverTextNearMouse","textWidth","textHeight","undefined","node","bgWidth","bgHeight","textNode","width","height","moreProps","fontFamily","fontSize","fill","bgFill","bgOpacity","textMetaData","rect","text","numberOrString","show","isRequired","props","mouseXY","mouseInsideCanvas","x","y","cx","cy"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport GenericChartComponent from \"../../GenericChartComponent\";\nimport { isDefined } from \"../../utils\";\n\nconst PADDING = 10;\nconst MIN_WIDTH = PADDING;\n\nclass HoverTextNearMouse extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\ttextWidth: undefined,\n\t\t\ttextHeight: undefined,\n\t\t};\n\n\t\tthis.saveNode = this.saveNode.bind(this);\n\t\tthis.updateTextSize = this.updateTextSize.bind(this);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t}\n\tsaveNode(node) {\n\t\tthis.textNode = node;\n\t}\n\n\tupdateTextSize() {\n\t\tconst { bgWidth, bgHeight } = this.props;\n\t\tif (bgWidth === \"auto\" || bgHeight === \"auto\") {\n\t\t\tconst textNode = this.textNode;\n\t\t\tif (textNode) {\n\t\t\t\tconst { width, height } = textNode.getBBox();\n\t\t\t\tif (this.state.textWidth !== width || this.state.textHeight !== height) {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\ttextWidth: width,\n\t\t\t\t\t\ttextHeight: height\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.updateTextSize();\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis.updateTextSize();\n\t}\n\n\tgetBgWidth() {\n\t\tconst { bgWidth } = this.props;\n\t\tconst { textWidth } = this.state;\n\n\t\tif (bgWidth !== \"auto\") {\n\t\t\treturn bgWidth;\n\t\t} else if (textWidth !== undefined) {\n\t\t\treturn textWidth + PADDING;\n\t\t} else {\n\t\t\treturn MIN_WIDTH;\n\t\t}\n\t}\n\n\tgetBgHeight() {\n\t\tconst { bgHeight } = this.props;\n\t\tconst { textHeight } = this.state;\n\n\t\tif (bgHeight !== \"auto\") {\n\t\t\treturn bgHeight;\n\t\t} else if (textHeight !== undefined) {\n\t\t\treturn textHeight + PADDING;\n\t\t} else {\n\t\t\treturn MIN_WIDTH;\n\t\t}\n\t}\n\n\trenderSVG(moreProps) {\n\t\tconst {\n\t\t\tfontFamily,\n\t\t\tfontSize,\n\t\t\tfill,\n\t\t\tbgFill,\n\t\t\tbgOpacity,\n\t\t} = this.props;\n\n\t\t// console.log(moreProps)\n\t\tconst textMetaData = helper({\n\t\t\t...this.props,\n\t\t\tbgWidth: this.getBgWidth(),\n\t\t\tbgHeight: this.getBgHeight()\n\t\t}, moreProps);\n\n\t\tif (isDefined(textMetaData)) {\n\t\t\tconst { rect, text } = textMetaData;\n\t\t\treturn (\n\t\t\t\t<g>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tfill={bgFill}\n\t\t\t\t\t\tfillOpacity={bgOpacity}\n\t\t\t\t\t\tstroke={bgFill}\n\t\t\t\t\t\t{...rect}\n\t\t\t\t\t/>\n\t\t\t\t\t<text\n\t\t\t\t\t\tref={this.saveNode}\n\t\t\t\t\t\tfontSize={fontSize}\n\t\t\t\t\t\tfontFamily={fontFamily}\n\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\talignmentBaseline={\"central\"}\n\t\t\t\t\t\tfill={fill}\n\t\t\t\t\t\tx={text.x}\n\t\t\t\t\t\ty={text.y}>{text.text}</text>\n\t\t\t\t</g>\n\t\t\t);\n\t\t}\n\t}\n\trender() {\n\t\tconst { text } = this.props;\n\t\tif (text) {\n\t\t\treturn <GenericChartComponent\n\t\t\t\tsvgDraw={this.renderSVG}\n\t\t\t\tdrawOn={[\"mousemove\"]}\n\t\t\t/>;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nconst numberOrString = PropTypes.oneOfType([\n\tPropTypes.number,\n\tPropTypes.oneOf([\"auto\"]),\n]);\n\nHoverTextNearMouse.propTypes = {\n\tfontFamily: PropTypes.string.isRequired,\n\tfontSize: PropTypes.number.isRequired,\n\tfill: PropTypes.string.isRequired,\n\ttext: PropTypes.string.isRequired,\n\tbgFill: PropTypes.string.isRequired,\n\tbgOpacity: PropTypes.number.isRequired,\n\tbgWidth: numberOrString.isRequired,\n\tbgHeight: numberOrString.isRequired,\n\tshow: PropTypes.bool.isRequired,\n};\n\nHoverTextNearMouse.defaultProps = {\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n\tfontSize: 12,\n\tfill: \"#000000\",\n\tbgFill: \"#FA9325\",\n\tbgOpacity: 0.5,\n};\n\nfunction helper(props, moreProps) {\n\tconst {\n\t\tshow,\n\t\tbgWidth,\n\t\tbgHeight,\n\t} = props;\n\n\tconst {\n\t\tmouseXY,\n\t\tchartConfig: { height, width },\n\t\tshow: mouseInsideCanvas\n\t} = moreProps;\n\n\tif (show && mouseInsideCanvas) {\n\t\tconst [x, y] = mouseXY;\n\n\t\tconst cx = x < width / 2\n\t\t\t? x + PADDING\n\t\t\t: x - bgWidth - PADDING;\n\n\t\tconst cy = y < height / 2\n\t\t\t? y + PADDING\n\t\t\t: y - bgHeight - PADDING;\n\n\t\tconst rect = {\n\t\t\tx: cx,\n\t\t\ty: cy,\n\t\t\twidth: bgWidth,\n\t\t\theight: bgHeight,\n\t\t};\n\n\t\tconst text = {\n\t\t\ttext: props.text,\n\t\t\tx: cx + PADDING / 2,\n\t\t\ty: cy + bgHeight / 2,\n\t\t};\n\n\t\treturn {\n\t\t\trect,\n\t\t\ttext\n\t\t};\n\t}\n}\n\nexport default HoverTextNearMouse;\n"]},"metadata":{},"sourceType":"script"}