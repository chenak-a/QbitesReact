{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require(\"../../utils\");\n\nvar _ChartDataUtil = require(\"../../utils/ChartDataUtil\");\n\nvar _utils2 = require(\"../utils\");\n\nvar _ClickableCircle = require(\"../components/ClickableCircle\");\n\nvar _ClickableCircle2 = _interopRequireDefault(_ClickableCircle);\n\nvar _GannFan = require(\"../components/GannFan\");\n\nvar _GannFan2 = _interopRequireDefault(_GannFan);\n\nvar _HoverTextNearMouse = require(\"../components/HoverTextNearMouse\");\n\nvar _HoverTextNearMouse2 = _interopRequireDefault(_HoverTextNearMouse);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar EachGannFan = function (_Component) {\n  _inherits(EachGannFan, _Component);\n\n  function EachGannFan(props) {\n    _classCallCheck(this, EachGannFan);\n\n    var _this = _possibleConstructorReturn(this, (EachGannFan.__proto__ || Object.getPrototypeOf(EachGannFan)).call(this, props));\n\n    _this.handleLine1Edge1Drag = _this.handleLine1Edge1Drag.bind(_this);\n    _this.handleLine1Edge2Drag = _this.handleLine1Edge2Drag.bind(_this);\n    _this.handleDragStart = _this.handleDragStart.bind(_this);\n    _this.handleFanDrag = _this.handleFanDrag.bind(_this);\n    _this.handleChannelHeightChange = _this.handleChannelHeightChange.bind(_this);\n    _this.handleHover = _this.handleHover.bind(_this);\n    _this.getEdgeCircle = _this.getEdgeCircle.bind(_this);\n    _this.isHover = _utils2.isHover.bind(_this);\n    _this.saveNodeType = _utils2.saveNodeType.bind(_this);\n    _this.nodes = {};\n    _this.state = {\n      hover: false\n    };\n    return _this;\n  }\n\n  _createClass(EachGannFan, [{\n    key: \"handleHover\",\n    value: function handleHover(moreProps) {\n      if (this.state.hover !== moreProps.hovering) {\n        this.setState({\n          hover: moreProps.hovering\n        });\n      }\n    }\n  }, {\n    key: \"handleDragStart\",\n    value: function handleDragStart() {\n      var _props = this.props,\n          startXY = _props.startXY,\n          endXY = _props.endXY,\n          dy = _props.dy;\n      this.dragStart = {\n        startXY: startXY,\n        endXY: endXY,\n        dy: dy\n      };\n    }\n  }, {\n    key: \"handleFanDrag\",\n    value: function handleFanDrag(moreProps) {\n      var _props2 = this.props,\n          index = _props2.index,\n          onDrag = _props2.onDrag;\n      var _dragStart = this.dragStart,\n          startXY = _dragStart.startXY,\n          endXY = _dragStart.endXY;\n      var xScale = moreProps.xScale,\n          yScale = moreProps.chartConfig.yScale,\n          xAccessor = moreProps.xAccessor,\n          fullData = moreProps.fullData;\n      var startPos = moreProps.startPos,\n          mouseXY = moreProps.mouseXY;\n      var x1 = xScale(startXY[0]);\n      var y1 = yScale(startXY[1]);\n      var x2 = xScale(endXY[0]);\n      var y2 = yScale(endXY[1]);\n      var dx = startPos[0] - mouseXY[0];\n      var dy = startPos[1] - mouseXY[1];\n      var newX1Value = (0, _ChartDataUtil.getXValue)(xScale, xAccessor, [x1 - dx, y1 - dy], fullData);\n      var newY1Value = yScale.invert(y1 - dy);\n      var newX2Value = (0, _ChartDataUtil.getXValue)(xScale, xAccessor, [x2 - dx, y2 - dy], fullData);\n      var newY2Value = yScale.invert(y2 - dy); // const newDy = newY2Value - endXY[1] + this.dragStart.dy;\n\n      onDrag(index, {\n        startXY: [newX1Value, newY1Value],\n        endXY: [newX2Value, newY2Value],\n        dy: this.dragStart.dy\n      });\n    }\n  }, {\n    key: \"handleLine1Edge1Drag\",\n    value: function handleLine1Edge1Drag(moreProps) {\n      var _props3 = this.props,\n          index = _props3.index,\n          onDrag = _props3.onDrag;\n      var startXY = this.dragStart.startXY;\n      var startPos = moreProps.startPos,\n          mouseXY = moreProps.mouseXY,\n          xAccessor = moreProps.xAccessor,\n          xScale = moreProps.xScale,\n          fullData = moreProps.fullData,\n          yScale = moreProps.chartConfig.yScale;\n      var dx = startPos[0] - mouseXY[0];\n      var dy = startPos[1] - mouseXY[1];\n      var x1 = xScale(startXY[0]);\n      var y1 = yScale(startXY[1]);\n      var newX1Value = (0, _ChartDataUtil.getXValue)(xScale, xAccessor, [x1 - dx, y1 - dy], fullData);\n      var newY1Value = yScale.invert(y1 - dy);\n      onDrag(index, {\n        startXY: [newX1Value, newY1Value],\n        endXY: this.dragStart.endXY,\n        dy: this.dragStart.dy\n      });\n    }\n  }, {\n    key: \"handleLine1Edge2Drag\",\n    value: function handleLine1Edge2Drag(moreProps) {\n      var _props4 = this.props,\n          index = _props4.index,\n          onDrag = _props4.onDrag;\n      var endXY = this.dragStart.endXY;\n      var startPos = moreProps.startPos,\n          mouseXY = moreProps.mouseXY,\n          xAccessor = moreProps.xAccessor,\n          xScale = moreProps.xScale,\n          fullData = moreProps.fullData,\n          yScale = moreProps.chartConfig.yScale;\n      var dx = startPos[0] - mouseXY[0];\n      var dy = startPos[1] - mouseXY[1];\n      var x1 = xScale(endXY[0]);\n      var y1 = yScale(endXY[1]);\n      var newX1Value = (0, _ChartDataUtil.getXValue)(xScale, xAccessor, [x1 - dx, y1 - dy], fullData);\n      var newY1Value = yScale.invert(y1 - dy);\n      onDrag(index, {\n        startXY: this.dragStart.startXY,\n        endXY: [newX1Value, newY1Value],\n        dy: this.dragStart.dy\n      });\n    }\n  }, {\n    key: \"handleChannelHeightChange\",\n    value: function handleChannelHeightChange(moreProps) {\n      var _props5 = this.props,\n          index = _props5.index,\n          onDrag = _props5.onDrag;\n      var _dragStart2 = this.dragStart,\n          startXY = _dragStart2.startXY,\n          endXY = _dragStart2.endXY;\n      var yScale = moreProps.chartConfig.yScale;\n      var startPos = moreProps.startPos,\n          mouseXY = moreProps.mouseXY;\n      var y2 = yScale(endXY[1]);\n      var dy = startPos[1] - mouseXY[1];\n      var newY2Value = yScale.invert(y2 - dy);\n      var newDy = newY2Value - endXY[1] + this.dragStart.dy;\n      onDrag(index, {\n        startXY: startXY,\n        endXY: endXY,\n        dy: newDy\n      });\n    }\n  }, {\n    key: \"getEdgeCircle\",\n    value: function getEdgeCircle(_ref) {\n      var xy = _ref.xy,\n          dragHandler = _ref.dragHandler,\n          cursor = _ref.cursor,\n          fill = _ref.fill,\n          edge = _ref.edge;\n      var hover = this.state.hover;\n      var _props6 = this.props,\n          selected = _props6.selected,\n          appearance = _props6.appearance;\n      var edgeStroke = appearance.edgeStroke,\n          edgeStrokeWidth = appearance.edgeStrokeWidth,\n          r = appearance.r;\n      var onDragComplete = this.props.onDragComplete;\n      return _react2.default.createElement(_ClickableCircle2.default, {\n        ref: this.saveNodeType(edge),\n        show: selected || hover,\n        cx: xy[0],\n        cy: xy[1],\n        r: r,\n        fill: fill,\n        stroke: edgeStroke,\n        strokeWidth: edgeStrokeWidth,\n        interactiveCursorClass: cursor,\n        onDragStart: this.handleDragStart,\n        onDrag: dragHandler,\n        onDragComplete: onDragComplete\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props7 = this.props,\n          startXY = _props7.startXY,\n          endXY = _props7.endXY;\n      var _props8 = this.props,\n          interactive = _props8.interactive,\n          appearance = _props8.appearance;\n      var edgeFill = appearance.edgeFill,\n          stroke = appearance.stroke,\n          strokeWidth = appearance.strokeWidth,\n          strokeOpacity = appearance.strokeOpacity,\n          fill = appearance.fill,\n          fillOpacity = appearance.fillOpacity;\n      var fontFamily = appearance.fontFamily,\n          fontSize = appearance.fontSize,\n          fontFill = appearance.fontFill;\n      var _props9 = this.props,\n          hoverText = _props9.hoverText,\n          selected = _props9.selected;\n      var onDragComplete = this.props.onDragComplete;\n      var hover = this.state.hover;\n\n      var hoverTextEnabled = hoverText.enable,\n          restHoverTextProps = _objectWithoutProperties(hoverText, [\"enable\"]);\n\n      var hoverHandler = interactive ? {\n        onHover: this.handleHover,\n        onUnHover: this.handleHover\n      } : {};\n      var line1Edge = (0, _utils.isDefined)(startXY) && (0, _utils.isDefined)(endXY) ? _react2.default.createElement(\"g\", null, this.getEdgeCircle({\n        xy: startXY,\n        dragHandler: this.handleLine1Edge1Drag,\n        cursor: \"react-stockcharts-move-cursor\",\n        fill: edgeFill,\n        edge: \"edge1\"\n      }), this.getEdgeCircle({\n        xy: endXY,\n        dragHandler: this.handleLine1Edge2Drag,\n        cursor: \"react-stockcharts-move-cursor\",\n        fill: edgeFill,\n        edge: \"edge2\"\n      })) : null;\n      return _react2.default.createElement(\"g\", null, _react2.default.createElement(_GannFan2.default, _extends({\n        ref: this.saveNodeType(\"fan\"),\n        selected: hover || selected\n      }, hoverHandler, {\n        startXY: startXY,\n        endXY: endXY,\n        stroke: stroke,\n        strokeWidth: hover || selected ? strokeWidth + 1 : strokeWidth,\n        fill: fill,\n        strokeOpacity: strokeOpacity,\n        fillOpacity: fillOpacity,\n        fontFamily: fontFamily,\n        fontSize: fontSize,\n        fontFill: fontFill,\n        interactiveCursorClass: \"react-stockcharts-move-cursor\",\n        onDragStart: this.handleDragStart,\n        onDrag: this.handleFanDrag,\n        onDragComplete: onDragComplete\n      })), line1Edge, _react2.default.createElement(_HoverTextNearMouse2.default, _extends({\n        show: hoverTextEnabled && hover && !selected\n      }, restHoverTextProps)));\n    }\n  }]);\n\n  return EachGannFan;\n}(_react.Component);\n\nEachGannFan.propTypes = {\n  startXY: _propTypes2.default.arrayOf(_propTypes2.default.number).isRequired,\n  endXY: _propTypes2.default.arrayOf(_propTypes2.default.number).isRequired,\n  dy: _propTypes2.default.number,\n  interactive: _propTypes2.default.bool.isRequired,\n  selected: _propTypes2.default.bool.isRequired,\n  appearance: _propTypes2.default.shape({\n    stroke: _propTypes2.default.string.isRequired,\n    strokeOpacity: _propTypes2.default.number.isRequired,\n    fillOpacity: _propTypes2.default.number.isRequired,\n    strokeWidth: _propTypes2.default.number.isRequired,\n    edgeStroke: _propTypes2.default.string.isRequired,\n    edgeFill: _propTypes2.default.string.isRequired,\n    edgeStrokeWidth: _propTypes2.default.number.isRequired,\n    r: _propTypes2.default.number.isRequired,\n    fill: _propTypes2.default.arrayOf(_propTypes2.default.string).isRequired,\n    fontFamily: _propTypes2.default.string.isRequired,\n    fontSize: _propTypes2.default.number.isRequired,\n    fontFill: _propTypes2.default.string.isRequired\n  }).isRequired,\n  hoverText: _propTypes2.default.object.isRequired,\n  index: _propTypes2.default.number,\n  onDrag: _propTypes2.default.func.isRequired,\n  onDragComplete: _propTypes2.default.func.isRequired\n};\nEachGannFan.defaultProps = {\n  yDisplayFormat: function yDisplayFormat(d) {\n    return d.toFixed(2);\n  },\n  interactive: true,\n  selected: false,\n  appearance: {\n    stroke: \"#000000\",\n    fillOpacity: 0.2,\n    strokeOpacity: 1,\n    strokeWidth: 1,\n    edgeStroke: \"#000000\",\n    edgeFill: \"#FFFFFF\",\n    edgeStrokeWidth: 1,\n    r: 5,\n    fill: [\"#1f77b4\", \"#ff7f0e\", \"#2ca02c\", \"#d62728\", \"#9467bd\", \"#8c564b\", \"#e377c2\", \"#7f7f7f\"],\n    fontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n    fontSize: 10,\n    fontFill: \"#000000\"\n  },\n  onDrag: _utils.noop,\n  onDragComplete: _utils.noop,\n  hoverText: _extends({}, _HoverTextNearMouse2.default.defaultProps, {\n    enable: true,\n    bgHeight: 18,\n    bgWidth: 120,\n    text: \"Click to select object\"\n  })\n};\nexports.default = EachGannFan;","map":{"version":3,"sources":["../../../../src/lib/interactive/wrapper/EachGannFan.js"],"names":["EachGannFan","hover","moreProps","hovering","startXY","endXY","dy","index","onDrag","xScale","yScale","xAccessor","fullData","startPos","mouseXY","x1","y1","x2","y2","dx","newX1Value","newY1Value","newX2Value","newY2Value","newDy","xy","dragHandler","cursor","fill","edge","selected","appearance","edgeStroke","edgeStrokeWidth","r","onDragComplete","interactive","edgeFill","stroke","strokeWidth","strokeOpacity","fillOpacity","fontFamily","fontSize","fontFill","hoverText","hoverTextEnabled","restHoverTextProps","hoverHandler","onHover","onUnHover","line1Edge","isRequired","yDisplayFormat","d","enable","bgHeight","bgWidth","text"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { isDefined, noop } from \"../../utils\";\nimport { getXValue } from \"../../utils/ChartDataUtil\";\nimport { saveNodeType, isHover } from \"../utils\";\n\nimport ClickableCircle from \"../components/ClickableCircle\";\nimport GannFan from \"../components/GannFan\";\nimport HoverTextNearMouse from \"../components/HoverTextNearMouse\";\n\nclass EachGannFan extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.handleLine1Edge1Drag = this.handleLine1Edge1Drag.bind(this);\n\t\tthis.handleLine1Edge2Drag = this.handleLine1Edge2Drag.bind(this);\n\n\t\tthis.handleDragStart = this.handleDragStart.bind(this);\n\t\tthis.handleFanDrag = this.handleFanDrag.bind(this);\n\n\t\tthis.handleChannelHeightChange = this.handleChannelHeightChange.bind(this);\n\n\t\tthis.handleHover = this.handleHover.bind(this);\n\t\tthis.getEdgeCircle = this.getEdgeCircle.bind(this);\n\n\t\tthis.isHover = isHover.bind(this);\n\t\tthis.saveNodeType = saveNodeType.bind(this);\n\t\tthis.nodes = {};\n\n\t\tthis.state = {\n\t\t\thover: false,\n\t\t};\n\t}\n\thandleHover(moreProps) {\n\t\tif (this.state.hover !== moreProps.hovering) {\n\t\t\tthis.setState({\n\t\t\t\thover: moreProps.hovering\n\t\t\t});\n\t\t}\n\t}\n\thandleDragStart() {\n\t\tconst {\n\t\t\tstartXY, endXY, dy,\n\t\t} = this.props;\n\n\t\tthis.dragStart = {\n\t\t\tstartXY, endXY, dy,\n\t\t};\n\t}\n\thandleFanDrag(moreProps) {\n\t\tconst { index, onDrag } = this.props;\n\n\t\tconst {\n\t\t\tstartXY, endXY,\n\t\t} = this.dragStart;\n\n\t\tconst { xScale, chartConfig: { yScale }, xAccessor, fullData } = moreProps;\n\t\tconst { startPos, mouseXY } = moreProps;\n\n\t\tconst x1 = xScale(startXY[0]);\n\t\tconst y1 = yScale(startXY[1]);\n\t\tconst x2 = xScale(endXY[0]);\n\t\tconst y2 = yScale(endXY[1]);\n\n\t\tconst dx = startPos[0] - mouseXY[0];\n\t\tconst dy = startPos[1] - mouseXY[1];\n\n\t\tconst newX1Value = getXValue(xScale, xAccessor, [x1 - dx, y1 - dy], fullData);\n\t\tconst newY1Value = yScale.invert(y1 - dy);\n\t\tconst newX2Value = getXValue(xScale, xAccessor, [x2 - dx, y2 - dy], fullData);\n\t\tconst newY2Value = yScale.invert(y2 - dy);\n\n\t\t// const newDy = newY2Value - endXY[1] + this.dragStart.dy;\n\n\t\tonDrag(index, {\n\t\t\tstartXY: [newX1Value, newY1Value],\n\t\t\tendXY: [newX2Value, newY2Value],\n\t\t\tdy: this.dragStart.dy,\n\t\t});\n\t}\n\thandleLine1Edge1Drag(moreProps) {\n\t\tconst { index, onDrag } = this.props;\n\t\tconst {\n\t\t\tstartXY,\n\t\t} = this.dragStart;\n\n\t\tconst {\n\t\t\tstartPos, mouseXY, xAccessor,\n\t\t\txScale, fullData,\n\t\t\tchartConfig: { yScale }\n\t\t} = moreProps;\n\n\t\tconst dx = startPos[0] - mouseXY[0];\n\t\tconst dy = startPos[1] - mouseXY[1];\n\n\t\tconst x1 = xScale(startXY[0]);\n\t\tconst y1 = yScale(startXY[1]);\n\n\t\tconst newX1Value = getXValue(xScale, xAccessor, [x1 - dx, y1 - dy], fullData);\n\t\tconst newY1Value = yScale.invert(y1 - dy);\n\n\t\tonDrag(index, {\n\t\t\tstartXY: [newX1Value, newY1Value],\n\t\t\tendXY: this.dragStart.endXY,\n\t\t\tdy: this.dragStart.dy,\n\t\t});\n\t}\n\thandleLine1Edge2Drag(moreProps) {\n\t\tconst { index, onDrag } = this.props;\n\t\tconst {\n\t\t\tendXY,\n\t\t} = this.dragStart;\n\n\t\tconst {\n\t\t\tstartPos, mouseXY, xAccessor,\n\t\t\txScale, fullData,\n\t\t\tchartConfig: { yScale }\n\t\t} = moreProps;\n\n\t\tconst dx = startPos[0] - mouseXY[0];\n\t\tconst dy = startPos[1] - mouseXY[1];\n\n\t\tconst x1 = xScale(endXY[0]);\n\t\tconst y1 = yScale(endXY[1]);\n\n\t\tconst newX1Value = getXValue(xScale, xAccessor, [x1 - dx, y1 - dy], fullData);\n\t\tconst newY1Value = yScale.invert(y1 - dy);\n\n\t\tonDrag(index, {\n\t\t\tstartXY: this.dragStart.startXY,\n\t\t\tendXY: [newX1Value, newY1Value],\n\t\t\tdy: this.dragStart.dy,\n\t\t});\n\t}\n\thandleChannelHeightChange(moreProps) {\n\t\tconst { index, onDrag } = this.props;\n\n\t\tconst {\n\t\t\tstartXY, endXY,\n\t\t} = this.dragStart;\n\n\t\tconst { chartConfig: { yScale } } = moreProps;\n\t\tconst { startPos, mouseXY } = moreProps;\n\n\t\tconst y2 = yScale(endXY[1]);\n\n\t\tconst dy = startPos[1] - mouseXY[1];\n\n\t\tconst newY2Value = yScale.invert(y2 - dy);\n\n\t\tconst newDy = newY2Value - endXY[1] + this.dragStart.dy;\n\n\t\tonDrag(index, {\n\t\t\tstartXY,\n\t\t\tendXY,\n\t\t\tdy: newDy,\n\t\t});\n\t}\n\tgetEdgeCircle({ xy, dragHandler, cursor, fill, edge }) {\n\t\tconst { hover } = this.state;\n\t\tconst { selected, appearance } = this.props;\n\t\tconst { edgeStroke, edgeStrokeWidth, r } = appearance;\n\t\tconst { onDragComplete } = this.props;\n\n\t\treturn <ClickableCircle\n\t\t\tref={this.saveNodeType(edge)}\n\t\t\tshow={selected || hover}\n\t\t\tcx={xy[0]}\n\t\t\tcy={xy[1]}\n\t\t\tr={r}\n\t\t\tfill={fill}\n\t\t\tstroke={edgeStroke}\n\t\t\tstrokeWidth={edgeStrokeWidth}\n\t\t\tinteractiveCursorClass={cursor}\n\n\t\t\tonDragStart={this.handleDragStart}\n\t\t\tonDrag={dragHandler}\n\t\t\tonDragComplete={onDragComplete} />;\n\t}\n\trender() {\n\t\tconst { startXY, endXY } = this.props;\n\t\tconst { interactive, appearance  } = this.props;\n\t\tconst {\n\t\t\tedgeFill,\n\t\t\tstroke, strokeWidth, strokeOpacity,\n\t\t\tfill, fillOpacity\n\t\t} = appearance;\n\t\tconst { fontFamily, fontSize, fontFill } = appearance;\n\t\tconst { hoverText, selected } = this.props;\n\t\tconst { onDragComplete } = this.props;\n\t\tconst { hover } = this.state;\n\t\tconst { enable: hoverTextEnabled, ...restHoverTextProps } = hoverText;\n\n\t\tconst hoverHandler = interactive\n\t\t\t? { onHover: this.handleHover, onUnHover: this.handleHover }\n\t\t\t: {};\n\n\t\tconst line1Edge = isDefined(startXY) && isDefined(endXY)\n\t\t\t? <g>\n\t\t\t\t{this.getEdgeCircle({\n\t\t\t\t\txy: startXY,\n\t\t\t\t\tdragHandler: this.handleLine1Edge1Drag,\n\t\t\t\t\tcursor: \"react-stockcharts-move-cursor\",\n\t\t\t\t\tfill: edgeFill,\n\t\t\t\t\tedge: \"edge1\"\n\t\t\t\t})}\n\t\t\t\t{this.getEdgeCircle({\n\t\t\t\t\txy: endXY,\n\t\t\t\t\tdragHandler: this.handleLine1Edge2Drag,\n\t\t\t\t\tcursor: \"react-stockcharts-move-cursor\",\n\t\t\t\t\tfill: edgeFill,\n\t\t\t\t\tedge: \"edge2\"\n\t\t\t\t})}\n\t\t\t</g>\n\t\t\t: null;\n\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t<GannFan\n\t\t\t\t\tref={this.saveNodeType(\"fan\")}\n\t\t\t\t\tselected={hover || selected}\n\n\t\t\t\t\t{...hoverHandler}\n\n\t\t\t\t\tstartXY={startXY}\n\t\t\t\t\tendXY={endXY}\n\t\t\t\t\tstroke={stroke}\n\t\t\t\t\tstrokeWidth={(hover || selected) ? strokeWidth + 1 : strokeWidth}\n\t\t\t\t\tfill={fill}\n\t\t\t\t\tstrokeOpacity={strokeOpacity}\n\t\t\t\t\tfillOpacity={fillOpacity}\n\t\t\t\t\tfontFamily={fontFamily}\n\t\t\t\t\tfontSize={fontSize}\n\t\t\t\t\tfontFill={fontFill}\n\t\t\t\t\tinteractiveCursorClass=\"react-stockcharts-move-cursor\"\n\n\t\t\t\t\tonDragStart={this.handleDragStart}\n\t\t\t\t\tonDrag={this.handleFanDrag}\n\t\t\t\t\tonDragComplete={onDragComplete}\n\t\t\t\t/>\n\t\t\t\t{line1Edge}\n\t\t\t\t<HoverTextNearMouse\n\t\t\t\t\tshow={hoverTextEnabled && hover && !selected}\n\t\t\t\t\t{...restHoverTextProps} />\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nEachGannFan.propTypes = {\n\tstartXY: PropTypes.arrayOf(PropTypes.number).isRequired,\n\tendXY: PropTypes.arrayOf(PropTypes.number).isRequired,\n\tdy: PropTypes.number,\n\n\tinteractive: PropTypes.bool.isRequired,\n\tselected: PropTypes.bool.isRequired,\n\n\tappearance: PropTypes.shape({\n\t\tstroke: PropTypes.string.isRequired,\n\t\tstrokeOpacity: PropTypes.number.isRequired,\n\t\tfillOpacity: PropTypes.number.isRequired,\n\t\tstrokeWidth: PropTypes.number.isRequired,\n\t\tedgeStroke: PropTypes.string.isRequired,\n\t\tedgeFill: PropTypes.string.isRequired,\n\t\tedgeStrokeWidth: PropTypes.number.isRequired,\n\t\tr: PropTypes.number.isRequired,\n\t\tfill: PropTypes.arrayOf(PropTypes.string).isRequired,\n\t\tfontFamily: PropTypes.string.isRequired,\n\t\tfontSize: PropTypes.number.isRequired,\n\t\tfontFill: PropTypes.string.isRequired,\n\t}).isRequired,\n\thoverText: PropTypes.object.isRequired,\n\n\tindex: PropTypes.number,\n\tonDrag: PropTypes.func.isRequired,\n\tonDragComplete: PropTypes.func.isRequired,\n};\n\nEachGannFan.defaultProps = {\n\tyDisplayFormat: d => d.toFixed(2),\n\tinteractive: true,\n\tselected: false,\n\n\tappearance: {\n\t\tstroke: \"#000000\",\n\t\tfillOpacity: 0.2,\n\t\tstrokeOpacity: 1,\n\t\tstrokeWidth: 1,\n\t\tedgeStroke: \"#000000\",\n\t\tedgeFill: \"#FFFFFF\",\n\t\tedgeStrokeWidth: 1,\n\t\tr: 5,\n\t\tfill: [\n\t\t\t\"#1f77b4\",\n\t\t\t\"#ff7f0e\",\n\t\t\t\"#2ca02c\",\n\t\t\t\"#d62728\",\n\t\t\t\"#9467bd\",\n\t\t\t\"#8c564b\",\n\t\t\t\"#e377c2\",\n\t\t\t\"#7f7f7f\",\n\t\t],\n\t\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n\t\tfontSize: 10,\n\t\tfontFill: \"#000000\",\n\t},\n\n\tonDrag: noop,\n\tonDragComplete: noop,\n\n\thoverText: {\n\t\t...HoverTextNearMouse.defaultProps,\n\t\tenable: true,\n\t\tbgHeight: 18,\n\t\tbgWidth: 120,\n\t\ttext: \"Click to select object\",\n\t}\n};\n\nexport default EachGannFan;"]},"metadata":{},"sourceType":"script"}