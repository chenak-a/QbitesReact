{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _d3Force = require(\"d3-force\");\n\nvar _d3Array = require(\"d3-array\");\n\nvar _GenericChartComponent = require(\"../GenericChartComponent\");\n\nvar _GenericChartComponent2 = _interopRequireDefault(_GenericChartComponent);\n\nvar _GenericComponent = require(\"../GenericComponent\");\n\nvar _AxisZoomCapture = require(\"./AxisZoomCapture\");\n\nvar _AxisZoomCapture2 = _interopRequireDefault(_AxisZoomCapture);\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Axis = function (_Component) {\n  _inherits(Axis, _Component);\n\n  function Axis(props) {\n    _classCallCheck(this, Axis);\n\n    var _this = _possibleConstructorReturn(this, (Axis.__proto__ || Object.getPrototypeOf(Axis)).call(this, props));\n\n    _this.renderSVG = _this.renderSVG.bind(_this);\n    _this.drawOnCanvas = _this.drawOnCanvas.bind(_this);\n    _this.saveNode = _this.saveNode.bind(_this);\n    _this.getMoreProps = _this.getMoreProps.bind(_this);\n    return _this;\n  }\n\n  _createClass(Axis, [{\n    key: \"saveNode\",\n    value: function saveNode(node) {\n      this.node = node;\n    }\n  }, {\n    key: \"getMoreProps\",\n    value: function getMoreProps() {\n      return this.node.getMoreProps();\n    }\n  }, {\n    key: \"drawOnCanvas\",\n    value: function drawOnCanvas(ctx, moreProps) {\n      var _props = this.props,\n          showDomain = _props.showDomain,\n          showTicks = _props.showTicks,\n          transform = _props.transform,\n          range = _props.range,\n          getScale = _props.getScale;\n      ctx.save();\n      ctx.translate(transform[0], transform[1]);\n      if (showDomain) drawAxisLine(ctx, this.props, range);\n\n      if (showTicks) {\n        var tickProps = tickHelper(this.props, getScale(moreProps));\n        drawTicks(ctx, tickProps);\n      }\n\n      ctx.restore();\n    }\n  }, {\n    key: \"renderSVG\",\n    value: function renderSVG(moreProps) {\n      var className = this.props.className;\n      var _props2 = this.props,\n          showDomain = _props2.showDomain,\n          showTicks = _props2.showTicks,\n          range = _props2.range,\n          getScale = _props2.getScale;\n      var ticks = showTicks ? axisTicksSVG(this.props, getScale(moreProps)) : null;\n      var domain = showDomain ? axisLineSVG(this.props, range) : null;\n      return _react2.default.createElement(\"g\", {\n        className: className\n      }, ticks, domain);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props3 = this.props,\n          bg = _props3.bg,\n          axisZoomCallback = _props3.axisZoomCallback,\n          className = _props3.className,\n          zoomCursorClassName = _props3.zoomCursorClassName,\n          zoomEnabled = _props3.zoomEnabled,\n          getScale = _props3.getScale,\n          inverted = _props3.inverted;\n      var _props4 = this.props,\n          transform = _props4.transform,\n          getMouseDelta = _props4.getMouseDelta,\n          edgeClip = _props4.edgeClip;\n      var _props5 = this.props,\n          onContextMenu = _props5.onContextMenu,\n          onDoubleClick = _props5.onDoubleClick;\n      var zoomCapture = zoomEnabled ? _react2.default.createElement(_AxisZoomCapture2.default, {\n        bg: bg,\n        getScale: getScale,\n        getMoreProps: this.getMoreProps,\n        getMouseDelta: getMouseDelta,\n        axisZoomCallback: axisZoomCallback,\n        className: className,\n        zoomCursorClassName: zoomCursorClassName,\n        inverted: inverted,\n        onContextMenu: onContextMenu,\n        onDoubleClick: onDoubleClick\n      }) : null;\n      return _react2.default.createElement(\"g\", {\n        transform: \"translate(\" + transform[0] + \", \" + transform[1] + \")\"\n      }, zoomCapture, _react2.default.createElement(_GenericChartComponent2.default, {\n        ref: this.saveNode,\n        canvasToDraw: _GenericComponent.getAxisCanvas,\n        clip: false,\n        edgeClip: edgeClip,\n        svgDraw: this.renderSVG,\n        canvasDraw: this.drawOnCanvas,\n        drawOn: [\"pan\"]\n      }));\n    }\n  }]);\n\n  return Axis;\n}(_react.Component);\n\nAxis.propTypes = {\n  innerTickSize: _propTypes2.default.number,\n  outerTickSize: _propTypes2.default.number,\n  tickFormat: _propTypes2.default.func,\n  tickPadding: _propTypes2.default.number,\n  tickSize: _propTypes2.default.number,\n  ticks: _propTypes2.default.number,\n  tickLabelFill: _propTypes2.default.string,\n  tickStroke: _propTypes2.default.string,\n  tickStrokeOpacity: _propTypes2.default.number,\n  tickStrokeWidth: _propTypes2.default.number,\n  tickStrokeDasharray: _propTypes2.default.oneOf(_utils.strokeDashTypes),\n  tickValues: _propTypes2.default.oneOfType([_propTypes2.default.array, _propTypes2.default.func]),\n  tickInterval: _propTypes2.default.number,\n  tickIntervalFunction: _propTypes2.default.func,\n  showDomain: _propTypes2.default.bool,\n  showTicks: _propTypes2.default.bool,\n  className: _propTypes2.default.string,\n  axisZoomCallback: _propTypes2.default.func,\n  zoomEnabled: _propTypes2.default.bool,\n  inverted: _propTypes2.default.bool,\n  zoomCursorClassName: _propTypes2.default.string,\n  transform: _propTypes2.default.arrayOf(_propTypes2.default.number).isRequired,\n  range: _propTypes2.default.arrayOf(_propTypes2.default.number).isRequired,\n  getMouseDelta: _propTypes2.default.func.isRequired,\n  getScale: _propTypes2.default.func.isRequired,\n  bg: _propTypes2.default.object.isRequired,\n  edgeClip: _propTypes2.default.bool.isRequired,\n  onContextMenu: _propTypes2.default.func,\n  onDoubleClick: _propTypes2.default.func\n};\nAxis.defaultProps = {\n  zoomEnabled: false,\n  zoomCursorClassName: \"\",\n  edgeClip: false\n};\n\nfunction tickHelper(props, scale) {\n  var orient = props.orient,\n      innerTickSize = props.innerTickSize,\n      tickFormat = props.tickFormat,\n      tickPadding = props.tickPadding,\n      tickLabelFill = props.tickLabelFill,\n      tickStrokeWidth = props.tickStrokeWidth,\n      tickStrokeDasharray = props.tickStrokeDasharray,\n      fontSize = props.fontSize,\n      fontFamily = props.fontFamily,\n      fontWeight = props.fontWeight,\n      showTicks = props.showTicks,\n      flexTicks = props.flexTicks,\n      showTickLabel = props.showTickLabel;\n  var tickArguments = props.ticks,\n      tickValuesProp = props.tickValues,\n      tickStroke = props.tickStroke,\n      tickStrokeOpacity = props.tickStrokeOpacity,\n      tickInterval = props.tickInterval,\n      tickIntervalFunction = props.tickIntervalFunction; // if (tickArguments) tickArguments = [tickArguments];\n\n  var tickValues = void 0;\n\n  if ((0, _utils.isDefined)(tickValuesProp)) {\n    if (typeof tickValuesProp === \"function\") {\n      tickValues = tickValuesProp(scale.domain());\n    } else {\n      tickValues = tickValuesProp;\n    }\n  } else if ((0, _utils.isDefined)(tickInterval)) {\n    var _scale$domain = scale.domain(),\n        _scale$domain2 = _slicedToArray(_scale$domain, 2),\n        min = _scale$domain2[0],\n        max = _scale$domain2[1];\n\n    var baseTickValues = (0, _d3Array.range)(min, max, (max - min) / tickInterval);\n    tickValues = tickIntervalFunction ? tickIntervalFunction(min, max, tickInterval) : baseTickValues;\n  } else if ((0, _utils.isDefined)(scale.ticks)) {\n    tickValues = scale.ticks(tickArguments, flexTicks);\n  } else {\n    tickValues = scale.domain();\n  }\n\n  var baseFormat = scale.tickFormat ? scale.tickFormat(tickArguments) : _utils.identity;\n  var format = (0, _utils.isNotDefined)(tickFormat) ? baseFormat : function (d) {\n    return tickFormat(d) || \"\";\n  };\n  var sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\n  var tickSpacing = Math.max(innerTickSize, 0) + tickPadding;\n  var ticks = void 0,\n      dy = void 0,\n      canvas_dy = void 0,\n      textAnchor = void 0;\n\n  if (orient === \"bottom\" || orient === \"top\") {\n    dy = sign < 0 ? \"0em\" : \".71em\";\n    canvas_dy = sign < 0 ? 0 : fontSize * .71;\n    textAnchor = \"middle\";\n    ticks = tickValues.map(function (d) {\n      var x = Math.round(scale(d));\n      return {\n        value: d,\n        x1: x,\n        y1: 0,\n        x2: x,\n        y2: sign * innerTickSize,\n        labelX: x,\n        labelY: sign * tickSpacing\n      };\n    });\n\n    if (showTicks && flexTicks) {\n      // console.log(ticks, showTicks);\n      var nodes = ticks.map(function (d) {\n        return {\n          id: d.value,\n          value: d.value,\n          fy: d.y2,\n          origX: d.x1\n        };\n      });\n      var simulation = (0, _d3Force.forceSimulation)(nodes).force(\"x\", (0, _d3Force.forceX)(function (d) {\n        return d.origX;\n      }).strength(1)).force(\"collide\", (0, _d3Force.forceCollide)(22)) // .force(\"center\", forceCenter())\n      .stop();\n\n      for (var i = 0; i < 100; ++i) {\n        simulation.tick();\n      } // console.log(nodes);\n\n\n      var zip = (0, _utils.zipper)().combine(function (a, b) {\n        if (Math.abs(b.x - b.origX) > 0.01) {\n          return _extends({}, a, {\n            x2: b.x,\n            labelX: b.x\n          });\n        }\n\n        return a;\n      });\n      ticks = zip(ticks, nodes);\n    }\n  } else {\n    ticks = tickValues.map(function (d) {\n      var y = Math.round(scale(d));\n      return {\n        value: d,\n        x1: 0,\n        y1: y,\n        x2: sign * innerTickSize,\n        y2: y,\n        labelX: sign * tickSpacing,\n        labelY: y\n      };\n    });\n    dy = \".32em\";\n    canvas_dy = fontSize * .32;\n    textAnchor = sign < 0 ? \"end\" : \"start\";\n  }\n\n  return {\n    ticks: ticks,\n    scale: scale,\n    tickStroke: tickStroke,\n    tickLabelFill: tickLabelFill || tickStroke,\n    tickStrokeOpacity: tickStrokeOpacity,\n    tickStrokeWidth: tickStrokeWidth,\n    tickStrokeDasharray: tickStrokeDasharray,\n    dy: dy,\n    canvas_dy: canvas_dy,\n    textAnchor: textAnchor,\n    fontSize: fontSize,\n    fontFamily: fontFamily,\n    fontWeight: fontWeight,\n    format: format,\n    showTickLabel: showTickLabel\n  };\n}\n/* eslint-disable react/prop-types */\n\n\nfunction axisLineSVG(props, range) {\n  var orient = props.orient,\n      outerTickSize = props.outerTickSize;\n  var domainClassName = props.domainClassName,\n      fill = props.fill,\n      stroke = props.stroke,\n      strokeWidth = props.strokeWidth,\n      opacity = props.opacity;\n  var sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\n  var d = void 0;\n\n  if (orient === \"bottom\" || orient === \"top\") {\n    d = \"M\" + range[0] + \",\" + sign * outerTickSize + \"V0H\" + range[1] + \"V\" + sign * outerTickSize;\n  } else {\n    d = \"M\" + sign * outerTickSize + \",\" + range[0] + \"H0V\" + range[1] + \"H\" + sign * outerTickSize;\n  }\n\n  return _react2.default.createElement(\"path\", {\n    className: domainClassName,\n    d: d,\n    fill: fill,\n    opacity: opacity,\n    stroke: stroke,\n    strokeWidth: strokeWidth\n  });\n}\n/* eslint-enable react/prop-types */\n\n\nfunction drawAxisLine(ctx, props, range) {\n  // props = { ...AxisLine.defaultProps, ...props };\n  var orient = props.orient,\n      outerTickSize = props.outerTickSize,\n      stroke = props.stroke,\n      strokeWidth = props.strokeWidth,\n      opacity = props.opacity;\n  var sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\n  var xAxis = orient === \"bottom\" || orient === \"top\"; // var range = d3_scaleRange(xAxis ? xScale : yScale);\n\n  ctx.lineWidth = strokeWidth;\n  ctx.strokeStyle = (0, _utils.hexToRGBA)(stroke, opacity);\n  ctx.beginPath();\n\n  if (xAxis) {\n    ctx.moveTo((0, _utils.first)(range), sign * outerTickSize);\n    ctx.lineTo((0, _utils.first)(range), 0);\n    ctx.lineTo((0, _utils.last)(range), 0);\n    ctx.lineTo((0, _utils.last)(range), sign * outerTickSize);\n  } else {\n    ctx.moveTo(sign * outerTickSize, (0, _utils.first)(range));\n    ctx.lineTo(0, (0, _utils.first)(range));\n    ctx.lineTo(0, (0, _utils.last)(range));\n    ctx.lineTo(sign * outerTickSize, (0, _utils.last)(range));\n  }\n\n  ctx.stroke();\n}\n\nfunction Tick(props) {\n  var tickLabelFill = props.tickLabelFill,\n      tickStroke = props.tickStroke,\n      tickStrokeOpacity = props.tickStrokeOpacity,\n      tickStrokeDasharray = props.tickStrokeDasharray,\n      tickStrokeWidth = props.tickStrokeWidth,\n      textAnchor = props.textAnchor,\n      fontSize = props.fontSize,\n      fontFamily = props.fontFamily,\n      fontWeight = props.fontWeight;\n  var x1 = props.x1,\n      y1 = props.y1,\n      x2 = props.x2,\n      y2 = props.y2,\n      labelX = props.labelX,\n      labelY = props.labelY,\n      dy = props.dy;\n  return _react2.default.createElement(\"g\", {\n    className: \"tick\"\n  }, _react2.default.createElement(\"line\", {\n    shapeRendering: \"crispEdges\",\n    opacity: tickStrokeOpacity,\n    stroke: tickStroke,\n    strokeWidth: tickStrokeWidth,\n    strokeDasharray: (0, _utils.getStrokeDasharray)(tickStrokeDasharray),\n    x1: x1,\n    y1: y1,\n    x2: x2,\n    y2: y2\n  }), _react2.default.createElement(\"text\", {\n    dy: dy,\n    x: labelX,\n    y: labelY,\n    fill: tickLabelFill,\n    fontSize: fontSize,\n    fontWeight: fontWeight,\n    fontFamily: fontFamily,\n    textAnchor: textAnchor\n  }, props.children));\n}\n\nTick.propTypes = {\n  children: _propTypes2.default.string.isRequired,\n  x1: _propTypes2.default.number.isRequired,\n  y1: _propTypes2.default.number.isRequired,\n  x2: _propTypes2.default.number.isRequired,\n  y2: _propTypes2.default.number.isRequired,\n  labelX: _propTypes2.default.number.isRequired,\n  labelY: _propTypes2.default.number.isRequired,\n  dy: _propTypes2.default.string.isRequired,\n  tickStroke: _propTypes2.default.string,\n  tickLabelFill: _propTypes2.default.string,\n  tickStrokeWidth: _propTypes2.default.number,\n  tickStrokeOpacity: _propTypes2.default.number,\n  tickStrokeDasharray: _propTypes2.default.oneOf(_utils.strokeDashTypes),\n  textAnchor: _propTypes2.default.string,\n  fontSize: _propTypes2.default.number,\n  fontFamily: _propTypes2.default.string,\n  fontWeight: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number])\n};\n\nfunction axisTicksSVG(props, scale) {\n  var result = tickHelper(props, scale);\n  var tickLabelFill = result.tickLabelFill,\n      tickStroke = result.tickStroke,\n      tickStrokeOpacity = result.tickStrokeOpacity,\n      tickStrokeWidth = result.tickStrokeWidth,\n      tickStrokeDasharray = result.tickStrokeDasharray,\n      textAnchor = result.textAnchor;\n  var fontSize = result.fontSize,\n      fontFamily = result.fontFamily,\n      fontWeight = result.fontWeight,\n      ticks = result.ticks,\n      format = result.format;\n  var dy = result.dy;\n  return _react2.default.createElement(\"g\", null, ticks.map(function (tick, idx) {\n    return _react2.default.createElement(Tick, {\n      key: idx,\n      tickStroke: tickStroke,\n      tickLabelFill: tickLabelFill,\n      tickStrokeWidth: tickStrokeWidth,\n      tickStrokeOpacity: tickStrokeOpacity,\n      tickStrokeDasharray: tickStrokeDasharray,\n      dy: dy,\n      x1: tick.x1,\n      y1: tick.y1,\n      x2: tick.x2,\n      y2: tick.y2,\n      labelX: tick.labelX,\n      labelY: tick.labelY,\n      textAnchor: textAnchor,\n      fontSize: fontSize,\n      fontWeight: fontWeight,\n      fontFamily: fontFamily\n    }, format(tick.value));\n  }));\n}\n\nfunction drawTicks(ctx, result) {\n  var tickStroke = result.tickStroke,\n      tickStrokeOpacity = result.tickStrokeOpacity,\n      tickLabelFill = result.tickLabelFill;\n  var textAnchor = result.textAnchor,\n      fontSize = result.fontSize,\n      fontFamily = result.fontFamily,\n      fontWeight = result.fontWeight,\n      ticks = result.ticks,\n      showTickLabel = result.showTickLabel;\n  ctx.strokeStyle = (0, _utils.hexToRGBA)(tickStroke, tickStrokeOpacity);\n  ctx.fillStyle = tickStroke; // ctx.textBaseline = 'middle';\n\n  ticks.forEach(function (tick) {\n    drawEachTick(ctx, tick, result);\n  });\n  ctx.font = fontWeight + \" \" + fontSize + \"px \" + fontFamily;\n  ctx.fillStyle = tickLabelFill;\n  ctx.textAlign = textAnchor === \"middle\" ? \"center\" : textAnchor;\n\n  if (showTickLabel) {\n    ticks.forEach(function (tick) {\n      drawEachTickLabel(ctx, tick, result);\n    });\n  }\n}\n\nfunction drawEachTick(ctx, tick, result) {\n  var tickStrokeWidth = result.tickStrokeWidth,\n      tickStrokeDasharray = result.tickStrokeDasharray;\n  ctx.beginPath();\n  ctx.moveTo(tick.x1, tick.y1);\n  ctx.lineTo(tick.x2, tick.y2);\n  ctx.lineWidth = tickStrokeWidth;\n  ctx.setLineDash((0, _utils.getStrokeDasharray)(tickStrokeDasharray).split(\",\"));\n  ctx.stroke();\n}\n\nfunction drawEachTickLabel(ctx, tick, result) {\n  var canvas_dy = result.canvas_dy,\n      format = result.format;\n  ctx.beginPath();\n  ctx.fillText(format(tick.value), tick.labelX, tick.labelY + canvas_dy);\n}\n\nexports.default = Axis;","map":{"version":3,"sources":["../../../src/lib/axes/Axis.js"],"names":["Axis","node","ctx","moreProps","showDomain","showTicks","transform","range","getScale","drawAxisLine","tickProps","tickHelper","drawTicks","className","ticks","axisTicksSVG","domain","axisLineSVG","bg","axisZoomCallback","zoomCursorClassName","zoomEnabled","inverted","getMouseDelta","edgeClip","onContextMenu","onDoubleClick","zoomCapture","innerTickSize","outerTickSize","tickFormat","tickPadding","tickSize","tickLabelFill","tickStroke","tickStrokeOpacity","tickStrokeWidth","tickStrokeDasharray","tickValues","tickInterval","tickIntervalFunction","func","orient","fontSize","fontFamily","fontWeight","flexTicks","showTickLabel","props","tickArguments","tickValuesProp","scale","min","max","baseTickValues","baseFormat","format","sign","tickSpacing","Math","dy","canvas_dy","textAnchor","x","value","x1","y1","x2","y2","labelX","labelY","nodes","id","d","fy","origX","simulation","i","zip","b","y","domainClassName","fill","stroke","strokeWidth","opacity","xAxis","children","Tick","result","tick","drawEachTick","drawEachTickLabel"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { forceSimulation, forceX, forceCollide } from \"d3-force\";\nimport { range as d3Range } from \"d3-array\";\n\nimport GenericChartComponent from \"../GenericChartComponent\";\nimport { getAxisCanvas } from \"../GenericComponent\";\nimport AxisZoomCapture from \"./AxisZoomCapture\";\n\nimport { first, last, hexToRGBA, isNotDefined, isDefined, identity, zipper, strokeDashTypes, getStrokeDasharray } from \"../utils\";\n\nclass Axis extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t\tthis.saveNode = this.saveNode.bind(this);\n\t\tthis.getMoreProps = this.getMoreProps.bind(this);\n\t}\n\tsaveNode(node) {\n\t\tthis.node = node;\n\t}\n\tgetMoreProps() {\n\t\treturn this.node.getMoreProps();\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst { showDomain, showTicks, transform, range, getScale } = this.props;\n\n\t\tctx.save();\n\t\tctx.translate(transform[0], transform[1]);\n\n\t\tif (showDomain) drawAxisLine(ctx, this.props, range);\n\t\tif (showTicks) {\n\t\t\tconst tickProps = tickHelper(this.props, getScale(moreProps));\n\t\t\tdrawTicks(ctx, tickProps);\n\t\t}\n\n\t\tctx.restore();\n\t}\n\trenderSVG(moreProps) {\n\t\tconst { className } = this.props;\n\t\tconst { showDomain, showTicks, range, getScale } = this.props;\n\n\t\tconst ticks = showTicks ? axisTicksSVG(this.props, getScale(moreProps)) : null;\n\t\tconst domain = showDomain ? axisLineSVG(this.props, range) : null;\n\n\t\treturn <g className={className}>\n\t\t\t{ticks}\n\t\t\t{domain}\n\t\t</g>;\n\t}\n\trender() {\n\t\tconst { bg, axisZoomCallback, className, zoomCursorClassName, zoomEnabled, getScale, inverted } = this.props;\n\t\tconst { transform, getMouseDelta, edgeClip } = this.props;\n\t\tconst { onContextMenu, onDoubleClick } = this.props;\n\n\t\tconst zoomCapture = zoomEnabled\n\t\t\t? <AxisZoomCapture\n\t\t\t\tbg={bg}\n\t\t\t\tgetScale={getScale}\n\t\t\t\tgetMoreProps={this.getMoreProps}\n\t\t\t\tgetMouseDelta={getMouseDelta}\n\t\t\t\taxisZoomCallback={axisZoomCallback}\n\t\t\t\tclassName={className}\n\t\t\t\tzoomCursorClassName={zoomCursorClassName}\n\t\t\t\tinverted={inverted}\n\t\t\t\tonContextMenu={onContextMenu}\n\t\t\t\tonDoubleClick={onDoubleClick}\n\t\t\t/>\n\t\t\t: null;\n\n\t\treturn <g transform={`translate(${ transform[0] }, ${ transform[1] })`}>\n\t\t\t{zoomCapture}\n\t\t\t<GenericChartComponent ref={this.saveNode}\n\t\t\t\tcanvasToDraw={getAxisCanvas}\n\t\t\t\tclip={false}\n\t\t\t\tedgeClip={edgeClip}\n\t\t\t\tsvgDraw={this.renderSVG}\n\t\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\t\tdrawOn={[\"pan\"]}\n\t\t\t/>\n\t\t</g>;\n\t}\n}\n\nAxis.propTypes = {\n\tinnerTickSize: PropTypes.number,\n\touterTickSize: PropTypes.number,\n\ttickFormat: PropTypes.func,\n\ttickPadding: PropTypes.number,\n\ttickSize: PropTypes.number,\n\tticks: PropTypes.number,\n\ttickLabelFill: PropTypes.string,\n\ttickStroke: PropTypes.string,\n\ttickStrokeOpacity: PropTypes.number,\n\ttickStrokeWidth: PropTypes.number,\n\ttickStrokeDasharray: PropTypes.oneOf(strokeDashTypes),\n\ttickValues: PropTypes.oneOfType([PropTypes.array, PropTypes.func]),\n\ttickInterval: PropTypes.number,\n\ttickIntervalFunction: PropTypes.func,\n\tshowDomain: PropTypes.bool,\n\tshowTicks: PropTypes.bool,\n\tclassName: PropTypes.string,\n\taxisZoomCallback: PropTypes.func,\n\tzoomEnabled: PropTypes.bool,\n\tinverted: PropTypes.bool,\n\tzoomCursorClassName: PropTypes.string,\n\ttransform: PropTypes.arrayOf(PropTypes.number).isRequired,\n\trange: PropTypes.arrayOf(PropTypes.number).isRequired,\n\tgetMouseDelta: PropTypes.func.isRequired,\n\tgetScale: PropTypes.func.isRequired,\n\tbg: PropTypes.object.isRequired,\n\tedgeClip: PropTypes.bool.isRequired,\n\tonContextMenu: PropTypes.func,\n\tonDoubleClick: PropTypes.func,\n};\n\nAxis.defaultProps = {\n\tzoomEnabled: false,\n\tzoomCursorClassName: \"\",\n\tedgeClip: false,\n};\n\nfunction tickHelper(props, scale) {\n\tconst {\n\t\torient, innerTickSize, tickFormat, tickPadding,\n\t\ttickLabelFill, tickStrokeWidth, tickStrokeDasharray,\n\t\tfontSize, fontFamily, fontWeight, showTicks, flexTicks,\n\t\tshowTickLabel\n\t} = props;\n\tconst {\n\t\tticks: tickArguments, tickValues: tickValuesProp,\n\t\ttickStroke, tickStrokeOpacity, tickInterval, tickIntervalFunction\n\t} = props;\n\n\t// if (tickArguments) tickArguments = [tickArguments];\n\n\tlet tickValues;\n\tif (isDefined(tickValuesProp)) {\n\t\tif (typeof tickValuesProp === \"function\") {\n\t\t\ttickValues = tickValuesProp(scale.domain());\n\t\t} else {\n\t\t\ttickValues = tickValuesProp;\n\t\t}\n\t} else if (isDefined(tickInterval)) {\n\t\tconst [min, max] = scale.domain();\n\t\tconst baseTickValues = d3Range(min, max, (max - min) / tickInterval);\n\n\t\ttickValues = tickIntervalFunction\n\t\t\t? tickIntervalFunction(min, max, tickInterval)\n\t\t\t: baseTickValues;\n\t} else if (isDefined(scale.ticks)) {\n\t\ttickValues = scale.ticks(tickArguments, flexTicks);\n\t} else {\n\t\ttickValues = scale.domain();\n\t}\n\n\tconst baseFormat = scale.tickFormat\n\t\t? scale.tickFormat(tickArguments)\n\t\t: identity;\n\n\tconst format = isNotDefined(tickFormat)\n\t\t? baseFormat\n\t\t: d => tickFormat(d) || \"\";\n\n\tconst sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\n\tconst tickSpacing = Math.max(innerTickSize, 0) + tickPadding;\n\n\tlet ticks, dy, canvas_dy, textAnchor;\n\n\tif (orient === \"bottom\" || orient === \"top\") {\n\t\tdy = sign < 0 ? \"0em\" : \".71em\";\n\t\tcanvas_dy = sign < 0 ? 0 : (fontSize * .71);\n\t\ttextAnchor = \"middle\";\n\n\t\tticks = tickValues.map(d => {\n\t\t\tconst x = Math.round(scale(d));\n\t\t\treturn {\n\t\t\t\tvalue: d,\n\t\t\t\tx1: x,\n\t\t\t\ty1: 0,\n\t\t\t\tx2: x,\n\t\t\t\ty2: sign * innerTickSize,\n\t\t\t\tlabelX: x,\n\t\t\t\tlabelY: sign * tickSpacing,\n\t\t\t};\n\t\t});\n\n\t\tif (showTicks && flexTicks) {\n\t\t\t// console.log(ticks, showTicks);\n\n\t\t\tconst nodes = ticks.map(d => ({ id: d.value, value: d.value, fy: d.y2, origX: d.x1 }));\n\n\t\t\tconst simulation = forceSimulation(nodes)\n\t\t\t\t.force(\"x\", forceX(d => d.origX).strength(1))\n\t\t\t\t.force(\"collide\", forceCollide(22))\n\t\t\t\t// .force(\"center\", forceCenter())\n\t\t\t\t.stop();\n\n\t\t\tfor (let i = 0; i < 100; ++i) simulation.tick();\n\t\t\t// console.log(nodes);\n\n\t\t\tconst zip = zipper()\n\t\t\t\t.combine((a, b) => {\n\t\t\t\t\tif (Math.abs(b.x - b.origX) > 0.01) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...a,\n\t\t\t\t\t\t\tx2: b.x,\n\t\t\t\t\t\t\tlabelX: b.x\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn a;\n\t\t\t\t});\n\n\t\t\tticks = zip(ticks, nodes);\n\t\t}\n\n\n\t} else {\n\t\tticks = tickValues.map(d => {\n\t\t\tconst y = Math.round(scale(d));\n\t\t\treturn {\n\t\t\t\tvalue: d,\n\t\t\t\tx1: 0,\n\t\t\t\ty1: y,\n\t\t\t\tx2: sign * innerTickSize,\n\t\t\t\ty2: y,\n\t\t\t\tlabelX: sign * tickSpacing,\n\t\t\t\tlabelY: y,\n\t\t\t};\n\t\t});\n\n\t\tdy = \".32em\";\n\t\tcanvas_dy = (fontSize * .32);\n\t\ttextAnchor = sign < 0 ? \"end\" : \"start\";\n\t}\n\n\treturn {\n\t\tticks, scale, tickStroke,\n\t\ttickLabelFill: (tickLabelFill || tickStroke),\n\t\ttickStrokeOpacity,\n\t\ttickStrokeWidth,\n\t\ttickStrokeDasharray,\n\t\tdy,\n\t\tcanvas_dy,\n\t\ttextAnchor,\n\t\tfontSize,\n\t\tfontFamily,\n\t\tfontWeight,\n\t\tformat,\n\t\tshowTickLabel,\n\t};\n}\n\n/* eslint-disable react/prop-types */\nfunction axisLineSVG(props, range) {\n\tconst { orient, outerTickSize } = props;\n\tconst { domainClassName, fill, stroke, strokeWidth, opacity } = props;\n\n\tconst sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\n\n\tlet d;\n\n\tif (orient === \"bottom\" || orient === \"top\") {\n\t\td = \"M\" + range[0] + \",\" + sign * outerTickSize + \"V0H\" + range[1] + \"V\" + sign * outerTickSize;\n\t} else {\n\t\td = \"M\" + sign * outerTickSize + \",\" + range[0] + \"H0V\" + range[1] + \"H\" + sign * outerTickSize;\n\t}\n\n\treturn (\n\t\t<path\n\t\t\tclassName={domainClassName}\n\t\t\td={d}\n\t\t\tfill={fill}\n\t\t\topacity={opacity}\n\t\t\tstroke={stroke}\n\t\t\tstrokeWidth={strokeWidth} >\n\t\t</path>\n\t);\n}\n/* eslint-enable react/prop-types */\n\n\nfunction drawAxisLine(ctx, props, range) {\n\t// props = { ...AxisLine.defaultProps, ...props };\n\n\tconst { orient, outerTickSize, stroke, strokeWidth, opacity } = props;\n\n\tconst sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\n\tconst xAxis = (orient === \"bottom\" || orient === \"top\");\n\n\t// var range = d3_scaleRange(xAxis ? xScale : yScale);\n\n\tctx.lineWidth = strokeWidth;\n\tctx.strokeStyle = hexToRGBA(stroke, opacity);\n\n\tctx.beginPath();\n\n\tif (xAxis) {\n\t\tctx.moveTo(first(range), sign * outerTickSize);\n\t\tctx.lineTo(first(range), 0);\n\t\tctx.lineTo(last(range), 0);\n\t\tctx.lineTo(last(range), sign * outerTickSize);\n\t} else {\n\t\tctx.moveTo(sign * outerTickSize, first(range));\n\t\tctx.lineTo(0, first(range));\n\t\tctx.lineTo(0, last(range));\n\t\tctx.lineTo(sign * outerTickSize, last(range));\n\t}\n\tctx.stroke();\n}\n\nfunction Tick(props) {\n\tconst { tickLabelFill, tickStroke, tickStrokeOpacity, tickStrokeDasharray, tickStrokeWidth, textAnchor, fontSize, fontFamily, fontWeight } = props;\n\tconst { x1, y1, x2, y2, labelX, labelY, dy } = props;\n\treturn (\n\t\t<g className=\"tick\">\n\t\t\t<line\n\t\t\t\tshapeRendering=\"crispEdges\"\n\t\t\t\topacity={tickStrokeOpacity}\n\t\t\t\tstroke={tickStroke}\n\t\t\t\tstrokeWidth={tickStrokeWidth}\n\t\t\t\tstrokeDasharray={getStrokeDasharray(tickStrokeDasharray)}\n\t\t\t\tx1={x1} y1={y1}\n\t\t\t\tx2={x2} y2={y2} />\n\t\t\t<text\n\t\t\t\tdy={dy} x={labelX} y={labelY}\n\t\t\t\tfill={tickLabelFill}\n\t\t\t\tfontSize={fontSize}\n\t\t\t\tfontWeight={fontWeight}\n\t\t\t\tfontFamily={fontFamily}\n\t\t\t\ttextAnchor={textAnchor}>\n\t\t\t\t{props.children}\n\t\t\t</text>\n\t\t</g>\n\t);\n}\n\nTick.propTypes = {\n\tchildren: PropTypes.string.isRequired,\n\tx1: PropTypes.number.isRequired,\n\ty1: PropTypes.number.isRequired,\n\tx2: PropTypes.number.isRequired,\n\ty2: PropTypes.number.isRequired,\n\tlabelX: PropTypes.number.isRequired,\n\tlabelY: PropTypes.number.isRequired,\n\tdy: PropTypes.string.isRequired,\n\ttickStroke: PropTypes.string,\n\ttickLabelFill: PropTypes.string,\n\ttickStrokeWidth: PropTypes.number,\n\ttickStrokeOpacity: PropTypes.number,\n\ttickStrokeDasharray: PropTypes.oneOf(strokeDashTypes),\n\ttextAnchor: PropTypes.string,\n\tfontSize: PropTypes.number,\n\tfontFamily: PropTypes.string,\n\tfontWeight: PropTypes.oneOfType([\n\t  PropTypes.string,\n\t  PropTypes.number\n\t]),\n};\n\nfunction axisTicksSVG(props, scale) {\n\tconst result = tickHelper(props, scale);\n\n\tconst { tickLabelFill, tickStroke, tickStrokeOpacity, tickStrokeWidth, tickStrokeDasharray, textAnchor } = result;\n\tconst { fontSize, fontFamily, fontWeight, ticks, format } = result;\n\n\tconst { dy } = result;\n\n\treturn (\n\t\t<g>\n\t\t\t{ticks.map((tick, idx) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Tick key={idx}\n\t\t\t\t\t\ttickStroke={tickStroke}\n\t\t\t\t\t\ttickLabelFill={tickLabelFill}\n\t\t\t\t\t\ttickStrokeWidth={tickStrokeWidth}\n\t\t\t\t\t\ttickStrokeOpacity={tickStrokeOpacity}\n\t\t\t\t\t\ttickStrokeDasharray={tickStrokeDasharray}\n\t\t\t\t\t\tdy={dy}\n\t\t\t\t\t\tx1={tick.x1} y1={tick.y1}\n\t\t\t\t\t\tx2={tick.x2} y2={tick.y2}\n\t\t\t\t\t\tlabelX={tick.labelX} labelY={tick.labelY}\n\t\t\t\t\t\ttextAnchor={textAnchor}\n\t\t\t\t\t\tfontSize={fontSize}\n\t\t\t\t\t\tfontWeight={fontWeight}\n\t\t\t\t\t\tfontFamily={fontFamily}>{format(tick.value)}</Tick>\n\t\t\t\t);\n\t\t\t})}\n\t\t</g>\n\t);\n}\n\nfunction drawTicks(ctx, result) {\n\n\tconst { tickStroke, tickStrokeOpacity, tickLabelFill } = result;\n\tconst { textAnchor, fontSize, fontFamily, fontWeight, ticks, showTickLabel } = result;\n\n\tctx.strokeStyle = hexToRGBA(tickStroke, tickStrokeOpacity);\n\n\tctx.fillStyle = tickStroke;\n\t// ctx.textBaseline = 'middle';\n\n\tticks.forEach((tick) => {\n\t\tdrawEachTick(ctx, tick, result);\n\t});\n\n\tctx.font = `${fontWeight} ${fontSize}px ${fontFamily}`;\n\tctx.fillStyle = tickLabelFill;\n\tctx.textAlign = textAnchor === \"middle\" ? \"center\" : textAnchor;\n\n\tif (showTickLabel) {\n\t\tticks.forEach((tick) => {\n\t\t\tdrawEachTickLabel(ctx, tick, result);\n\t\t});\n\t}\n}\n\nfunction drawEachTick(ctx, tick, result) {\n\tconst { tickStrokeWidth, tickStrokeDasharray } = result;\n\n\tctx.beginPath();\n\n\tctx.moveTo(tick.x1, tick.y1);\n\tctx.lineTo(tick.x2, tick.y2);\n\tctx.lineWidth = tickStrokeWidth;\n\tctx.setLineDash(getStrokeDasharray(tickStrokeDasharray).split(\",\"));\n\tctx.stroke();\n}\n\nfunction drawEachTickLabel(ctx, tick, result) {\n\tconst { canvas_dy, format } = result;\n\n\tctx.beginPath();\n\tctx.fillText(format(tick.value), tick.labelX, tick.labelY + canvas_dy);\n}\n\nexport default Axis;\n"]},"metadata":{},"sourceType":"script"}