{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _d3Array = require(\"d3-array\");\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _GenericChartComponent = require(\"../GenericChartComponent\");\n\nvar _GenericChartComponent2 = _interopRequireDefault(_GenericChartComponent);\n\nvar _GenericComponent = require(\"../GenericComponent\");\n\nvar _StackedBarSeries = require(\"./StackedBarSeries\");\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar OverlayBarSeries = function (_Component) {\n  _inherits(OverlayBarSeries, _Component);\n\n  function OverlayBarSeries(props) {\n    _classCallCheck(this, OverlayBarSeries);\n\n    var _this = _possibleConstructorReturn(this, (OverlayBarSeries.__proto__ || Object.getPrototypeOf(OverlayBarSeries)).call(this, props));\n\n    _this.renderSVG = _this.renderSVG.bind(_this);\n    _this.drawOnCanvas = _this.drawOnCanvas.bind(_this);\n    return _this;\n  }\n\n  _createClass(OverlayBarSeries, [{\n    key: \"drawOnCanvas\",\n    value: function drawOnCanvas(ctx, moreProps) {\n      var yAccessor = this.props.yAccessor;\n      var bars = getBars(this.props, moreProps, yAccessor);\n      (0, _StackedBarSeries.drawOnCanvas2)(this.props, ctx, bars);\n    }\n  }, {\n    key: \"renderSVG\",\n    value: function renderSVG(moreProps) {\n      var yAccessor = this.props.yAccessor;\n      var bars = getBars(this.props, moreProps, yAccessor);\n      return _react2.default.createElement(\"g\", {\n        className: \"react-stockcharts-bar-series\"\n      }, (0, _StackedBarSeries.getBarsSVG2)(this.props, bars));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var clip = this.props.clip;\n      return _react2.default.createElement(_GenericChartComponent2.default, {\n        svgDraw: this.renderSVG,\n        canvasToDraw: _GenericComponent.getAxisCanvas,\n        canvasDraw: this.drawOnCanvas,\n        clip: clip,\n        drawOn: [\"pan\"]\n      });\n    }\n  }]);\n\n  return OverlayBarSeries;\n}(_react.Component);\n\nOverlayBarSeries.propTypes = {\n  baseAt: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.func]).isRequired,\n  direction: _propTypes2.default.oneOf([\"up\", \"down\"]).isRequired,\n  stroke: _propTypes2.default.bool.isRequired,\n  widthRatio: _propTypes2.default.number.isRequired,\n  opacity: _propTypes2.default.number.isRequired,\n  fill: _propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.string]).isRequired,\n  className: _propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.string]).isRequired,\n  xAccessor: _propTypes2.default.func,\n  yAccessor: _propTypes2.default.arrayOf(_propTypes2.default.func),\n  xScale: _propTypes2.default.func,\n  yScale: _propTypes2.default.func,\n  plotData: _propTypes2.default.array,\n  clip: _propTypes2.default.bool.isRequired\n};\nOverlayBarSeries.defaultProps = {\n  baseAt: function baseAt(xScale, yScale\n  /* , d*/\n  ) {\n    return (0, _utils.first)(yScale.range());\n  },\n  direction: \"up\",\n  className: \"bar\",\n  stroke: false,\n  fill: \"#4682B4\",\n  opacity: 1,\n  widthRatio: 0.5,\n  width: _utils.plotDataLengthBarWidth,\n  clip: true\n};\n\nfunction getBars(props, moreProps, yAccessor) {\n  var xScale = moreProps.xScale,\n      xAccessor = moreProps.xAccessor,\n      yScale = moreProps.chartConfig.yScale,\n      plotData = moreProps.plotData;\n  var baseAt = props.baseAt,\n      className = props.className,\n      fill = props.fill,\n      stroke = props.stroke;\n  var getClassName = (0, _utils.functor)(className);\n  var getFill = (0, _utils.functor)(fill);\n  var getBase = (0, _utils.functor)(baseAt);\n  var widthFunctor = (0, _utils.functor)(props.width);\n  var width = widthFunctor(props, moreProps);\n  var offset = Math.floor(0.5 * width); // console.log(xScale.domain(), yScale.domain());\n\n  var bars = plotData.map(function (d) {\n    // eslint-disable-next-line prefer-const\n    var innerBars = yAccessor.map(function (eachYAccessor, i) {\n      var yValue = eachYAccessor(d);\n      if ((0, _utils.isNotDefined)(yValue)) return undefined;\n      var xValue = xAccessor(d);\n      var x = Math.round(xScale(xValue)) - offset;\n      var y = yScale(yValue); // console.log(yValue, y, xValue, x)\n\n      return {\n        width: offset * 2,\n        x: x,\n        y: y,\n        className: getClassName(d, i),\n        stroke: stroke ? getFill(d, i) : \"none\",\n        fill: getFill(d, i),\n        i: i\n      };\n    }).filter(function (yValue) {\n      return (0, _utils.isDefined)(yValue);\n    });\n    var b = getBase(xScale, yScale, d);\n    var h = void 0;\n\n    for (var i = innerBars.length - 1; i >= 0; i--) {\n      h = b - innerBars[i].y;\n\n      if (h < 0) {\n        innerBars[i].y = b;\n        h = -1 * h;\n      }\n\n      innerBars[i].height = h;\n      b = innerBars[i].y;\n    }\n\n    return innerBars;\n  });\n  return (0, _d3Array.merge)(bars);\n}\n\nexports.default = OverlayBarSeries;","map":{"version":3,"sources":["../../../src/lib/series/OverlayBarSeries.js"],"names":["OverlayBarSeries","ctx","moreProps","yAccessor","bars","getBars","clip","baseAt","direction","stroke","widthRatio","opacity","fill","className","xAccessor","xScale","yScale","plotData","isRequired","width","props","getClassName","getFill","getBase","widthFunctor","offset","Math","innerBars","yValue","eachYAccessor","xValue","x","y","i","b","h"],"mappings":"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","sourcesContent":["\n\nimport { merge } from \"d3-array\";\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport GenericChartComponent from \"../GenericChartComponent\";\nimport { getAxisCanvas } from \"../GenericComponent\";\n\nimport { drawOnCanvas2, getBarsSVG2 } from \"./StackedBarSeries\";\nimport { isDefined, isNotDefined, first, functor, plotDataLengthBarWidth } from \"../utils\";\n\nclass OverlayBarSeries extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst { yAccessor } = this.props;\n\t\tconst bars = getBars(this.props, moreProps, yAccessor);\n\n\t\tdrawOnCanvas2(this.props, ctx, bars);\n\t}\n\trenderSVG(moreProps) {\n\t\tconst { yAccessor } = this.props;\n\n\t\tconst bars = getBars(this.props, moreProps, yAccessor);\n\t\treturn <g className=\"react-stockcharts-bar-series\">\n\t\t\t{getBarsSVG2(this.props, bars)}\n\t\t</g>;\n\t}\n\trender() {\n\t\tconst { clip } = this.props;\n\n\t\treturn <GenericChartComponent\n\t\t\tsvgDraw={this.renderSVG}\n\t\t\tcanvasToDraw={getAxisCanvas}\n\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\tclip={clip}\n\t\t\tdrawOn={[\"pan\"]}\n\t\t/>;\n\t}\n}\n\nOverlayBarSeries.propTypes = {\n\tbaseAt: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.func,\n\t]).isRequired,\n\tdirection: PropTypes.oneOf([\"up\", \"down\"]).isRequired,\n\tstroke: PropTypes.bool.isRequired,\n\twidthRatio: PropTypes.number.isRequired,\n\topacity: PropTypes.number.isRequired,\n\tfill: PropTypes.oneOfType([\n\t\tPropTypes.func, PropTypes.string\n\t]).isRequired,\n\tclassName: PropTypes.oneOfType([\n\t\tPropTypes.func, PropTypes.string\n\t]).isRequired,\n\txAccessor: PropTypes.func,\n\tyAccessor: PropTypes.arrayOf(PropTypes.func),\n\txScale: PropTypes.func,\n\tyScale: PropTypes.func,\n\tplotData: PropTypes.array,\n\tclip: PropTypes.bool.isRequired,\n};\n\nOverlayBarSeries.defaultProps = {\n\tbaseAt: (xScale, yScale/* , d*/) => first(yScale.range()),\n\tdirection: \"up\",\n\tclassName: \"bar\",\n\tstroke: false,\n\tfill: \"#4682B4\",\n\topacity: 1,\n\twidthRatio: 0.5,\n\twidth: plotDataLengthBarWidth,\n\tclip: true,\n};\n\nfunction getBars(props, moreProps, yAccessor) {\n\tconst { xScale, xAccessor, chartConfig: { yScale }, plotData } = moreProps;\n\tconst { baseAt, className, fill, stroke } = props;\n\n\tconst getClassName = functor(className);\n\tconst getFill = functor(fill);\n\tconst getBase = functor(baseAt);\n\tconst widthFunctor = functor(props.width);\n\n\tconst width = widthFunctor(props, moreProps);\n\tconst offset = Math.floor(0.5 * width);\n\n\t// console.log(xScale.domain(), yScale.domain());\n\n\tconst bars = plotData\n\t\t.map(d => {\n\t\t\t// eslint-disable-next-line prefer-const\n\t\t\tlet innerBars = yAccessor.map((eachYAccessor, i) => {\n\t\t\t\tconst yValue = eachYAccessor(d);\n\t\t\t\tif (isNotDefined(yValue)) return undefined;\n\n\t\t\t\tconst xValue = xAccessor(d);\n\t\t\t\tconst x = Math.round(xScale(xValue)) - offset;\n\t\t\t\tconst y = yScale(yValue);\n\t\t\t\t// console.log(yValue, y, xValue, x)\n\t\t\t\treturn {\n\t\t\t\t\twidth: offset * 2,\n\t\t\t\t\tx: x,\n\t\t\t\t\ty: y,\n\t\t\t\t\tclassName: getClassName(d, i),\n\t\t\t\t\tstroke: stroke ? getFill(d, i) : \"none\",\n\t\t\t\t\tfill: getFill(d, i),\n\t\t\t\t\ti,\n\t\t\t\t};\n\t\t\t}).filter(yValue => isDefined(yValue));\n\n\t\t\tlet b = getBase(xScale, yScale, d);\n\t\t\tlet h;\n\t\t\tfor (let i = innerBars.length - 1; i >= 0; i--) {\n\t\t\t\th = b - innerBars[i].y;\n\t\t\t\tif (h < 0) {\n\t\t\t\t\tinnerBars[i].y = b;\n\t\t\t\t\th = -1 * h;\n\t\t\t\t}\n\t\t\t\tinnerBars[i].height = h;\n\t\t\t\tb = innerBars[i].y;\n\t\t\t}\n\t\t\treturn innerBars;\n\t\t});\n\n\treturn merge(bars);\n}\n\nexport default OverlayBarSeries;\n"]},"metadata":{},"sourceType":"script"}