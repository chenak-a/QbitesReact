{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useRef, useState, useEffect } from 'react';\nimport raf from \"rc-util/es/raf\";\n/**\n * State generate. Return a `setState` but it will flush all state with one render to save perf.\n * This is not a realization of `unstable_batchedUpdates`.\n */\n\nexport function useBatchFrameState() {\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      forceUpdate = _useState2[1];\n\n  var statesRef = useRef([]);\n  var destroyRef = useRef(false);\n  var walkingIndex = 0;\n  var beforeFrameId = 0;\n  useEffect(function () {\n    return function () {\n      destroyRef.current = true;\n    };\n  }, []);\n\n  function createState(defaultValue) {\n    var myIndex = walkingIndex;\n    walkingIndex += 1; // Fill value if not exist yet\n\n    if (statesRef.current.length < myIndex + 1) {\n      statesRef.current[myIndex] = defaultValue;\n    } // Return filled as `setState`\n\n\n    var value = statesRef.current[myIndex];\n\n    function setValue(val) {\n      statesRef.current[myIndex] = typeof val === 'function' ? val(statesRef.current[myIndex]) : val;\n      raf.cancel(beforeFrameId); // Flush with batch\n\n      beforeFrameId = raf(function () {\n        if (!destroyRef.current) {\n          forceUpdate({});\n        }\n      });\n    }\n\n    return [value, setValue];\n  }\n\n  return createState;\n}","map":{"version":3,"names":["_slicedToArray","useRef","useState","useEffect","raf","useBatchFrameState","_useState","_useState2","forceUpdate","statesRef","destroyRef","walkingIndex","beforeFrameId","current","createState","defaultValue","myIndex","length","value","setValue","val","cancel"],"sources":["/home/chenak/QbitesReact/my-app/node_modules/rc-overflow/es/hooks/useBatchFrameState.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useRef, useState, useEffect } from 'react';\nimport raf from \"rc-util/es/raf\";\n/**\n * State generate. Return a `setState` but it will flush all state with one render to save perf.\n * This is not a realization of `unstable_batchedUpdates`.\n */\n\nexport function useBatchFrameState() {\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      forceUpdate = _useState2[1];\n\n  var statesRef = useRef([]);\n  var destroyRef = useRef(false);\n  var walkingIndex = 0;\n  var beforeFrameId = 0;\n  useEffect(function () {\n    return function () {\n      destroyRef.current = true;\n    };\n  }, []);\n\n  function createState(defaultValue) {\n    var myIndex = walkingIndex;\n    walkingIndex += 1; // Fill value if not exist yet\n\n    if (statesRef.current.length < myIndex + 1) {\n      statesRef.current[myIndex] = defaultValue;\n    } // Return filled as `setState`\n\n\n    var value = statesRef.current[myIndex];\n\n    function setValue(val) {\n      statesRef.current[myIndex] = typeof val === 'function' ? val(statesRef.current[myIndex]) : val;\n      raf.cancel(beforeFrameId); // Flush with batch\n\n      beforeFrameId = raf(function () {\n        if (!destroyRef.current) {\n          forceUpdate({});\n        }\n      });\n    }\n\n    return [value, setValue];\n  }\n\n  return createState;\n}"],"mappings":"AAAA,OAAOA,cAAP,MAA2B,0CAA3B;AACA,SAASC,MAAT,EAAiBC,QAAjB,EAA2BC,SAA3B,QAA4C,OAA5C;AACA,OAAOC,GAAP,MAAgB,gBAAhB;AACA;AACA;AACA;AACA;;AAEA,OAAO,SAASC,kBAAT,GAA8B;EACnC,IAAIC,SAAS,GAAGJ,QAAQ,CAAC,EAAD,CAAxB;EAAA,IACIK,UAAU,GAAGP,cAAc,CAACM,SAAD,EAAY,CAAZ,CAD/B;EAAA,IAEIE,WAAW,GAAGD,UAAU,CAAC,CAAD,CAF5B;;EAIA,IAAIE,SAAS,GAAGR,MAAM,CAAC,EAAD,CAAtB;EACA,IAAIS,UAAU,GAAGT,MAAM,CAAC,KAAD,CAAvB;EACA,IAAIU,YAAY,GAAG,CAAnB;EACA,IAAIC,aAAa,GAAG,CAApB;EACAT,SAAS,CAAC,YAAY;IACpB,OAAO,YAAY;MACjBO,UAAU,CAACG,OAAX,GAAqB,IAArB;IACD,CAFD;EAGD,CAJQ,EAIN,EAJM,CAAT;;EAMA,SAASC,WAAT,CAAqBC,YAArB,EAAmC;IACjC,IAAIC,OAAO,GAAGL,YAAd;IACAA,YAAY,IAAI,CAAhB,CAFiC,CAEd;;IAEnB,IAAIF,SAAS,CAACI,OAAV,CAAkBI,MAAlB,GAA2BD,OAAO,GAAG,CAAzC,EAA4C;MAC1CP,SAAS,CAACI,OAAV,CAAkBG,OAAlB,IAA6BD,YAA7B;IACD,CANgC,CAM/B;;;IAGF,IAAIG,KAAK,GAAGT,SAAS,CAACI,OAAV,CAAkBG,OAAlB,CAAZ;;IAEA,SAASG,QAAT,CAAkBC,GAAlB,EAAuB;MACrBX,SAAS,CAACI,OAAV,CAAkBG,OAAlB,IAA6B,OAAOI,GAAP,KAAe,UAAf,GAA4BA,GAAG,CAACX,SAAS,CAACI,OAAV,CAAkBG,OAAlB,CAAD,CAA/B,GAA8DI,GAA3F;MACAhB,GAAG,CAACiB,MAAJ,CAAWT,aAAX,EAFqB,CAEM;;MAE3BA,aAAa,GAAGR,GAAG,CAAC,YAAY;QAC9B,IAAI,CAACM,UAAU,CAACG,OAAhB,EAAyB;UACvBL,WAAW,CAAC,EAAD,CAAX;QACD;MACF,CAJkB,CAAnB;IAKD;;IAED,OAAO,CAACU,KAAD,EAAQC,QAAR,CAAP;EACD;;EAED,OAAOL,WAAP;AACD"},"metadata":{},"sourceType":"module"}