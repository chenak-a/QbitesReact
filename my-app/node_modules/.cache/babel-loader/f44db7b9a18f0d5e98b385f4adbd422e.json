{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _GenericChartComponent = require(\"../../GenericChartComponent\");\n\nvar _GenericChartComponent2 = _interopRequireDefault(_GenericChartComponent);\n\nvar _GenericComponent = require(\"../../GenericComponent\");\n\nvar _utils = require(\"../../utils\");\n\nvar _ChartDataUtil = require(\"../../utils/ChartDataUtil\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar MouseLocationIndicator = function (_Component) {\n  _inherits(MouseLocationIndicator, _Component);\n\n  function MouseLocationIndicator(props) {\n    _classCallCheck(this, MouseLocationIndicator);\n\n    var _this = _possibleConstructorReturn(this, (MouseLocationIndicator.__proto__ || Object.getPrototypeOf(MouseLocationIndicator)).call(this, props));\n\n    _this.renderSVG = _this.renderSVG.bind(_this);\n    _this.drawOnCanvas = _this.drawOnCanvas.bind(_this);\n    _this.handleMousePosChange = _this.handleMousePosChange.bind(_this);\n    _this.handleMouseDown = _this.handleMouseDown.bind(_this);\n    _this.handleClick = _this.handleClick.bind(_this);\n    _this.xy = _this.xy.bind(_this);\n    _this.mutableState = {};\n    return _this;\n  }\n\n  _createClass(MouseLocationIndicator, [{\n    key: \"handleMouseDown\",\n    value: function handleMouseDown(moreProps, e) {\n      var pos = this.xy(moreProps, e);\n\n      if ((0, _utils.isDefined)(pos)) {\n        var xValue = pos.xValue,\n            yValue = pos.yValue,\n            x = pos.x,\n            y = pos.y;\n        this.mutableState = {\n          x: x,\n          y: y\n        };\n        this.props.onMouseDown([xValue, yValue], moreProps, e);\n      }\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(moreProps, e) {\n      var pos = this.xy(moreProps, e);\n\n      if ((0, _utils.isDefined)(pos)) {\n        var xValue = pos.xValue,\n            yValue = pos.yValue,\n            x = pos.x,\n            y = pos.y;\n        this.mutableState = {\n          x: x,\n          y: y\n        };\n        this.props.onClick([xValue, yValue], moreProps, e);\n      }\n    }\n  }, {\n    key: \"xy\",\n    value: function xy(moreProps, e) {\n      var xAccessor = moreProps.xAccessor,\n          plotData = moreProps.plotData;\n      var mouseXY = moreProps.mouseXY,\n          currentItem = moreProps.currentItem,\n          xScale = moreProps.xScale,\n          yScale = moreProps.chartConfig.yScale;\n      var _props = this.props,\n          enabled = _props.enabled,\n          snap = _props.snap,\n          shouldDisableSnap = _props.shouldDisableSnap,\n          snapTo = _props.snapTo;\n\n      if (enabled && (0, _utils.isDefined)(currentItem) && (0, _utils.isDefined)(e)) {\n        var xValue = snap && !shouldDisableSnap(e) ? xAccessor(currentItem) : (0, _ChartDataUtil.getXValue)(xScale, xAccessor, mouseXY, plotData);\n        var yValue = snap && !shouldDisableSnap(e) ? (0, _utils.getClosestValue)(snapTo(currentItem), yScale.invert(mouseXY[1])) : yScale.invert(mouseXY[1]);\n        var x = xScale(xValue);\n        var y = yScale(yValue);\n        return {\n          xValue: xValue,\n          yValue: yValue,\n          x: x,\n          y: y\n        };\n      }\n    }\n  }, {\n    key: \"handleMousePosChange\",\n    value: function handleMousePosChange(moreProps, e) {\n      if (!(0, _utils.shallowEqual)(moreProps.mousXY, moreProps.prevMouseXY)) {\n        var pos = this.xy(moreProps, e);\n\n        if ((0, _utils.isDefined)(pos)) {\n          var xValue = pos.xValue,\n              yValue = pos.yValue,\n              x = pos.x,\n              y = pos.y;\n          this.mutableState = {\n            x: x,\n            y: y\n          };\n          this.props.onMouseMove([xValue, yValue], e);\n        }\n      }\n    }\n  }, {\n    key: \"drawOnCanvas\",\n    value: function drawOnCanvas(ctx, moreProps) {\n      var _props2 = this.props,\n          enabled = _props2.enabled,\n          r = _props2.r,\n          stroke = _props2.stroke,\n          strokeWidth = _props2.strokeWidth;\n      var _mutableState = this.mutableState,\n          x = _mutableState.x,\n          y = _mutableState.y;\n      var show = moreProps.show; // console.log(show)\n\n      if (enabled && show && (0, _utils.isDefined)(x)) {\n        ctx.lineWidth = strokeWidth;\n        ctx.strokeStyle = stroke;\n        ctx.moveTo(x, y);\n        ctx.beginPath();\n        ctx.arc(x, y, r, 0, 2 * Math.PI, false);\n        ctx.stroke(); // ctx.fill();\n      }\n    }\n  }, {\n    key: \"renderSVG\",\n    value: function renderSVG(moreProps) {\n      var _props3 = this.props,\n          enabled = _props3.enabled,\n          r = _props3.r,\n          stroke = _props3.stroke,\n          strokeWidth = _props3.strokeWidth,\n          opacity = _props3.opacity;\n      var _mutableState2 = this.mutableState,\n          x = _mutableState2.x,\n          y = _mutableState2.y;\n      var show = moreProps.show; // console.log(\"HERE\")\n      // console.log(stroke, strokeWidth, opacity)\n\n      return enabled && show && (0, _utils.isDefined)(x) ? _react2.default.createElement(\"circle\", {\n        cx: x,\n        cy: y,\n        r: r,\n        stroke: stroke,\n        opacity: opacity,\n        fill: \"none\",\n        strokeWidth: strokeWidth\n      }) : null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props4 = this.props,\n          enabled = _props4.enabled,\n          disablePan = _props4.disablePan;\n      return _react2.default.createElement(_GenericChartComponent2.default, {\n        onMouseDown: this.handleMouseDown,\n        onClick: this.handleClick,\n        onContextMenu: this.handleContextMenu,\n        onMouseMove: this.handleMousePosChange,\n        onPan: this.handleMousePosChange,\n        disablePan: enabled && disablePan,\n        svgDraw: this.renderSVG,\n        canvasDraw: this.drawOnCanvas,\n        canvasToDraw: _GenericComponent.getMouseCanvas,\n        drawOn: [\"mousemove\", \"pan\"]\n      });\n    }\n  }]);\n\n  return MouseLocationIndicator;\n}(_react.Component);\n\nMouseLocationIndicator.propTypes = {\n  enabled: _propTypes2.default.bool.isRequired,\n  snap: _propTypes2.default.bool.isRequired,\n  shouldDisableSnap: _propTypes2.default.func.isRequired,\n  snapTo: _propTypes2.default.func,\n  onMouseMove: _propTypes2.default.func.isRequired,\n  onMouseDown: _propTypes2.default.func.isRequired,\n  onClick: _propTypes2.default.func.isRequired,\n  r: _propTypes2.default.number.isRequired,\n  stroke: _propTypes2.default.string.isRequired,\n  strokeWidth: _propTypes2.default.number.isRequired,\n  opacity: _propTypes2.default.number.isRequired,\n  disablePan: _propTypes2.default.bool.isRequired\n};\nMouseLocationIndicator.defaultProps = {\n  onMouseMove: _utils.noop,\n  onMouseDown: _utils.noop,\n  onClick: _utils.noop,\n  shouldDisableSnap: (0, _utils.functor)(false),\n  stroke: \"#000000\",\n  strokeWidth: 1,\n  opacity: 1,\n  disablePan: true\n};\nexports.default = MouseLocationIndicator;","map":{"version":3,"sources":["../../../../src/lib/interactive/components/MouseLocationIndicator.js"],"names":["MouseLocationIndicator","moreProps","e","pos","xValue","yValue","x","y","xAccessor","plotData","mouseXY","currentItem","xScale","yScale","enabled","snap","shouldDisableSnap","snapTo","ctx","r","stroke","strokeWidth","show","Math","opacity","disablePan","onMouseMove","onMouseDown","onClick","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport GenericChartComponent from \"../../GenericChartComponent\";\nimport { getMouseCanvas } from \"../../GenericComponent\";\n\nimport { isDefined, getClosestValue, noop, shallowEqual, functor } from \"../../utils\";\nimport { getXValue } from \"../../utils/ChartDataUtil\";\n\nclass MouseLocationIndicator extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\n\t\tthis.handleMousePosChange = this.handleMousePosChange.bind(this);\n\t\tthis.handleMouseDown = this.handleMouseDown.bind(this);\n\t\tthis.handleClick = this.handleClick.bind(this);\n\t\tthis.xy = this.xy.bind(this);\n\n\t\tthis.mutableState = {};\n\t}\n\thandleMouseDown(moreProps, e) {\n\t\tconst pos = this.xy(moreProps, e);\n\t\tif (isDefined(pos)) {\n\t\t\tconst { xValue, yValue, x, y } = pos;\n\t\t\tthis.mutableState = { x, y };\n\t\t\tthis.props.onMouseDown([xValue, yValue], moreProps, e);\n\t\t}\n\t}\n\thandleClick(moreProps, e) {\n\t\tconst pos = this.xy(moreProps, e);\n\t\tif (isDefined(pos)) {\n\t\t\tconst { xValue, yValue, x, y } = pos;\n\t\t\tthis.mutableState = { x, y };\n\t\t\tthis.props.onClick([xValue, yValue], moreProps, e);\n\t\t}\n\t}\n\txy(moreProps, e) {\n\t\tconst { xAccessor, plotData } = moreProps;\n\t\tconst { mouseXY, currentItem, xScale, chartConfig: { yScale } } = moreProps;\n\t\tconst { enabled, snap, shouldDisableSnap, snapTo } = this.props;\n\n\t\tif (enabled && isDefined(currentItem) && isDefined(e)) {\n\t\t\tconst xValue =  snap && !shouldDisableSnap(e)\n\t\t\t\t? xAccessor(currentItem)\n\t\t\t\t: getXValue(xScale, xAccessor, mouseXY, plotData);\n\t\t\tconst yValue = snap && !shouldDisableSnap(e)\n\t\t\t\t? getClosestValue(snapTo(currentItem), yScale.invert(mouseXY[1]))\n\t\t\t\t: yScale.invert(mouseXY[1]);\n\n\t\t\tconst x = xScale(xValue);\n\t\t\tconst y = yScale(yValue);\n\n\t\t\treturn { xValue, yValue, x, y };\n\t\t}\n\t}\n\thandleMousePosChange(moreProps, e) {\n\t\tif (!shallowEqual(moreProps.mousXY, moreProps.prevMouseXY)) {\n\t\t\tconst pos = this.xy(moreProps, e);\n\t\t\tif (isDefined(pos)) {\n\t\t\t\tconst { xValue, yValue, x, y } = pos;\n\t\t\t\tthis.mutableState = { x, y };\n\t\t\t\tthis.props.onMouseMove([xValue, yValue], e);\n\t\t\t}\n\t\t}\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst { enabled, r, stroke, strokeWidth } = this.props;\n\t\tconst { x, y } = this.mutableState;\n\t\tconst { show } = moreProps;\n\t\t// console.log(show)\n\t\tif (enabled && show && isDefined(x)) {\n\t\t\tctx.lineWidth = strokeWidth;\n\t\t\tctx.strokeStyle = stroke;\n\t\t\tctx.moveTo(x, y);\n\t\t\tctx.beginPath();\n\t\t\tctx.arc(x, y, r, 0, 2 * Math.PI, false);\n\t\t\tctx.stroke();\n\t\t\t// ctx.fill();\n\t\t}\n\t}\n\trenderSVG(moreProps) {\n\t\tconst { enabled, r, stroke, strokeWidth, opacity } = this.props;\n\t\tconst { x, y } = this.mutableState;\n\t\tconst { show } = moreProps;\n\n\t\t// console.log(\"HERE\")\n\t\t// console.log(stroke, strokeWidth, opacity)\n\n\t\treturn enabled && show && isDefined(x)\n\t\t\t? <circle\n\t\t\t\tcx={x}\n\t\t\t\tcy={y}\n\t\t\t\tr={r}\n\t\t\t\tstroke={stroke}\n\t\t\t\topacity={opacity}\n\t\t\t\tfill=\"none\"\n\t\t\t\tstrokeWidth={strokeWidth} />\n\t\t\t: null;\n\n\t}\n\trender() {\n\t\tconst { enabled, disablePan } = this.props;\n\t\treturn <GenericChartComponent\n\t\t\tonMouseDown={this.handleMouseDown}\n\t\t\tonClick={this.handleClick}\n\t\t\tonContextMenu={this.handleContextMenu}\n\t\t\tonMouseMove={this.handleMousePosChange}\n\t\t\tonPan={this.handleMousePosChange}\n\n\t\t\tdisablePan={enabled && disablePan}\n\n\t\t\tsvgDraw={this.renderSVG}\n\n\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\tcanvasToDraw={getMouseCanvas}\n\n\t\t\tdrawOn={[\"mousemove\", \"pan\"]}\n\t\t/>;\n\t}\n}\n\nMouseLocationIndicator.propTypes = {\n\tenabled: PropTypes.bool.isRequired,\n\tsnap: PropTypes.bool.isRequired,\n\tshouldDisableSnap: PropTypes.func.isRequired,\n\tsnapTo: PropTypes.func,\n\n\tonMouseMove: PropTypes.func.isRequired,\n\tonMouseDown: PropTypes.func.isRequired,\n\tonClick: PropTypes.func.isRequired,\n\tr: PropTypes.number.isRequired,\n\tstroke: PropTypes.string.isRequired,\n\tstrokeWidth: PropTypes.number.isRequired,\n\topacity: PropTypes.number.isRequired,\n\tdisablePan: PropTypes.bool.isRequired,\n};\n\nMouseLocationIndicator.defaultProps = {\n\tonMouseMove: noop,\n\tonMouseDown: noop,\n\tonClick: noop,\n\tshouldDisableSnap: functor(false),\n\tstroke: \"#000000\",\n\tstrokeWidth: 1,\n\topacity: 1,\n\tdisablePan: true,\n};\n\nexport default MouseLocationIndicator;"]},"metadata":{},"sourceType":"script"}