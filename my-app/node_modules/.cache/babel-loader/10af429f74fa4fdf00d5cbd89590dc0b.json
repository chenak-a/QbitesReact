{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require(\"../utils\");\n\nvar _utils2 = require(\"./utils\");\n\nvar _EachLinearRegressionChannel = require(\"./wrapper/EachLinearRegressionChannel\");\n\nvar _EachLinearRegressionChannel2 = _interopRequireDefault(_EachLinearRegressionChannel);\n\nvar _MouseLocationIndicator = require(\"./components/MouseLocationIndicator\");\n\nvar _MouseLocationIndicator2 = _interopRequireDefault(_MouseLocationIndicator);\n\nvar _HoverTextNearMouse = require(\"./components/HoverTextNearMouse\");\n\nvar _HoverTextNearMouse2 = _interopRequireDefault(_HoverTextNearMouse);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar StandardDeviationChannel = function (_Component) {\n  _inherits(StandardDeviationChannel, _Component);\n\n  function StandardDeviationChannel(props) {\n    _classCallCheck(this, StandardDeviationChannel);\n\n    var _this = _possibleConstructorReturn(this, (StandardDeviationChannel.__proto__ || Object.getPrototypeOf(StandardDeviationChannel)).call(this, props));\n\n    _this.handleStart = _this.handleStart.bind(_this);\n    _this.handleEnd = _this.handleEnd.bind(_this);\n    _this.handleDrawLine = _this.handleDrawLine.bind(_this);\n    _this.handleDragLine = _this.handleDragLine.bind(_this);\n    _this.handleDragLineComplete = _this.handleDragLineComplete.bind(_this);\n    _this.terminate = _utils2.terminate.bind(_this);\n    _this.saveNodeType = _utils2.saveNodeType.bind(_this);\n    _this.getSelectionState = (0, _utils2.isHoverForInteractiveType)(\"channels\").bind(_this);\n    _this.nodes = [];\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(StandardDeviationChannel, [{\n    key: \"handleDragLine\",\n    value: function handleDragLine(index, newXYValue) {\n      this.setState({\n        override: _extends({\n          index: index\n        }, newXYValue)\n      });\n    }\n  }, {\n    key: \"handleDragLineComplete\",\n    value: function handleDragLineComplete(moreProps) {\n      var _this2 = this;\n\n      var override = this.state.override;\n      var channels = this.props.channels;\n\n      if ((0, _utils.isDefined)(override)) {\n        var newChannels = channels.map(function (each, idx) {\n          return idx === override.index ? _extends({}, each, {\n            start: [override.x1Value, override.y1Value],\n            end: [override.x2Value, override.y2Value],\n            selected: true\n          }) : each;\n        });\n        this.setState({\n          override: null\n        }, function () {\n          _this2.props.onComplete(newChannels, moreProps);\n        });\n      }\n    }\n  }, {\n    key: \"handleDrawLine\",\n    value: function handleDrawLine(xyValue) {\n      var current = this.state.current;\n\n      if ((0, _utils.isDefined)(current) && (0, _utils.isDefined)(current.start)) {\n        this.mouseMoved = true;\n        this.setState({\n          current: {\n            start: current.start,\n            end: xyValue\n          }\n        });\n      }\n    }\n  }, {\n    key: \"handleStart\",\n    value: function handleStart(xyValue) {\n      var _this3 = this;\n\n      var current = this.state.current;\n\n      if ((0, _utils.isNotDefined)(current) || (0, _utils.isNotDefined)(current.start)) {\n        this.mouseMoved = false;\n        this.setState({\n          current: {\n            start: xyValue,\n            end: null\n          }\n        }, function () {\n          _this3.props.onStart();\n        });\n      }\n    }\n  }, {\n    key: \"handleEnd\",\n    value: function handleEnd(xyValue, moreProps, e) {\n      var _this4 = this;\n\n      var current = this.state.current;\n      var _props = this.props,\n          appearance = _props.appearance,\n          channels = _props.channels;\n\n      if (this.mouseMoved && (0, _utils.isDefined)(current) && (0, _utils.isDefined)(current.start)) {\n        var newChannels = [].concat(_toConsumableArray(channels.map(function (d) {\n          return _extends({}, d, {\n            selected: false\n          });\n        })), [{\n          start: current.start,\n          end: xyValue,\n          selected: true,\n          appearance: appearance\n        }]);\n        this.setState({\n          current: null\n        }, function () {\n          _this4.props.onComplete(newChannels, moreProps, e);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var appearance = this.props.appearance;\n      var _props2 = this.props,\n          enabled = _props2.enabled,\n          snapTo = _props2.snapTo;\n      var _props3 = this.props,\n          currentPositionRadius = _props3.currentPositionRadius,\n          currentPositionStroke = _props3.currentPositionStroke;\n      var _props4 = this.props,\n          currentPositionOpacity = _props4.currentPositionOpacity,\n          currentPositionStrokeWidth = _props4.currentPositionStrokeWidth;\n      var _props5 = this.props,\n          hoverText = _props5.hoverText,\n          channels = _props5.channels;\n      var _state = this.state,\n          current = _state.current,\n          override = _state.override;\n\n      var eachDefaultAppearance = _extends({}, StandardDeviationChannel.defaultProps.appearance, appearance);\n\n      var hoverTextDefault = _extends({}, StandardDeviationChannel.defaultProps.hoverText, hoverText);\n\n      var tempLine = (0, _utils.isDefined)(current) && (0, _utils.isDefined)(current.end) ? _react2.default.createElement(_EachLinearRegressionChannel2.default, {\n        interactive: false,\n        x1Value: current.start[0],\n        x2Value: current.end[0],\n        appearance: eachDefaultAppearance,\n        hoverText: hoverTextDefault\n      }) : null;\n      return _react2.default.createElement(\"g\", null, channels.map(function (each, idx) {\n        var eachAppearance = (0, _utils.isDefined)(each.appearance) ? _extends({}, eachDefaultAppearance, each.appearance) : eachDefaultAppearance;\n        var eachHoverText = (0, _utils.isDefined)(each.hoverText) ? _extends({}, hoverTextDefault, each.hoverText) : hoverTextDefault;\n        return _react2.default.createElement(_EachLinearRegressionChannel2.default, {\n          key: idx,\n          ref: _this5.saveNodeType(idx),\n          index: idx,\n          selected: each.selected,\n          x1Value: (0, _utils2.getValueFromOverride)(override, idx, \"x1Value\", each.start[0]),\n          x2Value: (0, _utils2.getValueFromOverride)(override, idx, \"x2Value\", each.end[0]),\n          appearance: eachAppearance,\n          snapTo: snapTo,\n          hoverText: eachHoverText,\n          onDrag: _this5.handleDragLine,\n          onDragComplete: _this5.handleDragLineComplete,\n          edgeInteractiveCursor: \"react-stockcharts-move-cursor\"\n        });\n      }), tempLine, _react2.default.createElement(_MouseLocationIndicator2.default, {\n        enabled: enabled,\n        snap: true,\n        snapTo: snapTo,\n        r: currentPositionRadius,\n        stroke: currentPositionStroke,\n        opacity: currentPositionOpacity,\n        strokeWidth: currentPositionStrokeWidth,\n        onMouseDown: this.handleStart,\n        onClick: this.handleEnd,\n        onMouseMove: this.handleDrawLine\n      }));\n    }\n  }]);\n\n  return StandardDeviationChannel;\n}(_react.Component);\n\nStandardDeviationChannel.propTypes = {\n  enabled: _propTypes2.default.bool.isRequired,\n  snapTo: _propTypes2.default.func,\n  onStart: _propTypes2.default.func,\n  onComplete: _propTypes2.default.func.isRequired,\n  onSelect: _propTypes2.default.func,\n  currentPositionStroke: _propTypes2.default.string,\n  currentPositionStrokeWidth: _propTypes2.default.number,\n  currentPositionOpacity: _propTypes2.default.number,\n  currentPositionRadius: _propTypes2.default.number,\n  appearance: _propTypes2.default.shape({\n    stroke: _propTypes2.default.string,\n    strokeOpacity: _propTypes2.default.number,\n    strokeWidth: _propTypes2.default.number,\n    fill: _propTypes2.default.string,\n    fillOpacity: _propTypes2.default.number,\n    edgeStrokeWidth: _propTypes2.default.number,\n    edgeStroke: _propTypes2.default.string,\n    edgeFill: _propTypes2.default.string,\n    r: _propTypes2.default.number\n  }).isRequired,\n  hoverText: _propTypes2.default.object,\n  channels: _propTypes2.default.array.isRequired\n};\nStandardDeviationChannel.defaultProps = {\n  snapTo: function snapTo(d) {\n    return d.close;\n  },\n  appearance: {\n    stroke: \"#000000\",\n    fillOpacity: 0.2,\n    strokeOpacity: 1,\n    strokeWidth: 1,\n    fill: \"#8AAFE2\",\n    edgeStrokeWidth: 2,\n    edgeStroke: \"#000000\",\n    edgeFill: \"#FFFFFF\",\n    r: 5\n  },\n  onStart: _utils.noop,\n  onComplete: _utils.noop,\n  onSelect: _utils.noop,\n  currentPositionStroke: \"#000000\",\n  currentPositionOpacity: 1,\n  currentPositionStrokeWidth: 3,\n  currentPositionRadius: 4,\n  hoverText: _extends({}, _HoverTextNearMouse2.default.defaultProps, {\n    enable: true,\n    bgHeight: \"auto\",\n    bgWidth: \"auto\",\n    text: \"Click and drag the edge circles\",\n    selectedText: \"\"\n  }),\n  channels: []\n};\nexports.default = StandardDeviationChannel;","map":{"version":3,"mappings":"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","names":["StandardDeviationChannel","props","_classCallCheck","_this","handleStart","bind","handleEnd","handleDrawLine","handleDragLine","handleDragLineComplete","terminate","_utils2","saveNodeType","getSelectionState","nodes","state","index","newXYValue","setState","override","moreProps","channels","newChannels","map","each","idx","start","x1Value","y1Value","end","x2Value","y2Value","selected","_this2","onComplete","xyValue","current","mouseMoved","_this3","onStart","e","appearance","d","_this4","enabled","snapTo","currentPositionRadius","currentPositionStroke","currentPositionOpacity","currentPositionStrokeWidth","hoverText","eachDefaultAppearance","defaultProps","hoverTextDefault","tempLine","_react2","interactive","eachAppearance","eachHoverText","key","ref","_this5","onDrag","onDragComplete","edgeInteractiveCursor","snap","r","stroke","opacity","strokeWidth","onMouseDown","onClick","onMouseMove","propTypes","_propTypes2","bool","isRequired","func","onSelect","string","number","shape","strokeOpacity","fill","fillOpacity","edgeStrokeWidth","edgeStroke","edgeFill","object","array","close","_HoverTextNearMouse2","enable","bgHeight","bgWidth","text","selectedText"],"sources":["../../../src/lib/interactive/StandardDeviationChannel.js"],"sourcesContent":["\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { isDefined, isNotDefined, noop } from \"../utils\";\n\nimport {\n\tgetValueFromOverride,\n\tterminate,\n\tsaveNodeType,\n\tisHoverForInteractiveType,\n} from \"./utils\";\n\nimport EachLinearRegressionChannel from \"./wrapper/EachLinearRegressionChannel\";\nimport MouseLocationIndicator from \"./components/MouseLocationIndicator\";\nimport HoverTextNearMouse from \"./components/HoverTextNearMouse\";\n\nclass StandardDeviationChannel extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.handleStart = this.handleStart.bind(this);\n\t\tthis.handleEnd = this.handleEnd.bind(this);\n\t\tthis.handleDrawLine = this.handleDrawLine.bind(this);\n\t\tthis.handleDragLine = this.handleDragLine.bind(this);\n\t\tthis.handleDragLineComplete = this.handleDragLineComplete.bind(this);\n\n\t\tthis.terminate = terminate.bind(this);\n\t\tthis.saveNodeType = saveNodeType.bind(this);\n\n\t\tthis.getSelectionState = isHoverForInteractiveType(\"channels\")\n\t\t\t.bind(this);\n\n\t\tthis.nodes = [];\n\t\tthis.state = {};\n\t}\n\thandleDragLine(index, newXYValue) {\n\t\tthis.setState({\n\t\t\toverride: {\n\t\t\t\tindex,\n\t\t\t\t...newXYValue\n\t\t\t}\n\t\t});\n\t}\n\thandleDragLineComplete(moreProps) {\n\t\tconst { override } = this.state;\n\t\tconst { channels } = this.props;\n\t\tif (isDefined(override)) {\n\n\t\t\tconst newChannels = channels\n\t\t\t\t.map((each, idx) => idx === override.index\n\t\t\t\t\t? {\n\t\t\t\t\t\t...each,\n\t\t\t\t\t\tstart: [override.x1Value, override.y1Value],\n\t\t\t\t\t\tend: [override.x2Value, override.y2Value],\n\t\t\t\t\t\tselected: true,\n\t\t\t\t\t}\n\t\t\t\t\t: each);\n\t\t\tthis.setState({\n\t\t\t\toverride: null,\n\t\t\t}, () => {\n\t\t\t\tthis.props.onComplete(newChannels, moreProps);\n\t\t\t});\n\t\t}\n\t}\n\thandleDrawLine(xyValue) {\n\t\tconst { current } = this.state;\n\n\t\tif (isDefined(current) && isDefined(current.start)) {\n\t\t\tthis.mouseMoved = true;\n\t\t\tthis.setState({\n\t\t\t\tcurrent: {\n\t\t\t\t\tstart: current.start,\n\t\t\t\t\tend: xyValue,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\thandleStart(xyValue) {\n\t\tconst { current } = this.state;\n\n\t\tif (isNotDefined(current) || isNotDefined(current.start)) {\n\t\t\tthis.mouseMoved = false;\n\n\t\t\tthis.setState({\n\t\t\t\tcurrent: {\n\t\t\t\t\tstart: xyValue,\n\t\t\t\t\tend: null,\n\t\t\t\t}\n\t\t\t}, () => {\n\t\t\t\tthis.props.onStart();\n\t\t\t});\n\t\t}\n\t}\n\thandleEnd(xyValue, moreProps, e) {\n\t\tconst { current } = this.state;\n\t\tconst { appearance, channels } = this.props;\n\n\t\tif (this.mouseMoved\n\t\t\t&& isDefined(current)\n\t\t\t&& isDefined(current.start)\n\t\t) {\n\t\t\tconst newChannels = [\n\t\t\t\t...channels.map(d => ({ ...d, selected: false })),\n\t\t\t\t{\n\t\t\t\t\tstart: current.start,\n\t\t\t\t\tend: xyValue,\n\t\t\t\t\tselected: true,\n\t\t\t\t\tappearance,\n\t\t\t\t}\n\t\t\t];\n\n\t\t\tthis.setState({\n\t\t\t\tcurrent: null,\n\t\t\t}, () => {\n\t\t\t\tthis.props.onComplete(newChannels, moreProps, e);\n\t\t\t});\n\t\t}\n\t}\n\trender() {\n\t\tconst { appearance } = this.props;\n\t\tconst { enabled, snapTo } = this.props;\n\t\tconst { currentPositionRadius, currentPositionStroke } = this.props;\n\t\tconst { currentPositionOpacity, currentPositionStrokeWidth } = this.props;\n\t\tconst { hoverText, channels } = this.props;\n\t\tconst { current, override } = this.state;\n\n\t\tconst eachDefaultAppearance = {\n\t\t\t...StandardDeviationChannel.defaultProps.appearance,\n\t\t\t...appearance\n\t\t};\n\n\t\tconst hoverTextDefault = {\n\t\t\t...StandardDeviationChannel.defaultProps.hoverText,\n\t\t\t...hoverText\n\t\t};\n\n\t\tconst tempLine = isDefined(current) && isDefined(current.end)\n\t\t\t? <EachLinearRegressionChannel\n\t\t\t\tinteractive={false}\n\t\t\t\tx1Value={current.start[0]}\n\t\t\t\tx2Value={current.end[0]}\n\t\t\t\tappearance={eachDefaultAppearance}\n\t\t\t\thoverText={hoverTextDefault}\n\t\t\t/>\n\t\t\t: null;\n\n\t\treturn <g>\n\t\t\t{channels.map((each, idx) => {\n\t\t\t\tconst eachAppearance = isDefined(each.appearance)\n\t\t\t\t\t? { ...eachDefaultAppearance, ...each.appearance }\n\t\t\t\t\t: eachDefaultAppearance;\n\n\t\t\t\tconst eachHoverText = isDefined(each.hoverText)\n\t\t\t\t\t? { ...hoverTextDefault, ...each.hoverText }\n\t\t\t\t\t: hoverTextDefault;\n\n\t\t\t\treturn <EachLinearRegressionChannel key={idx}\n\t\t\t\t\tref={this.saveNodeType(idx)}\n\t\t\t\t\tindex={idx}\n\t\t\t\t\tselected={each.selected}\n\n\t\t\t\t\tx1Value={getValueFromOverride(override, idx, \"x1Value\", each.start[0])}\n\t\t\t\t\tx2Value={getValueFromOverride(override, idx, \"x2Value\", each.end[0])}\n\n\t\t\t\t\tappearance={eachAppearance}\n\t\t\t\t\tsnapTo={snapTo}\n\t\t\t\t\thoverText={eachHoverText}\n\n\t\t\t\t\tonDrag={this.handleDragLine}\n\t\t\t\t\tonDragComplete={this.handleDragLineComplete}\n\t\t\t\t\tedgeInteractiveCursor=\"react-stockcharts-move-cursor\"\n\t\t\t\t/>;\n\t\t\t})}\n\t\t\t{tempLine}\n\t\t\t<MouseLocationIndicator\n\t\t\t\tenabled={enabled}\n\t\t\t\tsnap\n\t\t\t\tsnapTo={snapTo}\n\t\t\t\tr={currentPositionRadius}\n\t\t\t\tstroke={currentPositionStroke}\n\t\t\t\topacity={currentPositionOpacity}\n\t\t\t\tstrokeWidth={currentPositionStrokeWidth}\n\t\t\t\tonMouseDown={this.handleStart}\n\t\t\t\tonClick={this.handleEnd}\n\t\t\t\tonMouseMove={this.handleDrawLine}\n\t\t\t/>\n\t\t</g>;\n\t}\n}\n\nStandardDeviationChannel.propTypes = {\n\tenabled: PropTypes.bool.isRequired,\n\tsnapTo: PropTypes.func,\n\n\tonStart: PropTypes.func,\n\tonComplete: PropTypes.func.isRequired,\n\tonSelect: PropTypes.func,\n\n\tcurrentPositionStroke: PropTypes.string,\n\tcurrentPositionStrokeWidth: PropTypes.number,\n\tcurrentPositionOpacity: PropTypes.number,\n\tcurrentPositionRadius: PropTypes.number,\n\n\tappearance: PropTypes.shape({\n\t\tstroke: PropTypes.string,\n\t\tstrokeOpacity: PropTypes.number,\n\t\tstrokeWidth: PropTypes.number,\n\t\tfill: PropTypes.string,\n\t\tfillOpacity: PropTypes.number,\n\t\tedgeStrokeWidth: PropTypes.number,\n\t\tedgeStroke: PropTypes.string,\n\t\tedgeFill: PropTypes.string,\n\t\tr: PropTypes.number,\n\t}).isRequired,\n\n\thoverText: PropTypes.object,\n\tchannels: PropTypes.array.isRequired,\n};\n\nStandardDeviationChannel.defaultProps = {\n\tsnapTo: d => d.close,\n\tappearance: {\n\t\tstroke: \"#000000\",\n\t\tfillOpacity: 0.2,\n\t\tstrokeOpacity: 1,\n\t\tstrokeWidth: 1,\n\t\tfill: \"#8AAFE2\",\n\t\tedgeStrokeWidth: 2,\n\t\tedgeStroke: \"#000000\",\n\t\tedgeFill: \"#FFFFFF\",\n\t\tr: 5,\n\t},\n\n\tonStart: noop,\n\tonComplete: noop,\n\tonSelect: noop,\n\n\tcurrentPositionStroke: \"#000000\",\n\tcurrentPositionOpacity: 1,\n\tcurrentPositionStrokeWidth: 3,\n\tcurrentPositionRadius: 4,\n\n\thoverText: {\n\t\t...HoverTextNearMouse.defaultProps,\n\t\tenable: true,\n\t\tbgHeight: \"auto\",\n\t\tbgWidth: \"auto\",\n\t\ttext: \"Click and drag the edge circles\",\n\t\tselectedText: \"\"\n\t},\n\tchannels: [],\n};\n\nexport default StandardDeviationChannel;\n"]},"metadata":{},"sourceType":"script"}