{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require(\"../utils\");\n\nvar _utils2 = require(\"./utils\");\n\nvar _EachGannFan = require(\"./wrapper/EachGannFan\");\n\nvar _EachGannFan2 = _interopRequireDefault(_EachGannFan);\n\nvar _MouseLocationIndicator = require(\"./components/MouseLocationIndicator\");\n\nvar _MouseLocationIndicator2 = _interopRequireDefault(_MouseLocationIndicator);\n\nvar _HoverTextNearMouse = require(\"./components/HoverTextNearMouse\");\n\nvar _HoverTextNearMouse2 = _interopRequireDefault(_HoverTextNearMouse);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar GannFan = function (_Component) {\n  _inherits(GannFan, _Component);\n\n  function GannFan(props) {\n    _classCallCheck(this, GannFan);\n\n    var _this = _possibleConstructorReturn(this, (GannFan.__proto__ || Object.getPrototypeOf(GannFan)).call(this, props));\n\n    _this.handleStart = _this.handleStart.bind(_this);\n    _this.handleEnd = _this.handleEnd.bind(_this);\n    _this.handleDrawFan = _this.handleDrawFan.bind(_this);\n    _this.handleDragFan = _this.handleDragFan.bind(_this);\n    _this.handleDragFanComplete = _this.handleDragFanComplete.bind(_this);\n    _this.terminate = _utils2.terminate.bind(_this);\n    _this.saveNodeType = _utils2.saveNodeType.bind(_this);\n    _this.getSelectionState = (0, _utils2.isHoverForInteractiveType)(\"fans\").bind(_this);\n    _this.nodes = [];\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(GannFan, [{\n    key: \"handleDragFan\",\n    value: function handleDragFan(index, newXYValue) {\n      this.setState({\n        override: _extends({\n          index: index\n        }, newXYValue)\n      });\n    }\n  }, {\n    key: \"handleDragFanComplete\",\n    value: function handleDragFanComplete(moreProps) {\n      var _this2 = this;\n\n      var override = this.state.override;\n      var fans = this.props.fans;\n\n      if ((0, _utils.isDefined)(override)) {\n        var index = override.index,\n            rest = _objectWithoutProperties(override, [\"index\"]);\n\n        var newfans = fans.map(function (each, idx) {\n          return idx === index ? _extends({}, each, rest, {\n            selected: true\n          }) : each;\n        });\n        this.setState({\n          override: null\n        }, function () {\n          _this2.props.onComplete(newfans, moreProps);\n        });\n      }\n    }\n  }, {\n    key: \"handleDrawFan\",\n    value: function handleDrawFan(xyValue) {\n      var current = this.state.current;\n\n      if ((0, _utils.isDefined)(current) && (0, _utils.isDefined)(current.startXY)) {\n        this.mouseMoved = true;\n        this.setState({\n          current: {\n            startXY: current.startXY,\n            endXY: xyValue\n          }\n        });\n      }\n    }\n  }, {\n    key: \"handleStart\",\n    value: function handleStart(xyValue) {\n      var _this3 = this;\n\n      var current = this.state.current;\n\n      if ((0, _utils.isNotDefined)(current) || (0, _utils.isNotDefined)(current.startXY)) {\n        this.mouseMoved = false;\n        this.setState({\n          current: {\n            startXY: xyValue,\n            endXY: null\n          }\n        }, function () {\n          _this3.props.onStart();\n        });\n      }\n    }\n  }, {\n    key: \"handleEnd\",\n    value: function handleEnd(xyValyue, moreProps, e) {\n      var _this4 = this;\n\n      var current = this.state.current;\n      var _props = this.props,\n          fans = _props.fans,\n          appearance = _props.appearance;\n\n      if (this.mouseMoved && (0, _utils.isDefined)(current) && (0, _utils.isDefined)(current.startXY)) {\n        var newfans = [].concat(_toConsumableArray(fans.map(function (d) {\n          return _extends({}, d, {\n            selected: false\n          });\n        })), [_extends({}, current, {\n          selected: true,\n          appearance: appearance\n        })]);\n        this.setState({\n          current: null\n        }, function () {\n          _this4.props.onComplete(newfans, moreProps, e);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var _props2 = this.props,\n          enabled = _props2.enabled,\n          appearance = _props2.appearance;\n      var _props3 = this.props,\n          currentPositionRadius = _props3.currentPositionRadius,\n          currentPositionStroke = _props3.currentPositionStroke;\n      var _props4 = this.props,\n          currentPositionOpacity = _props4.currentPositionOpacity,\n          currentPositionStrokeWidth = _props4.currentPositionStrokeWidth;\n      var _props5 = this.props,\n          hoverText = _props5.hoverText,\n          fans = _props5.fans;\n      var _state = this.state,\n          current = _state.current,\n          override = _state.override;\n      var overrideIndex = (0, _utils.isDefined)(override) ? override.index : null;\n      var tempChannel = (0, _utils.isDefined)(current) && (0, _utils.isDefined)(current.endXY) ? _react2.default.createElement(_EachGannFan2.default, _extends({\n        interactive: false\n      }, current, {\n        appearance: appearance,\n        hoverText: hoverText\n      })) : null;\n      return _react2.default.createElement(\"g\", null, fans.map(function (each, idx) {\n        var eachAppearance = (0, _utils.isDefined)(each.appearance) ? _extends({}, appearance, each.appearance) : appearance;\n        return _react2.default.createElement(_EachGannFan2.default, _extends({\n          key: idx,\n          ref: _this5.saveNodeType(idx),\n          index: idx,\n          selected: each.selected\n        }, idx === overrideIndex ? override : each, {\n          appearance: eachAppearance,\n          hoverText: hoverText,\n          onDrag: _this5.handleDragFan,\n          onDragComplete: _this5.handleDragFanComplete\n        }));\n      }), tempChannel, _react2.default.createElement(_MouseLocationIndicator2.default, {\n        enabled: enabled,\n        snap: false,\n        r: currentPositionRadius,\n        stroke: currentPositionStroke,\n        opacity: currentPositionOpacity,\n        strokeWidth: currentPositionStrokeWidth,\n        onMouseDown: this.handleStart,\n        onClick: this.handleEnd,\n        onMouseMove: this.handleDrawFan\n      }));\n    }\n  }]);\n\n  return GannFan;\n}(_react.Component);\n\nGannFan.propTypes = {\n  enabled: _propTypes2.default.bool.isRequired,\n  onStart: _propTypes2.default.func.isRequired,\n  onComplete: _propTypes2.default.func.isRequired,\n  onSelect: _propTypes2.default.func,\n  currentPositionStroke: _propTypes2.default.string,\n  currentPositionStrokeWidth: _propTypes2.default.number,\n  currentPositionOpacity: _propTypes2.default.number,\n  currentPositionRadius: _propTypes2.default.number,\n  appearance: _propTypes2.default.shape({\n    stroke: _propTypes2.default.string.isRequired,\n    strokeOpacity: _propTypes2.default.number.isRequired,\n    fillOpacity: _propTypes2.default.number.isRequired,\n    strokeWidth: _propTypes2.default.number.isRequired,\n    edgeStroke: _propTypes2.default.string.isRequired,\n    edgeFill: _propTypes2.default.string.isRequired,\n    edgeStrokeWidth: _propTypes2.default.number.isRequired,\n    r: _propTypes2.default.number.isRequired,\n    fill: _propTypes2.default.arrayOf(_propTypes2.default.string).isRequired,\n    fontFamily: _propTypes2.default.string.isRequired,\n    fontSize: _propTypes2.default.number.isRequired,\n    fontFill: _propTypes2.default.string.isRequired\n  }).isRequired,\n  hoverText: _propTypes2.default.object.isRequired,\n  fans: _propTypes2.default.array.isRequired\n};\nGannFan.defaultProps = {\n  appearance: {\n    stroke: \"#000000\",\n    fillOpacity: 0.2,\n    strokeOpacity: 1,\n    strokeWidth: 1,\n    edgeStroke: \"#000000\",\n    edgeFill: \"#FFFFFF\",\n    edgeStrokeWidth: 1,\n    r: 5,\n    fill: [\"#e41a1c\", \"#377eb8\", \"#4daf4a\", \"#984ea3\", \"#ff7f00\", \"#ffff33\", \"#a65628\", \"#f781bf\"],\n    fontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n    fontSize: 12,\n    fontFill: \"#000000\"\n  },\n  onStart: _utils.noop,\n  onComplete: _utils.noop,\n  onSelect: _utils.noop,\n  currentPositionStroke: \"#000000\",\n  currentPositionOpacity: 1,\n  currentPositionStrokeWidth: 3,\n  currentPositionRadius: 4,\n  hoverText: _extends({}, _HoverTextNearMouse2.default.defaultProps, {\n    enable: true,\n    bgHeight: 18,\n    bgWidth: 120,\n    text: \"Click to select object\"\n  }),\n  fans: []\n};\nexports.default = GannFan;","map":{"version":3,"sources":["../../../src/lib/interactive/GannFan.js"],"names":["GannFan","index","newXYValue","override","moreProps","fans","rest","newfans","idx","selected","xyValue","current","startXY","endXY","xyValyue","e","appearance","enabled","currentPositionRadius","currentPositionStroke","currentPositionOpacity","currentPositionStrokeWidth","hoverText","overrideIndex","tempChannel","eachAppearance","each","handleDragFanComplete","handleDrawFan","onStart","onComplete","onSelect","stroke","strokeOpacity","fillOpacity","strokeWidth","edgeStroke","edgeFill","edgeStrokeWidth","r","fill","fontFamily","fontSize","fontFill","isRequired","enable","bgHeight","bgWidth","text"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAA,MAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;;;AACA,IAAA,UAAA,GAAA,OAAA,CAAA,YAAA,CAAA;;;;AAEA,IAAA,MAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,IAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AAKA,IAAA,YAAA,GAAA,OAAA,CAAA,uBAAA,CAAA;;;;AACA,IAAA,uBAAA,GAAA,OAAA,CAAA,qCAAA,CAAA;;;;AACA,IAAA,mBAAA,GAAA,OAAA,CAAA,iCAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEMA,O;;;AACL,WAAA,OAAA,CAAA,KAAA,EAAmB;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,OAAA,CAAA;;AAAA,QAAA,KAAA,GAAA,0BAAA,CAAA,IAAA,EAAA,CAAA,OAAA,CAAA,SAAA,IAAA,MAAA,CAAA,cAAA,CAAA,OAAA,CAAA,EAAA,IAAA,CAAA,IAAA,EAAA,KAAA,CAAA,CAAA;;AAGlB,IAAA,KAAA,CAAA,WAAA,GAAmB,KAAA,CAAA,WAAA,CAAA,IAAA,CAAnB,KAAmB,CAAnB;AACA,IAAA,KAAA,CAAA,SAAA,GAAiB,KAAA,CAAA,SAAA,CAAA,IAAA,CAAjB,KAAiB,CAAjB;AACA,IAAA,KAAA,CAAA,aAAA,GAAqB,KAAA,CAAA,aAAA,CAAA,IAAA,CAArB,KAAqB,CAArB;AACA,IAAA,KAAA,CAAA,aAAA,GAAqB,KAAA,CAAA,aAAA,CAAA,IAAA,CAArB,KAAqB,CAArB;AACA,IAAA,KAAA,CAAA,qBAAA,GAA6B,KAAA,CAAA,qBAAA,CAAA,IAAA,CAA7B,KAA6B,CAA7B;AAEA,IAAA,KAAA,CAAA,SAAA,GAAiB,OAAA,CAAA,SAAA,CAAA,IAAA,CAAjB,KAAiB,CAAjB;AACA,IAAA,KAAA,CAAA,YAAA,GAAoB,OAAA,CAAA,YAAA,CAAA,IAAA,CAApB,KAAoB,CAApB;AAEA,IAAA,KAAA,CAAA,iBAAA,GAAyB,CAAA,GAAA,OAAA,CAAA,yBAAA,EAAA,MAAA,EAAA,IAAA,CAAzB,KAAyB,CAAzB;AAGA,IAAA,KAAA,CAAA,KAAA,GAAA,EAAA;AACA,IAAA,KAAA,CAAA,KAAA,GAAA,EAAA;AAhBkB,WAAA,KAAA;AAiBlB;;;;kCACaC,K,EAAOC,U,EAAY;AAChC,WAAA,QAAA,CAAc;AACbC,QAAAA,QAAAA,EAAAA,QAAAA,CAAAA;AACCF,UAAAA,KAAAA,EAAAA;AADDE,SAAAA,EAAAA,UAAAA;AADa,OAAd;AAMA;;;0CACqBC,S,EAAW;AAAA,UAAA,MAAA,GAAA,IAAA;;AAAA,UACxBD,QADwB,GACX,KADW,KACX,CADW,QAAA;AAAA,UAExBE,IAFwB,GAEf,KAFe,KAEf,CAFe,IAAA;;AAIhC,UAAI,CAAA,GAAA,MAAA,CAAA,SAAA,EAAJ,QAAI,CAAJ,EAAyB;AAAA,YAChBJ,KADgB,GACGE,QADH,CAAA,KAAA;AAAA,YACNG,IADM,GAAA,wBAAA,CAAA,QAAA,EAAA,CAAA,OAAA,CAAA,CAAA;;AAExB,YAAMC,OAAAA,GAAU,IAAA,CAAA,GAAA,CACV,UAAA,IAAA,EAAA,GAAA,EAAA;AAAA,iBAAeC,GAAAA,KAAAA,KAAAA,GAAAA,QAAAA,CAAAA,EAAAA,EAAAA,IAAAA,EAAAA,IAAAA,EAAAA;AACGC,YAAAA,QAAAA,EADHD;AAAAA,WAAAA,CAAAA,GAAf,IAAA;AADN,SAAgB,CAAhB;AAIA,aAAA,QAAA,CAAc;AACbL,UAAAA,QAAAA,EAAU;AADG,SAAd,EAEG,YAAM;AACR,UAAA,MAAA,CAAA,KAAA,CAAA,UAAA,CAAA,OAAA,EAAA,SAAA;AAHD,SAAA;AAKA;AACD;;;kCACaO,O,EAAS;AAAA,UACdC,OADc,GACF,KADE,KACF,CADE,OAAA;;AAGtB,UAAI,CAAA,GAAA,MAAA,CAAA,SAAA,EAAA,OAAA,KAAsB,CAAA,GAAA,MAAA,CAAA,SAAA,EAAUA,OAAAA,CAApC,OAA0B,CAA1B,EAAsD;AACrD,aAAA,UAAA,GAAA,IAAA;AAEA,aAAA,QAAA,CAAc;AACbA,UAAAA,OAAAA,EAAS;AACRC,YAAAA,OAAAA,EAASD,OAAAA,CADD,OAAA;AAERE,YAAAA,KAAAA,EAAOH;AAFC;AADI,SAAd;AAMA;AACD;;;gCACWA,O,EAAS;AAAA,UAAA,MAAA,GAAA,IAAA;;AAAA,UACZC,OADY,GACA,KADA,KACA,CADA,OAAA;;AAGpB,UAAI,CAAA,GAAA,MAAA,CAAA,YAAA,EAAA,OAAA,KAAyB,CAAA,GAAA,MAAA,CAAA,YAAA,EAAaA,OAAAA,CAA1C,OAA6B,CAA7B,EAA4D;AAC3D,aAAA,UAAA,GAAA,KAAA;AAEA,aAAA,QAAA,CAAc;AACbA,UAAAA,OAAAA,EAAS;AACRC,YAAAA,OAAAA,EADQ,OAAA;AAERC,YAAAA,KAAAA,EAAO;AAFC;AADI,SAAd,EAKG,YAAM;AACR,UAAA,MAAA,CAAA,KAAA,CAAA,OAAA;AAND,SAAA;AAQA;AACD;;;8BACSC,Q,EAAUV,S,EAAWW,C,EAAG;AAAA,UAAA,MAAA,GAAA,IAAA;;AAAA,UACzBJ,OADyB,GACb,KADa,KACb,CADa,OAAA;AAAA,UAAA,MAAA,GAEJ,KAFI,KAAA;AAAA,UAEzBN,IAFyB,GAAA,MAAA,CAAA,IAAA;AAAA,UAEnBW,UAFmB,GAAA,MAAA,CAAA,UAAA;;AAIjC,UAAI,KAAA,UAAA,IACA,CAAA,GAAA,MAAA,CAAA,SAAA,EADA,OACA,CADA,IAEA,CAAA,GAAA,MAAA,CAAA,SAAA,EAAUL,OAAAA,CAFd,OAEI,CAFJ,EAGE;AACD,YAAM,OAAA,GAAA,GAAA,MAAA,CAAA,kBAAA,CACF,IAAA,CAAA,GAAA,CAAS,UAAA,CAAA,EAAA;AAAA,iBAAA,QAAA,CAAA,EAAA,EAAA,CAAA,EAAA;AAAcF,YAAAA,QAAAA,EAAd;AAAA,WAAA,CAAA;AADP,SACF,CADE,CAAA,EAAA,CAAA,QAAA,CAAA,EAAA,EAAA,OAAA,EAAA;AAESA,UAAAA,QAAAA,EAFT,IAAA;AAEyBO,UAAAA,UAAAA,EAF/B;AAAM,SAAA,CAAA,CAAA,CAAN;AAIA,aAAA,QAAA,CAAc;AACbL,UAAAA,OAAAA,EAAS;AADI,SAAd,EAEG,YAAM;AACR,UAAA,MAAA,CAAA,KAAA,CAAA,UAAA,CAAA,OAAA,EAAA,SAAA,EAAA,CAAA;AAHD,SAAA;AAKA;AACD;;;6BACQ;AAAA,UAAA,MAAA,GAAA,IAAA;;AAAA,UAAA,OAAA,GACwB,KADxB,KAAA;AAAA,UACAM,OADA,GAAA,OAAA,CAAA,OAAA;AAAA,UACSD,UADT,GAAA,OAAA,CAAA,UAAA;AAAA,UAAA,OAAA,GAEiD,KAFjD,KAAA;AAAA,UAEAE,qBAFA,GAAA,OAAA,CAAA,qBAAA;AAAA,UAEuBC,qBAFvB,GAAA,OAAA,CAAA,qBAAA;AAAA,UAAA,OAAA,GAGuD,KAHvD,KAAA;AAAA,UAGAC,sBAHA,GAAA,OAAA,CAAA,sBAAA;AAAA,UAGwBC,0BAHxB,GAAA,OAAA,CAAA,0BAAA;AAAA,UAAA,OAAA,GAIoB,KAJpB,KAAA;AAAA,UAIAC,SAJA,GAAA,OAAA,CAAA,SAAA;AAAA,UAIWjB,IAJX,GAAA,OAAA,CAAA,IAAA;AAAA,UAAA,MAAA,GAKsB,KALtB,KAAA;AAAA,UAKAM,OALA,GAAA,MAAA,CAAA,OAAA;AAAA,UAKSR,QALT,GAAA,MAAA,CAAA,QAAA;AAMR,UAAMoB,aAAAA,GAAgB,CAAA,GAAA,MAAA,CAAA,SAAA,EAAA,QAAA,IAAsBpB,QAAAA,CAAtB,KAAA,GAAtB,IAAA;AAEA,UAAMqB,WAAAA,GAAc,CAAA,GAAA,MAAA,CAAA,SAAA,EAAA,OAAA,KAAsB,CAAA,GAAA,MAAA,CAAA,SAAA,EAAUb,OAAAA,CAAhC,KAAsB,CAAtB,GACjB,OAAA,CAAA,OAAA,CAAA,aAAA,CAAA,aAAA,CAAA,OAAA,EAAA,QAAA,CAAA;AACD,QAAA,WAAA,EAAa;AADZ,OAAA,EAAA,OAAA,EAAA;AAGD,QAAA,UAAA,EAHC,UAAA;AAID,QAAA,SAAA,EAAWW;AAJV,OAAA,CAAA,CADiB,GAApB,IAAA;AASA,aAAO,OAAA,CAAA,OAAA,CAAA,aAAA,CAAA,GAAA,EAAA,IAAA,EACLjB,IAAAA,CAAAA,GAAAA,CAAS,UAAA,IAAA,EAAA,GAAA,EAAe;AACxB,YAAMoB,cAAAA,GAAiB,CAAA,GAAA,MAAA,CAAA,SAAA,EAAUC,IAAAA,CAAV,UAAA,IAAA,QAAA,CAAA,EAAA,EAAA,UAAA,EACAA,IAAAA,CADA,UAAA,CAAA,GAAvB,UAAA;AAIA,eAAO,OAAA,CAAA,OAAA,CAAA,aAAA,CAAA,aAAA,CAAA,OAAA,EAAA,QAAA,CAAA;AAAa,UAAA,GAAA,EAAb,GAAA;AACN,UAAA,GAAA,EAAK,MAAA,CAAA,YAAA,CADC,GACD,CADC;AAEN,UAAA,KAAA,EAFM,GAAA;AAGN,UAAA,QAAA,EAAUA,IAAAA,CAAKjB;AAHT,SAAA,EAIDD,GAAAA,KAAAA,aAAAA,GAAAA,QAAAA,GAJC,IAAA,EAAA;AAKN,UAAA,UAAA,EALM,cAAA;AAMN,UAAA,SAAA,EANM,SAAA;AAON,UAAA,MAAA,EAAQ,MAAA,CAPF,aAAA;AAQN,UAAA,cAAA,EAAgB,MAAA,CAAKmB;AARf,SAAA,CAAA,CAAP;AANK,OACLtB,CADK,EAAA,WAAA,EAkBN,OAAA,CAAA,OAAA,CAAA,aAAA,CAAA,wBAAA,CAAA,OAAA,EAAA;AACC,QAAA,OAAA,EADD,OAAA;AAEC,QAAA,IAAA,EAFD,KAAA;AAGC,QAAA,CAAA,EAHD,qBAAA;AAIC,QAAA,MAAA,EAJD,qBAAA;AAKC,QAAA,OAAA,EALD,sBAAA;AAMC,QAAA,WAAA,EAND,0BAAA;AAOC,QAAA,WAAA,EAAa,KAPd,WAAA;AAQC,QAAA,OAAA,EAAS,KARV,SAAA;AASC,QAAA,WAAA,EAAa,KAAKuB;AATnB,OAAA,CAlBM,CAAP;AA8BA;;;;;;AAIF5B,OAAAA,CAAAA,SAAAA,GAAoB;AACnBiB,EAAAA,OAAAA,EAAS,WAAA,CAAA,OAAA,CAAA,IAAA,CADU,UAAA;AAGnBY,EAAAA,OAAAA,EAAS,WAAA,CAAA,OAAA,CAAA,IAAA,CAHU,UAAA;AAInBC,EAAAA,UAAAA,EAAY,WAAA,CAAA,OAAA,CAAA,IAAA,CAJO,UAAA;AAKnBC,EAAAA,QAAAA,EAAU,WAAA,CAAA,OAAA,CALS,IAAA;AAOnBZ,EAAAA,qBAAAA,EAAuB,WAAA,CAAA,OAAA,CAPJ,MAAA;AAQnBE,EAAAA,0BAAAA,EAA4B,WAAA,CAAA,OAAA,CART,MAAA;AASnBD,EAAAA,sBAAAA,EAAwB,WAAA,CAAA,OAAA,CATL,MAAA;AAUnBF,EAAAA,qBAAAA,EAAuB,WAAA,CAAA,OAAA,CAVJ,MAAA;AAYnBF,EAAAA,UAAAA,EAAY,WAAA,CAAA,OAAA,CAAA,KAAA,CAAgB;AAC3BgB,IAAAA,MAAAA,EAAQ,WAAA,CAAA,OAAA,CAAA,MAAA,CADmB,UAAA;AAE3BC,IAAAA,aAAAA,EAAe,WAAA,CAAA,OAAA,CAAA,MAAA,CAFY,UAAA;AAG3BC,IAAAA,WAAAA,EAAa,WAAA,CAAA,OAAA,CAAA,MAAA,CAHc,UAAA;AAI3BC,IAAAA,WAAAA,EAAa,WAAA,CAAA,OAAA,CAAA,MAAA,CAJc,UAAA;AAK3BC,IAAAA,UAAAA,EAAY,WAAA,CAAA,OAAA,CAAA,MAAA,CALe,UAAA;AAM3BC,IAAAA,QAAAA,EAAU,WAAA,CAAA,OAAA,CAAA,MAAA,CANiB,UAAA;AAO3BC,IAAAA,eAAAA,EAAiB,WAAA,CAAA,OAAA,CAAA,MAAA,CAPU,UAAA;AAQ3BC,IAAAA,CAAAA,EAAG,WAAA,CAAA,OAAA,CAAA,MAAA,CARwB,UAAA;AAS3BC,IAAAA,IAAAA,EAAM,WAAA,CAAA,OAAA,CAAA,OAAA,CAAkB,WAAA,CAAA,OAAA,CAAlB,MAAA,EATqB,UAAA;AAU3BC,IAAAA,UAAAA,EAAY,WAAA,CAAA,OAAA,CAAA,MAAA,CAVe,UAAA;AAW3BC,IAAAA,QAAAA,EAAU,WAAA,CAAA,OAAA,CAAA,MAAA,CAXiB,UAAA;AAY3BC,IAAAA,QAAAA,EAAU,WAAA,CAAA,OAAA,CAAA,MAAA,CAAiBC;AAZA,GAAhB,EAZO,UAAA;AA0BnBtB,EAAAA,SAAAA,EAAW,WAAA,CAAA,OAAA,CAAA,MAAA,CA1BQ,UAAA;AA4BnBjB,EAAAA,IAAAA,EAAM,WAAA,CAAA,OAAA,CAAA,KAAA,CAAgBuC;AA5BH,CAApB5C;AA+BAA,OAAAA,CAAAA,YAAAA,GAAuB;AACtBgB,EAAAA,UAAAA,EAAY;AACXgB,IAAAA,MAAAA,EADW,SAAA;AAEXE,IAAAA,WAAAA,EAFW,GAAA;AAGXD,IAAAA,aAAAA,EAHW,CAAA;AAIXE,IAAAA,WAAAA,EAJW,CAAA;AAKXC,IAAAA,UAAAA,EALW,SAAA;AAMXC,IAAAA,QAAAA,EANW,SAAA;AAOXC,IAAAA,eAAAA,EAPW,CAAA;AAQXC,IAAAA,CAAAA,EARW,CAAA;AASXC,IAAAA,IAAAA,EAAM,CAAA,SAAA,EAAA,SAAA,EAAA,SAAA,EAAA,SAAA,EAAA,SAAA,EAAA,SAAA,EAAA,SAAA,EATK,SASL,CATK;AAmBXC,IAAAA,UAAAA,EAnBW,8CAAA;AAoBXC,IAAAA,QAAAA,EApBW,EAAA;AAqBXC,IAAAA,QAAAA,EAAU;AArBC,GADU;AAyBtBd,EAAAA,OAAAA,EAAAA,MAAAA,CAzBsB,IAAA;AA0BtBC,EAAAA,UAAAA,EAAAA,MAAAA,CA1BsB,IAAA;AA2BtBC,EAAAA,QAAAA,EAAAA,MAAAA,CA3BsB,IAAA;AA6BtBZ,EAAAA,qBAAAA,EA7BsB,SAAA;AA8BtBC,EAAAA,sBAAAA,EA9BsB,CAAA;AA+BtBC,EAAAA,0BAAAA,EA/BsB,CAAA;AAgCtBH,EAAAA,qBAAAA,EAhCsB,CAAA;AAkCtBI,EAAAA,SAAAA,EAAAA,QAAAA,CAAAA,EAAAA,EACI,oBAAA,CAAA,OAAA,CADJA,YAAAA,EAAAA;AAECuB,IAAAA,MAAAA,EAFDvB,IAAAA;AAGCwB,IAAAA,QAAAA,EAHDxB,EAAAA;AAICyB,IAAAA,OAAAA,EAJDzB,GAAAA;AAKC0B,IAAAA,IAAAA,EAAM;AALP1B,GAAAA,CAlCsB;AAyCtBjB,EAAAA,IAAAA,EAAM;AAzCgB,CAAvBL;kBA4CeA,O","sourcesContent":["\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { isDefined, isNotDefined, noop } from \"../utils\";\nimport {\n\tterminate,\n\tsaveNodeType,\n\tisHoverForInteractiveType,\n} from \"./utils\";\nimport EachGannFan from \"./wrapper/EachGannFan\";\nimport MouseLocationIndicator from \"./components/MouseLocationIndicator\";\nimport HoverTextNearMouse from \"./components/HoverTextNearMouse\";\n\nclass GannFan extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.handleStart = this.handleStart.bind(this);\n\t\tthis.handleEnd = this.handleEnd.bind(this);\n\t\tthis.handleDrawFan = this.handleDrawFan.bind(this);\n\t\tthis.handleDragFan = this.handleDragFan.bind(this);\n\t\tthis.handleDragFanComplete = this.handleDragFanComplete.bind(this);\n\n\t\tthis.terminate = terminate.bind(this);\n\t\tthis.saveNodeType = saveNodeType.bind(this);\n\n\t\tthis.getSelectionState = isHoverForInteractiveType(\"fans\")\n\t\t\t.bind(this);\n\n\t\tthis.nodes = [];\n\t\tthis.state = {};\n\t}\n\thandleDragFan(index, newXYValue) {\n\t\tthis.setState({\n\t\t\toverride: {\n\t\t\t\tindex,\n\t\t\t\t...newXYValue\n\t\t\t}\n\t\t});\n\t}\n\thandleDragFanComplete(moreProps) {\n\t\tconst { override } = this.state;\n\t\tconst { fans } = this.props;\n\n\t\tif (isDefined(override)) {\n\t\t\tconst { index, ...rest } = override;\n\t\t\tconst newfans = fans\n\t\t\t\t.map((each, idx) => idx === index\n\t\t\t\t\t? { ...each, ...rest, selected: true }\n\t\t\t\t\t: each);\n\t\t\tthis.setState({\n\t\t\t\toverride: null,\n\t\t\t}, () => {\n\t\t\t\tthis.props.onComplete(newfans, moreProps);\n\t\t\t});\n\t\t}\n\t}\n\thandleDrawFan(xyValue) {\n\t\tconst { current } = this.state;\n\n\t\tif (isDefined(current) && isDefined(current.startXY)) {\n\t\t\tthis.mouseMoved = true;\n\n\t\t\tthis.setState({\n\t\t\t\tcurrent: {\n\t\t\t\t\tstartXY: current.startXY,\n\t\t\t\t\tendXY: xyValue,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\thandleStart(xyValue) {\n\t\tconst { current } = this.state;\n\n\t\tif (isNotDefined(current) || isNotDefined(current.startXY)) {\n\t\t\tthis.mouseMoved = false;\n\n\t\t\tthis.setState({\n\t\t\t\tcurrent: {\n\t\t\t\t\tstartXY: xyValue,\n\t\t\t\t\tendXY: null,\n\t\t\t\t}\n\t\t\t}, () => {\n\t\t\t\tthis.props.onStart();\n\t\t\t});\n\t\t}\n\t}\n\thandleEnd(xyValyue, moreProps, e) {\n\t\tconst { current } = this.state;\n\t\tconst { fans, appearance } = this.props;\n\n\t\tif (this.mouseMoved\n\t\t\t&& isDefined(current)\n\t\t\t&& isDefined(current.startXY)\n\t\t) {\n\t\t\tconst newfans = [\n\t\t\t\t...fans.map(d => ({ ...d, selected: false })),\n\t\t\t\t{ ...current, selected: true, appearance }\n\t\t\t];\n\t\t\tthis.setState({\n\t\t\t\tcurrent: null,\n\t\t\t}, () => {\n\t\t\t\tthis.props.onComplete(newfans, moreProps, e);\n\t\t\t});\n\t\t}\n\t}\n\trender() {\n\t\tconst { enabled, appearance } = this.props;\n\t\tconst { currentPositionRadius, currentPositionStroke } = this.props;\n\t\tconst { currentPositionOpacity, currentPositionStrokeWidth } = this.props;\n\t\tconst { hoverText, fans } = this.props;\n\t\tconst { current, override } = this.state;\n\t\tconst overrideIndex = isDefined(override) ? override.index : null;\n\n\t\tconst tempChannel = isDefined(current) && isDefined(current.endXY)\n\t\t\t? <EachGannFan\n\t\t\t\tinteractive={false}\n\t\t\t\t{...current}\n\t\t\t\tappearance={appearance}\n\t\t\t\thoverText={hoverText}\n\t\t\t/>\n\t\t\t: null;\n\n\t\treturn <g>\n\t\t\t{fans.map((each, idx) => {\n\t\t\t\tconst eachAppearance = isDefined(each.appearance)\n\t\t\t\t\t? { ...appearance, ...each.appearance }\n\t\t\t\t\t: appearance;\n\n\t\t\t\treturn <EachGannFan key={idx}\n\t\t\t\t\tref={this.saveNodeType(idx)}\n\t\t\t\t\tindex={idx}\n\t\t\t\t\tselected={each.selected}\n\t\t\t\t\t{...(idx === overrideIndex ? override : each)}\n\t\t\t\t\tappearance={eachAppearance}\n\t\t\t\t\thoverText={hoverText}\n\t\t\t\t\tonDrag={this.handleDragFan}\n\t\t\t\t\tonDragComplete={this.handleDragFanComplete}\n\t\t\t\t/>;\n\t\t\t})}\n\t\t\t{tempChannel}\n\t\t\t<MouseLocationIndicator\n\t\t\t\tenabled={enabled}\n\t\t\t\tsnap={false}\n\t\t\t\tr={currentPositionRadius}\n\t\t\t\tstroke={currentPositionStroke}\n\t\t\t\topacity={currentPositionOpacity}\n\t\t\t\tstrokeWidth={currentPositionStrokeWidth}\n\t\t\t\tonMouseDown={this.handleStart}\n\t\t\t\tonClick={this.handleEnd}\n\t\t\t\tonMouseMove={this.handleDrawFan}\n\t\t\t/>\n\t\t</g>;\n\t}\n}\n\n\nGannFan.propTypes = {\n\tenabled: PropTypes.bool.isRequired,\n\n\tonStart: PropTypes.func.isRequired,\n\tonComplete: PropTypes.func.isRequired,\n\tonSelect: PropTypes.func,\n\n\tcurrentPositionStroke: PropTypes.string,\n\tcurrentPositionStrokeWidth: PropTypes.number,\n\tcurrentPositionOpacity: PropTypes.number,\n\tcurrentPositionRadius: PropTypes.number,\n\n\tappearance: PropTypes.shape({\n\t\tstroke: PropTypes.string.isRequired,\n\t\tstrokeOpacity: PropTypes.number.isRequired,\n\t\tfillOpacity: PropTypes.number.isRequired,\n\t\tstrokeWidth: PropTypes.number.isRequired,\n\t\tedgeStroke: PropTypes.string.isRequired,\n\t\tedgeFill: PropTypes.string.isRequired,\n\t\tedgeStrokeWidth: PropTypes.number.isRequired,\n\t\tr: PropTypes.number.isRequired,\n\t\tfill: PropTypes.arrayOf(PropTypes.string).isRequired,\n\t\tfontFamily: PropTypes.string.isRequired,\n\t\tfontSize: PropTypes.number.isRequired,\n\t\tfontFill: PropTypes.string.isRequired,\n\t}).isRequired,\n\thoverText: PropTypes.object.isRequired,\n\n\tfans: PropTypes.array.isRequired,\n};\n\nGannFan.defaultProps = {\n\tappearance: {\n\t\tstroke: \"#000000\",\n\t\tfillOpacity: 0.2,\n\t\tstrokeOpacity: 1,\n\t\tstrokeWidth: 1,\n\t\tedgeStroke: \"#000000\",\n\t\tedgeFill: \"#FFFFFF\",\n\t\tedgeStrokeWidth: 1,\n\t\tr: 5,\n\t\tfill: [\n\t\t\t\"#e41a1c\",\n\t\t\t\"#377eb8\",\n\t\t\t\"#4daf4a\",\n\t\t\t\"#984ea3\",\n\t\t\t\"#ff7f00\",\n\t\t\t\"#ffff33\",\n\t\t\t\"#a65628\",\n\t\t\t\"#f781bf\",\n\t\t],\n\t\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n\t\tfontSize: 12,\n\t\tfontFill: \"#000000\",\n\t},\n\n\tonStart: noop,\n\tonComplete: noop,\n\tonSelect: noop,\n\n\tcurrentPositionStroke: \"#000000\",\n\tcurrentPositionOpacity: 1,\n\tcurrentPositionStrokeWidth: 3,\n\tcurrentPositionRadius: 4,\n\n\thoverText: {\n\t\t...HoverTextNearMouse.defaultProps,\n\t\tenable: true,\n\t\tbgHeight: 18,\n\t\tbgWidth: 120,\n\t\ttext: \"Click to select object\",\n\t},\n\tfans: [],\n};\n\nexport default GannFan;\n"]},"metadata":{},"sourceType":"script"}