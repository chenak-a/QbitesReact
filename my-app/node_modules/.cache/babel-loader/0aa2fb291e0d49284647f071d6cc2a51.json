{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require(\"../../utils\");\n\nvar _ChartDataUtil = require(\"../../utils/ChartDataUtil\");\n\nvar _utils2 = require(\"../utils\");\n\nvar _EachTrendLine = require(\"./EachTrendLine\");\n\nvar _StraightLine = require(\"../components/StraightLine\");\n\nvar _StraightLine2 = _interopRequireDefault(_StraightLine);\n\nvar _ClickableCircle = require(\"../components/ClickableCircle\");\n\nvar _ClickableCircle2 = _interopRequireDefault(_ClickableCircle);\n\nvar _HoverTextNearMouse = require(\"../components/HoverTextNearMouse\");\n\nvar _HoverTextNearMouse2 = _interopRequireDefault(_HoverTextNearMouse);\n\nvar _Text = require(\"../components/Text\");\n\nvar _Text2 = _interopRequireDefault(_Text);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar EachFibRetracement = function (_Component) {\n  _inherits(EachFibRetracement, _Component);\n\n  function EachFibRetracement(props) {\n    _classCallCheck(this, EachFibRetracement);\n\n    var _this = _possibleConstructorReturn(this, (EachFibRetracement.__proto__ || Object.getPrototypeOf(EachFibRetracement)).call(this, props));\n\n    _this.handleEdge1Drag = _this.handleEdge1Drag.bind(_this);\n    _this.handleEdge2Drag = _this.handleEdge2Drag.bind(_this);\n    _this.handleLineNSResizeTop = _this.handleLineNSResizeTop.bind(_this);\n    _this.handleLineNSResizeBottom = _this.handleLineNSResizeBottom.bind(_this);\n    _this.handleLineMove = _this.handleLineMove.bind(_this);\n    _this.handleLineDragStart = _this.handleLineDragStart.bind(_this);\n    _this.handleHover = _this.handleHover.bind(_this);\n    _this.isHover = _utils2.isHover.bind(_this);\n    _this.saveNodeType = _utils2.saveNodeType.bind(_this);\n    _this.nodes = {};\n    _this.state = {\n      hover: false\n    };\n    return _this;\n  }\n\n  _createClass(EachFibRetracement, [{\n    key: \"handleHover\",\n    value: function handleHover(moreProps) {\n      if (this.state.hover !== moreProps.hovering) {\n        this.setState({\n          hover: moreProps.hovering\n        });\n      }\n    }\n  }, {\n    key: \"handleLineDragStart\",\n    value: function handleLineDragStart() {\n      var _props = this.props,\n          x1 = _props.x1,\n          y1 = _props.y1,\n          x2 = _props.x2,\n          y2 = _props.y2;\n      this.dragStart = {\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2\n      };\n    }\n  }, {\n    key: \"handleLineMove\",\n    value: function handleLineMove(moreProps) {\n      var _props2 = this.props,\n          index = _props2.index,\n          onDrag = _props2.onDrag;\n      var _dragStart = this.dragStart,\n          x1Value = _dragStart.x1,\n          y1Value = _dragStart.y1,\n          x2Value = _dragStart.x2,\n          y2Value = _dragStart.y2;\n      var xScale = moreProps.xScale,\n          yScale = moreProps.chartConfig.yScale,\n          xAccessor = moreProps.xAccessor,\n          fullData = moreProps.fullData;\n      var startPos = moreProps.startPos,\n          mouseXY = moreProps.mouseXY;\n      var x1 = xScale(x1Value);\n      var y1 = yScale(y1Value);\n      var x2 = xScale(x2Value);\n      var y2 = yScale(y2Value);\n      var dx = startPos[0] - mouseXY[0];\n      var dy = startPos[1] - mouseXY[1];\n      var newX1Value = (0, _ChartDataUtil.getXValue)(xScale, xAccessor, [x1 - dx, y1 - dy], fullData);\n      var newY1Value = yScale.invert(y1 - dy);\n      var newX2Value = (0, _ChartDataUtil.getXValue)(xScale, xAccessor, [x2 - dx, y2 - dy], fullData);\n      var newY2Value = yScale.invert(y2 - dy);\n      onDrag(index, {\n        x1: newX1Value,\n        y1: newY1Value,\n        x2: newX2Value,\n        y2: newY2Value\n      });\n    }\n  }, {\n    key: \"handleLineNSResizeTop\",\n    value: function handleLineNSResizeTop(moreProps) {\n      var _props3 = this.props,\n          index = _props3.index,\n          onDrag = _props3.onDrag;\n      var _props4 = this.props,\n          x1 = _props4.x1,\n          x2 = _props4.x2,\n          y2 = _props4.y2;\n\n      var _getNewXY = (0, _EachTrendLine.getNewXY)(moreProps),\n          _getNewXY2 = _slicedToArray(_getNewXY, 2),\n          y1 = _getNewXY2[1];\n\n      onDrag(index, {\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2\n      });\n    }\n  }, {\n    key: \"handleLineNSResizeBottom\",\n    value: function handleLineNSResizeBottom(moreProps) {\n      var _props5 = this.props,\n          index = _props5.index,\n          onDrag = _props5.onDrag;\n      var _props6 = this.props,\n          x1 = _props6.x1,\n          y1 = _props6.y1,\n          x2 = _props6.x2;\n\n      var _getNewXY3 = (0, _EachTrendLine.getNewXY)(moreProps),\n          _getNewXY4 = _slicedToArray(_getNewXY3, 2),\n          y2 = _getNewXY4[1];\n\n      onDrag(index, {\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2\n      });\n    }\n  }, {\n    key: \"handleEdge1Drag\",\n    value: function handleEdge1Drag(moreProps) {\n      var _props7 = this.props,\n          index = _props7.index,\n          onDrag = _props7.onDrag;\n      var _props8 = this.props,\n          y1 = _props8.y1,\n          x2 = _props8.x2,\n          y2 = _props8.y2;\n\n      var _getNewXY5 = (0, _EachTrendLine.getNewXY)(moreProps),\n          _getNewXY6 = _slicedToArray(_getNewXY5, 1),\n          x1 = _getNewXY6[0];\n\n      onDrag(index, {\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2\n      });\n    }\n  }, {\n    key: \"handleEdge2Drag\",\n    value: function handleEdge2Drag(moreProps) {\n      var _props9 = this.props,\n          index = _props9.index,\n          onDrag = _props9.onDrag;\n      var _props10 = this.props,\n          x1 = _props10.x1,\n          y1 = _props10.y1,\n          y2 = _props10.y2;\n\n      var _getNewXY7 = (0, _EachTrendLine.getNewXY)(moreProps),\n          _getNewXY8 = _slicedToArray(_getNewXY7, 1),\n          x2 = _getNewXY8[0];\n\n      onDrag(index, {\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _props11 = this.props,\n          x1 = _props11.x1,\n          x2 = _props11.x2,\n          y1 = _props11.y1,\n          y2 = _props11.y2;\n      var _props12 = this.props,\n          interactive = _props12.interactive,\n          yDisplayFormat = _props12.yDisplayFormat,\n          type = _props12.type,\n          appearance = _props12.appearance;\n      var stroke = appearance.stroke,\n          strokeWidth = appearance.strokeWidth,\n          strokeOpacity = appearance.strokeOpacity;\n      var fontFamily = appearance.fontFamily,\n          fontSize = appearance.fontSize,\n          fontFill = appearance.fontFill;\n      var edgeStroke = appearance.edgeStroke,\n          edgeFill = appearance.edgeFill,\n          nsEdgeFill = appearance.nsEdgeFill,\n          edgeStrokeWidth = appearance.edgeStrokeWidth,\n          r = appearance.r;\n      var _props13 = this.props,\n          hoverText = _props13.hoverText,\n          selected = _props13.selected;\n      var hover = this.state.hover;\n      var onDragComplete = this.props.onDragComplete;\n      var lines = helper({\n        x1: x1,\n        x2: x2,\n        y1: y1,\n        y2: y2\n      });\n\n      var hoverTextEnabled = hoverText.enable,\n          hoverTextSelected = hoverText.selectedText,\n          hoverTextUnselected = hoverText.text,\n          restHoverTextProps = _objectWithoutProperties(hoverText, [\"enable\", \"selectedText\", \"text\"]);\n\n      var lineType = type === \"EXTEND\" ? \"XLINE\" : type === \"BOUND\" ? \"LINE\" : type;\n      var dir = (0, _utils.head)(lines).y1 > (0, _utils.last)(lines).y1 ? 3 : -1.3;\n      return _react2.default.createElement(\"g\", null, lines.map(function (line, j) {\n        var text = yDisplayFormat(line.y) + \" (\" + line.percent.toFixed(2) + \"%)\";\n\n        var xyProvider = function xyProvider(_ref) {\n          var xScale = _ref.xScale,\n              chartConfig = _ref.chartConfig;\n          var yScale = chartConfig.yScale;\n\n          var _generateLine = (0, _StraightLine.generateLine)({\n            type: lineType,\n            start: [line.x1, line.y],\n            end: [line.x2, line.y],\n            xScale: xScale,\n            yScale: yScale\n          }),\n              x1 = _generateLine.x1,\n              y1 = _generateLine.y1,\n              x2 = _generateLine.x2;\n\n          var x = xScale(Math.min(x1, x2)) + 10;\n          var y = yScale(y1) + dir * 4;\n          return [x, y];\n        };\n\n        var firstOrLast = j === 0 || j === lines.length - 1;\n        var interactiveCursorClass = firstOrLast ? \"react-stockcharts-ns-resize-cursor\" : \"react-stockcharts-move-cursor\";\n        var interactiveEdgeCursorClass = firstOrLast ? \"react-stockcharts-ns-resize-cursor\" : \"react-stockcharts-ew-resize-cursor\";\n        var dragHandler = j === 0 ? _this2.handleLineNSResizeTop : j === lines.length - 1 ? _this2.handleLineNSResizeBottom : _this2.handleLineMove;\n        var edge1DragHandler = j === 0 ? _this2.handleLineNSResizeTop : j === lines.length - 1 ? _this2.handleLineNSResizeBottom : _this2.handleEdge1Drag;\n        var edge2DragHandler = j === 0 ? _this2.handleLineNSResizeTop : j === lines.length - 1 ? _this2.handleLineNSResizeBottom : _this2.handleEdge2Drag;\n        var hoverHandler = interactive ? {\n          onHover: _this2.handleHover,\n          onUnHover: _this2.handleHover\n        } : {};\n        return _react2.default.createElement(\"g\", {\n          key: j\n        }, _react2.default.createElement(_StraightLine2.default, _extends({\n          ref: _this2.saveNodeType(\"line_\" + j),\n          selected: selected || hover\n        }, hoverHandler, {\n          type: lineType,\n          x1Value: line.x1,\n          y1Value: line.y,\n          x2Value: line.x2,\n          y2Value: line.y,\n          stroke: stroke,\n          strokeWidth: hover || selected ? strokeWidth + 1 : strokeWidth,\n          strokeOpacity: strokeOpacity,\n          interactiveCursorClass: interactiveCursorClass,\n          onDragStart: _this2.handleLineDragStart,\n          onDrag: dragHandler,\n          onDragComplete: onDragComplete\n        })), _react2.default.createElement(_Text2.default, {\n          selected: selected\n          /* eslint-disable */\n          ,\n          xyProvider: xyProvider\n          /* eslint-enable */\n          ,\n          fontFamily: fontFamily,\n          fontSize: fontSize,\n          fill: fontFill\n        }, text), _react2.default.createElement(_ClickableCircle2.default, {\n          ref: _this2.saveNodeType(\"edge1\"),\n          show: selected || hover,\n          cx: line.x1,\n          cy: line.y,\n          r: r,\n          fill: firstOrLast ? nsEdgeFill : edgeFill,\n          stroke: edgeStroke,\n          strokeWidth: edgeStrokeWidth,\n          interactiveCursorClass: interactiveEdgeCursorClass,\n          onDrag: edge1DragHandler,\n          onDragComplete: onDragComplete\n        }), _react2.default.createElement(_ClickableCircle2.default, {\n          ref: _this2.saveNodeType(\"edge2\"),\n          show: selected || hover,\n          cx: line.x2,\n          cy: line.y,\n          r: r,\n          fill: firstOrLast ? nsEdgeFill : edgeFill,\n          stroke: edgeStroke,\n          strokeWidth: edgeStrokeWidth,\n          interactiveCursorClass: interactiveEdgeCursorClass,\n          onDrag: edge2DragHandler,\n          onDragComplete: onDragComplete\n        }));\n      }), _react2.default.createElement(_HoverTextNearMouse2.default, _extends({\n        show: hoverTextEnabled && hover\n      }, restHoverTextProps, {\n        text: selected ? hoverTextSelected : hoverTextUnselected\n      })));\n    }\n  }]);\n\n  return EachFibRetracement;\n}(_react.Component);\n\nfunction helper(_ref2) {\n  var x1 = _ref2.x1,\n      y1 = _ref2.y1,\n      x2 = _ref2.x2,\n      y2 = _ref2.y2;\n  var dy = y2 - y1;\n  var retracements = [100, 61.8, 50, 38.2, 23.6, 0].map(function (each) {\n    return {\n      percent: each,\n      x1: x1,\n      x2: x2,\n      y: y2 - each / 100 * dy\n    };\n  });\n  return retracements;\n}\n\nEachFibRetracement.propTypes = {\n  x1: _propTypes2.default.any.isRequired,\n  x2: _propTypes2.default.any.isRequired,\n  y1: _propTypes2.default.number.isRequired,\n  y2: _propTypes2.default.number.isRequired,\n  yDisplayFormat: _propTypes2.default.func.isRequired,\n  type: _propTypes2.default.string.isRequired,\n  selected: _propTypes2.default.bool.isRequired,\n  appearance: _propTypes2.default.shape({\n    stroke: _propTypes2.default.string.isRequired,\n    strokeWidth: _propTypes2.default.number.isRequired,\n    strokeOpacity: _propTypes2.default.number.isRequired,\n    fontFamily: _propTypes2.default.string.isRequired,\n    fontSize: _propTypes2.default.number.isRequired,\n    fontFill: _propTypes2.default.string.isRequired,\n    edgeStroke: _propTypes2.default.string.isRequired,\n    edgeFill: _propTypes2.default.string.isRequired,\n    nsEdgeFill: _propTypes2.default.string.isRequired,\n    edgeStrokeWidth: _propTypes2.default.number.isRequired,\n    r: _propTypes2.default.number.isRequired\n  }).isRequired,\n  interactive: _propTypes2.default.bool.isRequired,\n  hoverText: _propTypes2.default.object.isRequired,\n  index: _propTypes2.default.number,\n  onDrag: _propTypes2.default.func.isRequired,\n  onDragComplete: _propTypes2.default.func.isRequired\n};\nEachFibRetracement.defaultProps = {\n  yDisplayFormat: function yDisplayFormat(d) {\n    return d.toFixed(2);\n  },\n  interactive: true,\n  appearance: {\n    stroke: \"#000000\",\n    strokeWidth: 1,\n    strokeOpacity: 1,\n    fontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n    fontSize: 10,\n    fontFill: \"#000000\",\n    edgeStroke: \"#000000\",\n    edgeFill: \"#FFFFFF\",\n    nsEdgeFill: \"#000000\",\n    edgeStrokeWidth: 1,\n    r: 5\n  },\n  selected: false,\n  onDrag: _utils.noop,\n  onDragComplete: _utils.noop,\n  hoverText: {\n    enable: false\n  }\n};\nexports.default = EachFibRetracement;","map":{"version":3,"mappings":"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","names":["EachFibRetracement","props","_classCallCheck","_this","handleEdge1Drag","bind","handleEdge2Drag","handleLineNSResizeTop","handleLineNSResizeBottom","handleLineMove","handleLineDragStart","handleHover","isHover","_utils2","saveNodeType","nodes","state","hover","moreProps","hovering","setState","x1","y1","x2","y2","dragStart","index","onDrag","x1Value","y1Value","x2Value","y2Value","xScale","yScale","chartConfig","xAccessor","fullData","startPos","mouseXY","dx","dy","newX1Value","newY1Value","invert","newX2Value","newY2Value","interactive","yDisplayFormat","type","appearance","stroke","strokeWidth","strokeOpacity","fontFamily","fontSize","fontFill","edgeStroke","edgeFill","nsEdgeFill","edgeStrokeWidth","r","hoverText","selected","onDragComplete","lines","helper","hoverTextEnabled","enable","hoverTextSelected","selectedText","hoverTextUnselected","text","restHoverTextProps","lineType","dir","_react2","map","line","j","y","percent","toFixed","xyProvider","start","end","x","Math","min","firstOrLast","length","interactiveCursorClass","interactiveEdgeCursorClass","dragHandler","_this2","edge1DragHandler","edge2DragHandler","hoverHandler","onHover","onUnHover","key","ref","onDragStart","fill","show","cx","cy","retracements","each","propTypes","_propTypes2","any","isRequired","number","func","string","bool","shape","object","defaultProps","d"],"sources":["../../../../src/lib/interactive/wrapper/EachFibRetracement.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { head, last, noop } from \"../../utils\";\nimport { getXValue } from \"../../utils/ChartDataUtil\";\nimport { saveNodeType, isHover } from \"../utils\";\n\nimport { getNewXY } from \"./EachTrendLine\";\nimport StraightLine, { generateLine } from \"../components/StraightLine\";\nimport ClickableCircle from \"../components/ClickableCircle\";\nimport HoverTextNearMouse from \"../components/HoverTextNearMouse\";\nimport Text from \"../components/Text\";\n\nclass EachFibRetracement extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.handleEdge1Drag = this.handleEdge1Drag.bind(this);\n\t\tthis.handleEdge2Drag = this.handleEdge2Drag.bind(this);\n\n\t\tthis.handleLineNSResizeTop = this.handleLineNSResizeTop.bind(this);\n\t\tthis.handleLineNSResizeBottom = this.handleLineNSResizeBottom.bind(this);\n\t\tthis.handleLineMove = this.handleLineMove.bind(this);\n\n\t\tthis.handleLineDragStart = this.handleLineDragStart.bind(this);\n\n\t\tthis.handleHover = this.handleHover.bind(this);\n\n\t\tthis.isHover = isHover.bind(this);\n\t\tthis.saveNodeType = saveNodeType.bind(this);\n\t\tthis.nodes = {};\n\n\t\tthis.state = {\n\t\t\thover: false,\n\t\t};\n\t}\n\thandleHover(moreProps) {\n\t\tif (this.state.hover !== moreProps.hovering) {\n\t\t\tthis.setState({\n\t\t\t\thover: moreProps.hovering\n\t\t\t});\n\t\t}\n\t}\n\thandleLineDragStart() {\n\t\tconst {\n\t\t\tx1, y1, x2, y2,\n\t\t} = this.props;\n\n\t\tthis.dragStart = {\n\t\t\tx1, y1, x2, y2,\n\t\t};\n\t}\n\thandleLineMove(moreProps) {\n\t\tconst { index, onDrag } = this.props;\n\n\t\tconst {\n\t\t\tx1: x1Value, y1: y1Value, x2: x2Value, y2: y2Value,\n\t\t} = this.dragStart;\n\n\t\tconst { xScale, chartConfig: { yScale }, xAccessor, fullData } = moreProps;\n\t\tconst { startPos, mouseXY } = moreProps;\n\n\t\tconst x1 = xScale(x1Value);\n\t\tconst y1 = yScale(y1Value);\n\t\tconst x2 = xScale(x2Value);\n\t\tconst y2 = yScale(y2Value);\n\n\t\tconst dx = startPos[0] - mouseXY[0];\n\t\tconst dy = startPos[1] - mouseXY[1];\n\n\t\tconst newX1Value = getXValue(xScale, xAccessor, [x1 - dx, y1 - dy], fullData);\n\t\tconst newY1Value = yScale.invert(y1 - dy);\n\t\tconst newX2Value = getXValue(xScale, xAccessor, [x2 - dx, y2 - dy], fullData);\n\t\tconst newY2Value = yScale.invert(y2 - dy);\n\n\t\tonDrag(index, {\n\t\t\tx1: newX1Value,\n\t\t\ty1: newY1Value,\n\t\t\tx2: newX2Value,\n\t\t\ty2: newY2Value,\n\t\t});\n\t}\n\thandleLineNSResizeTop(moreProps) {\n\t\tconst { index, onDrag } = this.props;\n\t\tconst {\n\t\t\tx1, x2, y2,\n\t\t} = this.props;\n\n\t\tconst [, y1] = getNewXY(moreProps);\n\n\t\tonDrag(index, {\n\t\t\tx1,\n\t\t\ty1,\n\t\t\tx2,\n\t\t\ty2,\n\t\t});\n\t}\n\thandleLineNSResizeBottom(moreProps) {\n\t\tconst { index, onDrag } = this.props;\n\t\tconst {\n\t\t\tx1, y1, x2,\n\t\t} = this.props;\n\n\t\tconst [, y2] = getNewXY(moreProps);\n\n\t\tonDrag(index, {\n\t\t\tx1,\n\t\t\ty1,\n\t\t\tx2,\n\t\t\ty2,\n\t\t});\n\t}\n\thandleEdge1Drag(moreProps) {\n\t\tconst { index, onDrag } = this.props;\n\t\tconst {\n\t\t\ty1, x2, y2,\n\t\t} = this.props;\n\n\t\tconst [x1] = getNewXY(moreProps);\n\n\t\tonDrag(index, {\n\t\t\tx1,\n\t\t\ty1,\n\t\t\tx2,\n\t\t\ty2,\n\t\t});\n\t}\n\thandleEdge2Drag(moreProps) {\n\t\tconst { index, onDrag } = this.props;\n\t\tconst {\n\t\t\tx1, y1, y2,\n\t\t} = this.props;\n\n\t\tconst [x2] = getNewXY(moreProps);\n\n\t\tonDrag(index, {\n\t\t\tx1,\n\t\t\ty1,\n\t\t\tx2,\n\t\t\ty2,\n\t\t});\n\t}\n\trender() {\n\t\tconst { x1, x2, y1, y2 } = this.props;\n\t\tconst { interactive, yDisplayFormat, type, appearance } = this.props;\n\t\tconst { stroke, strokeWidth, strokeOpacity } = appearance;\n\t\tconst { fontFamily, fontSize, fontFill } = appearance;\n\t\tconst { edgeStroke, edgeFill, nsEdgeFill, edgeStrokeWidth, r } = appearance;\n\t\tconst { hoverText, selected } = this.props;\n\t\tconst { hover } = this.state;\n\t\tconst { onDragComplete } = this.props;\n\t\tconst lines = helper({ x1, x2, y1, y2 });\n\n\t\tconst {\n\t\t\tenable: hoverTextEnabled,\n\t\t\tselectedText: hoverTextSelected,\n\t\t\ttext: hoverTextUnselected,\n\t\t\t...restHoverTextProps\n\t\t} = hoverText;\n\n\t\tconst lineType = type === \"EXTEND\" ? \"XLINE\" : type === \"BOUND\" ? \"LINE\" : type;\n\t\tconst dir = head(lines).y1 > last(lines).y1 ? 3 : -1.3;\n\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t{lines.map((line, j) => {\n\t\t\t\t\tconst text = `${yDisplayFormat(line.y)} (${line.percent.toFixed(2)}%)`;\n\n\t\t\t\t\tconst xyProvider = ({ xScale, chartConfig }) => {\n\t\t\t\t\t\tconst { yScale } = chartConfig;\n\t\t\t\t\t\tconst { x1, y1, x2 } = generateLine({\n\t\t\t\t\t\t\ttype: lineType,\n\t\t\t\t\t\t\tstart: [line.x1, line.y],\n\t\t\t\t\t\t\tend: [line.x2, line.y],\n\t\t\t\t\t\t\txScale,\n\t\t\t\t\t\t\tyScale,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst x = xScale(Math.min(x1, x2)) + 10;\n\t\t\t\t\t\tconst y = yScale(y1) + dir * 4;\n\t\t\t\t\t\treturn [x, y];\n\t\t\t\t\t};\n\n\t\t\t\t\tconst firstOrLast = (j === 0) || (j === lines.length - 1);\n\n\t\t\t\t\tconst interactiveCursorClass = firstOrLast\n\t\t\t\t\t\t? \"react-stockcharts-ns-resize-cursor\"\n\t\t\t\t\t\t: \"react-stockcharts-move-cursor\";\n\n\t\t\t\t\tconst interactiveEdgeCursorClass = firstOrLast\n\t\t\t\t\t\t? \"react-stockcharts-ns-resize-cursor\"\n\t\t\t\t\t\t: \"react-stockcharts-ew-resize-cursor\";\n\n\t\t\t\t\tconst dragHandler = j === 0\n\t\t\t\t\t\t? this.handleLineNSResizeTop\n\t\t\t\t\t\t: j === lines.length - 1\n\t\t\t\t\t\t\t? this.handleLineNSResizeBottom\n\t\t\t\t\t\t\t: this.handleLineMove;\n\n\t\t\t\t\tconst edge1DragHandler = j === 0\n\t\t\t\t\t\t? this.handleLineNSResizeTop\n\t\t\t\t\t\t: j === lines.length - 1\n\t\t\t\t\t\t\t? this.handleLineNSResizeBottom\n\t\t\t\t\t\t\t: this.handleEdge1Drag;\n\t\t\t\t\tconst edge2DragHandler = j === 0\n\t\t\t\t\t\t? this.handleLineNSResizeTop\n\t\t\t\t\t\t: j === lines.length - 1\n\t\t\t\t\t\t\t? this.handleLineNSResizeBottom\n\t\t\t\t\t\t\t: this.handleEdge2Drag;\n\n\t\t\t\t\tconst hoverHandler = interactive\n\t\t\t\t\t\t? { onHover: this.handleHover, onUnHover: this.handleHover }\n\t\t\t\t\t\t: {};\n\t\t\t\t\treturn <g key={j}>\n\t\t\t\t\t\t<StraightLine\n\t\t\t\t\t\t\tref={this.saveNodeType(`line_${j}`)}\n\t\t\t\t\t\t\tselected={selected || hover}\n\n\t\t\t\t\t\t\t{...hoverHandler}\n\n\t\t\t\t\t\t\ttype={lineType}\n\t\t\t\t\t\t\tx1Value={line.x1}\n\t\t\t\t\t\t\ty1Value={line.y}\n\t\t\t\t\t\t\tx2Value={line.x2}\n\t\t\t\t\t\t\ty2Value={line.y}\n\t\t\t\t\t\t\tstroke={stroke}\n\t\t\t\t\t\t\tstrokeWidth={(hover || selected) ? strokeWidth + 1 : strokeWidth}\n\t\t\t\t\t\t\tstrokeOpacity={strokeOpacity}\n\t\t\t\t\t\t\tinteractiveCursorClass={interactiveCursorClass}\n\n\t\t\t\t\t\t\tonDragStart={this.handleLineDragStart}\n\t\t\t\t\t\t\tonDrag={dragHandler}\n\t\t\t\t\t\t\tonDragComplete={onDragComplete}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\tselected={selected}\n\t\t\t\t\t\t\t/* eslint-disable */\n\t\t\t\t\t\t\txyProvider={xyProvider} \n\t\t\t\t\t\t\t/* eslint-enable */\n\t\t\t\t\t\t\tfontFamily={fontFamily}\n\t\t\t\t\t\t\tfontSize={fontSize}\n\t\t\t\t\t\t\tfill={fontFill}>{text}</Text>\n\t\t\t\t\t\t<ClickableCircle\n\t\t\t\t\t\t\tref={this.saveNodeType(\"edge1\")}\n\t\t\t\t\t\t\tshow={selected || hover}\n\t\t\t\t\t\t\tcx={line.x1}\n\t\t\t\t\t\t\tcy={line.y}\n\t\t\t\t\t\t\tr={r}\n\t\t\t\t\t\t\tfill={firstOrLast ? nsEdgeFill : edgeFill}\n\t\t\t\t\t\t\tstroke={edgeStroke}\n\t\t\t\t\t\t\tstrokeWidth={edgeStrokeWidth}\n\t\t\t\t\t\t\tinteractiveCursorClass={interactiveEdgeCursorClass}\n\t\t\t\t\t\t\tonDrag={edge1DragHandler}\n\t\t\t\t\t\t\tonDragComplete={onDragComplete} />\n\t\t\t\t\t\t<ClickableCircle\n\t\t\t\t\t\t\tref={this.saveNodeType(\"edge2\")}\n\t\t\t\t\t\t\tshow={selected || hover}\n\t\t\t\t\t\t\tcx={line.x2}\n\t\t\t\t\t\t\tcy={line.y}\n\t\t\t\t\t\t\tr={r}\n\t\t\t\t\t\t\tfill={firstOrLast ? nsEdgeFill : edgeFill}\n\t\t\t\t\t\t\tstroke={edgeStroke}\n\t\t\t\t\t\t\tstrokeWidth={edgeStrokeWidth}\n\t\t\t\t\t\t\tinteractiveCursorClass={interactiveEdgeCursorClass}\n\t\t\t\t\t\t\tonDrag={edge2DragHandler}\n\t\t\t\t\t\t\tonDragComplete={onDragComplete} />\n\t\t\t\t\t</g>;\n\t\t\t\t})}\n\t\t\t\t<HoverTextNearMouse\n\t\t\t\t\tshow={hoverTextEnabled && hover}\n\t\t\t\t\t{...restHoverTextProps}\n\t\t\t\t\ttext={selected ? hoverTextSelected : hoverTextUnselected}\n\t\t\t\t/>\n\t\t\t</g>\n\t\t);\n\t}\n}\n\n\nfunction helper({ x1, y1, x2, y2 }) {\n\tconst dy = y2 - y1;\n\tconst retracements = [100, 61.8, 50, 38.2, 23.6, 0]\n\t\t.map(each => ({\n\t\t\tpercent: each,\n\t\t\tx1,\n\t\t\tx2,\n\t\t\ty: (y2 - (each / 100) * dy),\n\t\t}));\n\n\treturn retracements;\n}\n\nEachFibRetracement.propTypes = {\n\tx1: PropTypes.any.isRequired,\n\tx2: PropTypes.any.isRequired,\n\ty1: PropTypes.number.isRequired,\n\ty2: PropTypes.number.isRequired,\n\n\tyDisplayFormat: PropTypes.func.isRequired,\n\ttype: PropTypes.string.isRequired,\n\tselected: PropTypes.bool.isRequired,\n\n\tappearance: PropTypes.shape({\n\t\tstroke: PropTypes.string.isRequired,\n\t\tstrokeWidth: PropTypes.number.isRequired,\n\t\tstrokeOpacity: PropTypes.number.isRequired,\n\t\tfontFamily: PropTypes.string.isRequired,\n\t\tfontSize: PropTypes.number.isRequired,\n\t\tfontFill: PropTypes.string.isRequired,\n\t\tedgeStroke: PropTypes.string.isRequired,\n\t\tedgeFill: PropTypes.string.isRequired,\n\t\tnsEdgeFill: PropTypes.string.isRequired,\n\t\tedgeStrokeWidth: PropTypes.number.isRequired,\n\t\tr: PropTypes.number.isRequired,\n\t}).isRequired,\n\n\tinteractive: PropTypes.bool.isRequired,\n\thoverText: PropTypes.object.isRequired,\n\n\tindex: PropTypes.number,\n\tonDrag: PropTypes.func.isRequired,\n\tonDragComplete: PropTypes.func.isRequired,\n};\n\nEachFibRetracement.defaultProps = {\n\tyDisplayFormat: d => d.toFixed(2),\n\tinteractive: true,\n\n\tappearance: {\n\t\tstroke: \"#000000\",\n\t\tstrokeWidth: 1,\n\t\tstrokeOpacity: 1,\n\t\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n\t\tfontSize: 10,\n\t\tfontFill: \"#000000\",\n\t\tedgeStroke: \"#000000\",\n\t\tedgeFill: \"#FFFFFF\",\n\t\tnsEdgeFill: \"#000000\",\n\t\tedgeStrokeWidth: 1,\n\t\tr: 5,\n\t},\n\tselected: false,\n\n\tonDrag: noop,\n\tonDragComplete: noop,\n\n\thoverText: {\n\t\tenable: false,\n\t}\n};\n\nexport default EachFibRetracement;\n"]},"metadata":{},"sourceType":"script"}