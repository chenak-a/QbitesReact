{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require(\"../utils\");\n\nvar _utils2 = require(\"./utils\");\n\nvar _EachEquidistantChannel = require(\"./wrapper/EachEquidistantChannel\");\n\nvar _EachEquidistantChannel2 = _interopRequireDefault(_EachEquidistantChannel);\n\nvar _StraightLine = require(\"./components/StraightLine\");\n\nvar _MouseLocationIndicator = require(\"./components/MouseLocationIndicator\");\n\nvar _MouseLocationIndicator2 = _interopRequireDefault(_MouseLocationIndicator);\n\nvar _HoverTextNearMouse = require(\"./components/HoverTextNearMouse\");\n\nvar _HoverTextNearMouse2 = _interopRequireDefault(_HoverTextNearMouse);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar EquidistantChannel = function (_Component) {\n  _inherits(EquidistantChannel, _Component);\n\n  function EquidistantChannel(props) {\n    _classCallCheck(this, EquidistantChannel);\n\n    var _this = _possibleConstructorReturn(this, (EquidistantChannel.__proto__ || Object.getPrototypeOf(EquidistantChannel)).call(this, props));\n\n    _this.handleStart = _this.handleStart.bind(_this);\n    _this.handleEnd = _this.handleEnd.bind(_this);\n    _this.handleDrawChannel = _this.handleDrawChannel.bind(_this);\n    _this.handleDragChannel = _this.handleDragChannel.bind(_this);\n    _this.handleDragChannelComplete = _this.handleDragChannelComplete.bind(_this);\n    _this.terminate = _utils2.terminate.bind(_this);\n    _this.saveNodeType = _utils2.saveNodeType.bind(_this);\n    _this.getSelectionState = (0, _utils2.isHoverForInteractiveType)(\"channels\").bind(_this);\n    _this.nodes = [];\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(EquidistantChannel, [{\n    key: \"handleDragChannel\",\n    value: function handleDragChannel(index, newXYValue) {\n      this.setState({\n        override: _extends({\n          index: index\n        }, newXYValue)\n      });\n    }\n  }, {\n    key: \"handleDragChannelComplete\",\n    value: function handleDragChannelComplete(moreProps) {\n      var _this2 = this;\n\n      var override = this.state.override;\n      var channels = this.props.channels;\n\n      if ((0, _utils.isDefined)(override)) {\n        var index = override.index,\n            rest = _objectWithoutProperties(override, [\"index\"]);\n\n        var newChannels = channels.map(function (each, idx) {\n          return idx === index ? _extends({}, each, rest, {\n            selected: true\n          }) : each;\n        });\n        this.setState({\n          override: null\n        }, function () {\n          _this2.props.onComplete(newChannels, moreProps);\n        });\n      }\n    }\n  }, {\n    key: \"handleDrawChannel\",\n    value: function handleDrawChannel(xyValue) {\n      var current = this.state.current;\n\n      if ((0, _utils.isDefined)(current) && (0, _utils.isDefined)(current.startXY)) {\n        this.mouseMoved = true;\n\n        if ((0, _utils.isNotDefined)(current.dy)) {\n          this.setState({\n            current: {\n              startXY: current.startXY,\n              endXY: xyValue\n            }\n          });\n        } else {\n          var m = (0, _StraightLine.getSlope)(current.startXY, current.endXY);\n          var b = (0, _StraightLine.getYIntercept)(m, current.endXY);\n          var y = m * xyValue[0] + b;\n          var dy = xyValue[1] - y;\n          this.setState({\n            current: _extends({}, current, {\n              dy: dy\n            })\n          });\n        }\n      }\n    }\n  }, {\n    key: \"handleStart\",\n    value: function handleStart(xyValue) {\n      var _this3 = this;\n\n      var current = this.state.current;\n\n      if ((0, _utils.isNotDefined)(current) || (0, _utils.isNotDefined)(current.startXY)) {\n        this.mouseMoved = false;\n        this.setState({\n          current: {\n            startXY: xyValue,\n            endXY: null\n          }\n        }, function () {\n          _this3.props.onStart();\n        });\n      }\n    }\n  }, {\n    key: \"handleEnd\",\n    value: function handleEnd(xyValue, moreProps, e) {\n      var _this4 = this;\n\n      var current = this.state.current;\n      var _props = this.props,\n          channels = _props.channels,\n          appearance = _props.appearance;\n\n      if (this.mouseMoved && (0, _utils.isDefined)(current) && (0, _utils.isDefined)(current.startXY)) {\n        if ((0, _utils.isNotDefined)(current.dy)) {\n          this.setState({\n            current: _extends({}, current, {\n              dy: 0\n            })\n          });\n        } else {\n          var newChannels = [].concat(_toConsumableArray(channels.map(function (d) {\n            return _extends({}, d, {\n              selected: false\n            });\n          })), [_extends({}, current, {\n            selected: true,\n            appearance: appearance\n          })]);\n          this.setState({\n            current: null\n          }, function () {\n            _this4.props.onComplete(newChannels, moreProps, e);\n          });\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var appearance = this.props.appearance;\n      var enabled = this.props.enabled;\n      var _props2 = this.props,\n          currentPositionRadius = _props2.currentPositionRadius,\n          currentPositionStroke = _props2.currentPositionStroke;\n      var _props3 = this.props,\n          currentPositionOpacity = _props3.currentPositionOpacity,\n          currentPositionStrokeWidth = _props3.currentPositionStrokeWidth;\n      var _props4 = this.props,\n          channels = _props4.channels,\n          hoverText = _props4.hoverText;\n      var _state = this.state,\n          current = _state.current,\n          override = _state.override;\n      var overrideIndex = (0, _utils.isDefined)(override) ? override.index : null;\n      var tempChannel = (0, _utils.isDefined)(current) && (0, _utils.isDefined)(current.endXY) ? _react2.default.createElement(_EachEquidistantChannel2.default, _extends({\n        interactive: false\n      }, current, {\n        appearance: appearance,\n        hoverText: hoverText\n      })) : null;\n      return _react2.default.createElement(\"g\", null, channels.map(function (each, idx) {\n        var eachAppearance = (0, _utils.isDefined)(each.appearance) ? _extends({}, appearance, each.appearance) : appearance;\n        return _react2.default.createElement(_EachEquidistantChannel2.default, _extends({\n          key: idx,\n          ref: _this5.saveNodeType(idx),\n          index: idx,\n          selected: each.selected,\n          hoverText: hoverText\n        }, idx === overrideIndex ? override : each, {\n          appearance: eachAppearance,\n          onDrag: _this5.handleDragChannel,\n          onDragComplete: _this5.handleDragChannelComplete\n        }));\n      }), tempChannel, _react2.default.createElement(_MouseLocationIndicator2.default, {\n        enabled: enabled,\n        snap: false,\n        r: currentPositionRadius,\n        stroke: currentPositionStroke,\n        opacity: currentPositionOpacity,\n        strokeWidth: currentPositionStrokeWidth,\n        onMouseDown: this.handleStart,\n        onClick: this.handleEnd,\n        onMouseMove: this.handleDrawChannel\n      }));\n    }\n  }]);\n\n  return EquidistantChannel;\n}(_react.Component);\n\nEquidistantChannel.propTypes = {\n  enabled: _propTypes2.default.bool.isRequired,\n  onStart: _propTypes2.default.func.isRequired,\n  onComplete: _propTypes2.default.func.isRequired,\n  onSelect: _propTypes2.default.func.isRequired,\n  currentPositionStroke: _propTypes2.default.string,\n  currentPositionStrokeWidth: _propTypes2.default.number,\n  currentPositionOpacity: _propTypes2.default.number,\n  currentPositionRadius: _propTypes2.default.number,\n  hoverText: _propTypes2.default.object.isRequired,\n  channels: _propTypes2.default.array.isRequired,\n  appearance: _propTypes2.default.shape({\n    stroke: _propTypes2.default.string.isRequired,\n    strokeOpacity: _propTypes2.default.number.isRequired,\n    strokeWidth: _propTypes2.default.number.isRequired,\n    fill: _propTypes2.default.string.isRequired,\n    fillOpacity: _propTypes2.default.number.isRequired,\n    edgeStroke: _propTypes2.default.string.isRequired,\n    edgeFill: _propTypes2.default.string.isRequired,\n    edgeFill2: _propTypes2.default.string.isRequired,\n    edgeStrokeWidth: _propTypes2.default.number.isRequired,\n    r: _propTypes2.default.number.isRequired\n  }).isRequired\n};\nEquidistantChannel.defaultProps = {\n  onStart: _utils.noop,\n  onComplete: _utils.noop,\n  onSelect: _utils.noop,\n  currentPositionStroke: \"#000000\",\n  currentPositionOpacity: 1,\n  currentPositionStrokeWidth: 3,\n  currentPositionRadius: 4,\n  hoverText: _extends({}, _HoverTextNearMouse2.default.defaultProps, {\n    enable: true,\n    bgHeight: 18,\n    bgWidth: 120,\n    text: \"Click to select object\"\n  }),\n  channels: [],\n  appearance: {\n    stroke: \"#000000\",\n    strokeOpacity: 1,\n    strokeWidth: 1,\n    fill: \"#8AAFE2\",\n    fillOpacity: 0.7,\n    edgeStroke: \"#000000\",\n    edgeFill: \"#FFFFFF\",\n    edgeFill2: \"#250B98\",\n    edgeStrokeWidth: 1,\n    r: 5\n  }\n};\nexports.default = EquidistantChannel;","map":{"version":3,"mappings":"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","names":["EquidistantChannel","props","_classCallCheck","_this","handleStart","bind","handleEnd","handleDrawChannel","handleDragChannel","handleDragChannelComplete","terminate","_utils2","saveNodeType","getSelectionState","nodes","state","index","newXYValue","setState","override","moreProps","channels","rest","newChannels","map","each","idx","selected","_this2","onComplete","xyValue","current","startXY","mouseMoved","dy","endXY","m","b","y","_this3","onStart","e","appearance","d","_this4","enabled","currentPositionRadius","currentPositionStroke","currentPositionOpacity","currentPositionStrokeWidth","hoverText","overrideIndex","tempChannel","_react2","interactive","eachAppearance","key","ref","_this5","onDrag","onDragComplete","snap","r","stroke","opacity","strokeWidth","onMouseDown","onClick","onMouseMove","propTypes","_propTypes2","bool","isRequired","func","onSelect","string","number","object","array","shape","strokeOpacity","fill","fillOpacity","edgeStroke","edgeFill","edgeFill2","edgeStrokeWidth","defaultProps","_HoverTextNearMouse2","enable","bgHeight","bgWidth","text"],"sources":["../../../src/lib/interactive/EquidistantChannel.js"],"sourcesContent":["\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { isDefined, isNotDefined, noop } from \"../utils\";\nimport {\n\tterminate,\n\tsaveNodeType,\n\tisHoverForInteractiveType,\n} from \"./utils\";\nimport EachEquidistantChannel from \"./wrapper/EachEquidistantChannel\";\nimport { getSlope, getYIntercept } from \"./components/StraightLine\";\nimport MouseLocationIndicator from \"./components/MouseLocationIndicator\";\nimport HoverTextNearMouse from \"./components/HoverTextNearMouse\";\n\nclass EquidistantChannel extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.handleStart = this.handleStart.bind(this);\n\t\tthis.handleEnd = this.handleEnd.bind(this);\n\t\tthis.handleDrawChannel = this.handleDrawChannel.bind(this);\n\t\tthis.handleDragChannel = this.handleDragChannel.bind(this);\n\t\tthis.handleDragChannelComplete = this.handleDragChannelComplete.bind(this);\n\n\t\tthis.terminate = terminate.bind(this);\n\t\tthis.saveNodeType = saveNodeType.bind(this);\n\n\t\tthis.getSelectionState = isHoverForInteractiveType(\"channels\")\n\t\t\t.bind(this);\n\n\t\tthis.nodes = [];\n\t\tthis.state = {\n\t\t};\n\t}\n\thandleDragChannel(index, newXYValue) {\n\t\tthis.setState({\n\t\t\toverride: {\n\t\t\t\tindex,\n\t\t\t\t...newXYValue\n\t\t\t}\n\t\t});\n\t}\n\thandleDragChannelComplete(moreProps) {\n\t\tconst { override } = this.state;\n\t\tconst { channels } = this.props;\n\n\t\tif (isDefined(override)) {\n\t\t\tconst { index, ...rest } = override;\n\t\t\tconst newChannels = channels\n\t\t\t\t.map((each, idx) => idx === index\n\t\t\t\t\t? { ...each, ...rest, selected: true }\n\t\t\t\t\t: each);\n\t\t\tthis.setState({\n\t\t\t\toverride: null,\n\t\t\t}, () => {\n\t\t\t\tthis.props.onComplete(newChannels, moreProps);\n\t\t\t});\n\t\t}\n\t}\n\thandleDrawChannel(xyValue) {\n\t\tconst { current } = this.state;\n\n\t\tif (isDefined(current)\n\t\t\t\t&& isDefined(current.startXY)) {\n\t\t\tthis.mouseMoved = true;\n\t\t\tif (isNotDefined(current.dy)) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcurrent: {\n\t\t\t\t\t\tstartXY: current.startXY,\n\t\t\t\t\t\tendXY: xyValue,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst m = getSlope(current.startXY, current.endXY);\n\t\t\t\tconst b = getYIntercept(m, current.endXY);\n\t\t\t\tconst y = m * xyValue[0] + b;\n\t\t\t\tconst dy = xyValue[1] - y;\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tcurrent: {\n\t\t\t\t\t\t...current,\n\t\t\t\t\t\tdy,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\thandleStart(xyValue) {\n\t\tconst { current } = this.state;\n\n\t\tif (isNotDefined(current) || isNotDefined(current.startXY)) {\n\t\t\tthis.mouseMoved = false;\n\t\t\tthis.setState({\n\t\t\t\tcurrent: {\n\t\t\t\t\tstartXY: xyValue,\n\t\t\t\t\tendXY: null,\n\t\t\t\t}\n\t\t\t}, () => {\n\t\t\t\tthis.props.onStart();\n\t\t\t});\n\t\t}\n\t}\n\thandleEnd(xyValue, moreProps, e) {\n\t\tconst { current } = this.state;\n\t\tconst { channels, appearance } = this.props;\n\n\t\tif (this.mouseMoved\n\t\t\t&& isDefined(current)\n\t\t\t&& isDefined(current.startXY)\n\t\t) {\n\n\t\t\tif (isNotDefined(current.dy)) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcurrent: {\n\t\t\t\t\t\t...current,\n\t\t\t\t\t\tdy: 0\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst newChannels = [\n\t\t\t\t\t...channels.map(d => ({ ...d, selected: false })),\n\t\t\t\t\t{\n\t\t\t\t\t\t...current, selected: true,\n\t\t\t\t\t\tappearance,\n\t\t\t\t\t}\n\t\t\t\t];\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tcurrent: null,\n\t\t\t\t}, () => {\n\n\t\t\t\t\tthis.props.onComplete(newChannels, moreProps, e);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\trender() {\n\t\tconst { appearance } = this.props;\n\t\tconst { enabled } = this.props;\n\t\tconst { currentPositionRadius, currentPositionStroke } = this.props;\n\t\tconst { currentPositionOpacity, currentPositionStrokeWidth } = this.props;\n\t\tconst { channels, hoverText } = this.props;\n\t\tconst { current, override } = this.state;\n\t\tconst overrideIndex = isDefined(override) ? override.index : null;\n\n\t\tconst tempChannel = isDefined(current) && isDefined(current.endXY)\n\t\t\t? <EachEquidistantChannel\n\t\t\t\tinteractive={false}\n\t\t\t\t{...current}\n\t\t\t\tappearance={appearance}\n\t\t\t\thoverText={hoverText} />\n\t\t\t: null;\n\n\t\treturn <g>\n\t\t\t{channels.map((each, idx) => {\n\t\t\t\tconst eachAppearance = isDefined(each.appearance)\n\t\t\t\t\t? { ...appearance, ...each.appearance }\n\t\t\t\t\t: appearance;\n\n\t\t\t\treturn <EachEquidistantChannel key={idx}\n\t\t\t\t\tref={this.saveNodeType(idx)}\n\t\t\t\t\tindex={idx}\n\t\t\t\t\tselected={each.selected}\n\t\t\t\t\thoverText={hoverText}\n\t\t\t\t\t{...(idx === overrideIndex ? override : each)}\n\t\t\t\t\tappearance={eachAppearance}\n\t\t\t\t\tonDrag={this.handleDragChannel}\n\t\t\t\t\tonDragComplete={this.handleDragChannelComplete}\n\t\t\t\t/>;\n\t\t\t})}\n\t\t\t{tempChannel}\n\t\t\t<MouseLocationIndicator\n\t\t\t\tenabled={enabled}\n\t\t\t\tsnap={false}\n\t\t\t\tr={currentPositionRadius}\n\t\t\t\tstroke={currentPositionStroke}\n\t\t\t\topacity={currentPositionOpacity}\n\t\t\t\tstrokeWidth={currentPositionStrokeWidth}\n\t\t\t\tonMouseDown={this.handleStart}\n\t\t\t\tonClick={this.handleEnd}\n\t\t\t\tonMouseMove={this.handleDrawChannel} />\n\t\t</g>;\n\t}\n}\n\n\nEquidistantChannel.propTypes = {\n\tenabled: PropTypes.bool.isRequired,\n\n\tonStart: PropTypes.func.isRequired,\n\tonComplete: PropTypes.func.isRequired,\n\tonSelect: PropTypes.func.isRequired,\n\n\tcurrentPositionStroke: PropTypes.string,\n\tcurrentPositionStrokeWidth: PropTypes.number,\n\tcurrentPositionOpacity: PropTypes.number,\n\tcurrentPositionRadius: PropTypes.number,\n\n\thoverText: PropTypes.object.isRequired,\n\tchannels: PropTypes.array.isRequired,\n\n\tappearance: PropTypes.shape({\n\t\tstroke: PropTypes.string.isRequired,\n\t\tstrokeOpacity: PropTypes.number.isRequired,\n\t\tstrokeWidth: PropTypes.number.isRequired,\n\t\tfill: PropTypes.string.isRequired,\n\t\tfillOpacity: PropTypes.number.isRequired,\n\t\tedgeStroke: PropTypes.string.isRequired,\n\t\tedgeFill: PropTypes.string.isRequired,\n\t\tedgeFill2: PropTypes.string.isRequired,\n\t\tedgeStrokeWidth: PropTypes.number.isRequired,\n\t\tr: PropTypes.number.isRequired,\n\t}).isRequired\n};\n\nEquidistantChannel.defaultProps = {\n\tonStart: noop,\n\tonComplete: noop,\n\tonSelect: noop,\n\n\tcurrentPositionStroke: \"#000000\",\n\tcurrentPositionOpacity: 1,\n\tcurrentPositionStrokeWidth: 3,\n\tcurrentPositionRadius: 4,\n\n\thoverText: {\n\t\t...HoverTextNearMouse.defaultProps,\n\t\tenable: true,\n\t\tbgHeight: 18,\n\t\tbgWidth: 120,\n\t\ttext: \"Click to select object\",\n\t},\n\tchannels: [],\n\tappearance: {\n\t\tstroke: \"#000000\",\n\t\tstrokeOpacity: 1,\n\t\tstrokeWidth: 1,\n\t\tfill: \"#8AAFE2\",\n\t\tfillOpacity: 0.7,\n\t\tedgeStroke: \"#000000\",\n\t\tedgeFill: \"#FFFFFF\",\n\t\tedgeFill2: \"#250B98\",\n\t\tedgeStrokeWidth: 1,\n\t\tr: 5,\n\t}\n};\n\nexport default EquidistantChannel;\n"]},"metadata":{},"sourceType":"script"}