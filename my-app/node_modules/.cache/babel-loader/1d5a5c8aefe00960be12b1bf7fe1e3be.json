{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.getValueFromOverride = getValueFromOverride;\nexports.terminate = terminate;\nexports.saveNodeType = saveNodeType;\nexports.isHoverForInteractiveType = isHoverForInteractiveType;\nexports.isHover = isHover;\nexports.getMorePropsForChart = getMorePropsForChart;\nexports.getSelected = getSelected;\n\nvar _utils = require(\"../utils\");\n\nfunction getValueFromOverride(override, index, key, defaultValue) {\n  if ((0, _utils.isDefined)(override) && override.index === index) return override[key];\n  return defaultValue;\n}\n\nfunction terminate() {\n  this.setState({\n    current: null,\n    override: null\n  });\n}\n\nfunction saveNodeType(type) {\n  var _this = this;\n\n  return function (node) {\n    if ((0, _utils.isNotDefined)(node) && (0, _utils.isDefined)(_this.nodes[type])) {\n      delete _this.nodes[type];\n    } else {\n      _this.nodes[type] = node;\n    } // console.error(this.nodes)\n\n  };\n}\n\nfunction isHoverForInteractiveType(interactiveType) {\n  return function (moreProps) {\n    // this has to be function as it is bound to this\n    if ((0, _utils.isDefined)(this.nodes)) {\n      var selecedNodes = this.nodes.map(function (node) {\n        return node.isHover(moreProps);\n      });\n      var interactive = this.props[interactiveType].map(function (t, idx) {\n        return _extends({}, t, {\n          selected: selecedNodes[idx]\n        });\n      });\n      return interactive;\n    }\n  };\n}\n\nfunction isHover(moreProps) {\n  var hovering = (0, _utils.mapObject)(this.nodes, function (node) {\n    return node.isHover(moreProps);\n  }).reduce(function (a, b) {\n    return a || b;\n  });\n  return hovering;\n}\n\nfunction getMouseXY(moreProps, _ref) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      ox = _ref2[0],\n      oy = _ref2[1];\n\n  if (Array.isArray(moreProps.mouseXY)) {\n    var _moreProps$mouseXY = _slicedToArray(moreProps.mouseXY, 2),\n        x = _moreProps$mouseXY[0],\n        y = _moreProps$mouseXY[1];\n\n    var mouseXY = [x - ox, y - oy];\n    return mouseXY;\n  }\n\n  return moreProps.mouseXY;\n}\n\nfunction getMorePropsForChart(moreProps, chartId) {\n  var chartConfigList = moreProps.chartConfig;\n  var chartConfig = (0, _utils.find)(chartConfigList, function (each) {\n    return each.id === chartId;\n  });\n  var origin = chartConfig.origin;\n  var mouseXY = getMouseXY(moreProps, origin);\n  return _extends({}, moreProps, {\n    chartConfig: chartConfig,\n    mouseXY: mouseXY\n  });\n}\n\nfunction getSelected(interactives) {\n  var selected = interactives.map(function (each) {\n    var objects = each.objects.filter(function (obj) {\n      return obj.selected;\n    });\n    return _extends({}, each, {\n      objects: objects\n    });\n  }).filter(function (each) {\n    return each.objects.length > 0;\n  });\n  return selected;\n}","map":{"version":3,"mappings":"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","names":["getValueFromOverride","terminate","saveNodeType","isHoverForInteractiveType","isHover","getMorePropsForChart","getSelected","override","index","key","defaultValue","setState","current","type","node","_this","nodes","interactiveType","moreProps","selecedNodes","map","interactive","props","t","idx","selected","hovering","reduce","a","b","getMouseXY","ox","oy","Array","isArray","mouseXY","x","y","chartId","chartConfigList","chartConfig","each","id","origin","interactives","objects","filter","obj","length"],"sources":["../../../src/lib/interactive/utils.js"],"sourcesContent":["import {\n\tisNotDefined,\n\tisDefined,\n\tmapObject,\n\tfind,\n} from \"../utils\";\n\nexport function getValueFromOverride(override, index, key, defaultValue) {\n\tif (isDefined(override) && override.index === index)\n\t\treturn override[key];\n\treturn defaultValue;\n}\n\nexport function terminate() {\n\tthis.setState({\n\t\tcurrent: null,\n\t\toverride: null,\n\t});\n}\n\nexport function saveNodeType(type) {\n\treturn node => {\n\t\tif (isNotDefined(node) && isDefined(this.nodes[type])) {\n\t\t\tdelete this.nodes[type];\n\t\t} else {\n\t\t\tthis.nodes[type] = node;\n\t\t}\n\t\t// console.error(this.nodes)\n\t};\n}\nexport function isHoverForInteractiveType(interactiveType) {\n\treturn function(moreProps) { // this has to be function as it is bound to this\n\n\t\tif (isDefined(this.nodes)) {\n\t\t\tconst selecedNodes = this.nodes\n\t\t\t\t.map(node => node.isHover(moreProps));\n\t\t\tconst interactive = this.props[interactiveType].map((t, idx) => {\n\t\t\t\treturn {\n\t\t\t\t\t...t,\n\t\t\t\t\tselected: selecedNodes[idx]\n\t\t\t\t};\n\t\t\t});\n\t\t\treturn interactive;\n\t\t}\n\t};\n}\n\nexport function isHover(moreProps) {\n\tconst hovering = mapObject(this.nodes, node => node.isHover(moreProps))\n\t\t.reduce((a, b) => {\n\t\t\treturn a || b;\n\t\t});\n\treturn hovering;\n}\n\nfunction getMouseXY(moreProps, [ox, oy]) {\n\tif (Array.isArray(moreProps.mouseXY)) {\n\t\tconst { mouseXY: [x, y] } = moreProps;\n\t\tconst mouseXY = [\n\t\t\tx - ox,\n\t\t\ty - oy\n\t\t];\n\t\treturn mouseXY;\n\t}\n\treturn moreProps.mouseXY;\n}\n\nexport function getMorePropsForChart(moreProps, chartId) {\n\tconst { chartConfig: chartConfigList } = moreProps;\n\tconst chartConfig = find(chartConfigList, each => each.id === chartId);\n\n\tconst { origin } = chartConfig;\n\tconst mouseXY = getMouseXY(moreProps, origin);\n\treturn {\n\t\t...moreProps,\n\t\tchartConfig,\n\t\tmouseXY,\n\t};\n}\n\nexport function getSelected(interactives) {\n\tconst selected = interactives\n\t\t.map(each => {\n\t\t\tconst objects = each.objects.filter(obj => {\n\t\t\t\treturn obj.selected;\n\t\t\t});\n\t\t\treturn {\n\t\t\t\t...each,\n\t\t\t\tobjects,\n\t\t\t};\n\t\t})\n\t\t.filter(each => each.objects.length > 0);\n\treturn selected;\n}\n"]},"metadata":{},"sourceType":"script"}