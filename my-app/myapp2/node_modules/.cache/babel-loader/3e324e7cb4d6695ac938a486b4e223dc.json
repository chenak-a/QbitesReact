{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function () {\n  var base = (0, _baseIndicator2.default)().type(ALGORITHM_TYPE).fill(_defaultOptionsForAppearance.MACD.fill).stroke(_defaultOptionsForAppearance.MACD.stroke).accessor(function (d) {\n    return d.macd;\n  });\n  var underlyingAlgorithm = (0, _calculator.macd)();\n  var mergedAlgorithm = (0, _utils.merge)().algorithm(underlyingAlgorithm).merge(function (datum, indicator) {\n    datum.macd = indicator;\n  });\n\n  var indicator = function indicator(data) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      merge: true\n    };\n\n    if (options.merge) {\n      if (!base.accessor()) throw new Error(\"Set an accessor to \" + ALGORITHM_TYPE + \" before calculating\");\n      return mergedAlgorithm(data);\n    }\n\n    return underlyingAlgorithm(data);\n  };\n\n  (0, _utils.rebind)(indicator, base, \"id\", \"accessor\", \"stroke\", \"fill\", \"echo\", \"type\");\n  (0, _utils.rebind)(indicator, underlyingAlgorithm, \"options\", \"undefinedLength\");\n  (0, _utils.rebind)(indicator, mergedAlgorithm, \"merge\", \"skipUndefined\");\n  return indicator;\n};\n\nvar _utils = require(\"../utils\");\n\nvar _calculator = require(\"../calculator\");\n\nvar _baseIndicator = require(\"./baseIndicator\");\n\nvar _baseIndicator2 = _interopRequireDefault(_baseIndicator);\n\nvar _defaultOptionsForAppearance = require(\"./defaultOptionsForAppearance\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar ALGORITHM_TYPE = \"MACD\";","map":{"version":3,"sources":["../../../src/lib/indicator/macd.js"],"names":["ALGORITHM_TYPE","base","d","underlyingAlgorithm","mergedAlgorithm","datum","indicator","options","merge"],"mappings":";;;;;;kBAWe,YAAW;AAEzB,MAAMC,IAAAA,GAAO,CAAA,GAAA,eAAA,CAAA,OAAA,IAAA,IAAA,CAAA,cAAA,EAAA,IAAA,CAEN,4BAAA,CAAA,IAAA,CAFM,IAAA,EAAA,MAAA,CAGJ,4BAAA,CAAA,IAAA,CAHI,MAAA,EAAA,QAAA,CAIF,UAAA,CAAA,EAAA;AAAA,WAAKC,CAAAA,CAAL,IAAA;AAJX,GAAa,CAAb;AAMA,MAAMC,mBAAAA,GAAsB,CAAA,GAAA,WAAA,CAA5B,IAA4B,GAA5B;AAEA,MAAMC,eAAAA,GAAkB,CAAA,GAAA,MAAA,CAAA,KAAA,IAAA,SAAA,CAAA,mBAAA,EAAA,KAAA,CAEhB,UAAA,KAAA,EAAA,SAAA,EAAsB;AAAEC,IAAAA,KAAAA,CAAAA,IAAAA,GAAAA,SAAAA;AAFhC,GAAwB,CAAxB;;AAIA,MAAMC,SAAAA,GAAY,SAAZA,SAAY,CAAA,IAAA,EAA0C;AAAA,QAA3BC,OAA2B,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAjB;AAAEC,MAAAA,KAAAA,EAAF;AAAA,KAAiB;;AAC3D,QAAID,OAAAA,CAAJ,KAAA,EAAmB;AAClB,UAAI,CAACN,IAAAA,CAAL,QAAKA,EAAL,EAAsB,MAAM,IAAA,KAAA,CAAA,wBAAA,cAAA,GAAN,qBAAM,CAAN;AACtB,aAAOG,eAAAA,CAAP,IAAOA,CAAP;AACA;;AACD,WAAOD,mBAAAA,CAAP,IAAOA,CAAP;AALD,GAAA;;AAQA,GAAA,GAAA,MAAA,CAAA,MAAA,EAAA,SAAA,EAAA,IAAA,EAAA,IAAA,EAAA,UAAA,EAAA,QAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA;AACA,GAAA,GAAA,MAAA,CAAA,MAAA,EAAA,SAAA,EAAA,mBAAA,EAAA,SAAA,EAAA,iBAAA;AACA,GAAA,GAAA,MAAA,CAAA,MAAA,EAAA,SAAA,EAAA,eAAA,EAAA,OAAA,EAAA,eAAA;AAEA,SAAA,SAAA;;;AAnCD,IAAA,MAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AAEA,IAAA,WAAA,GAAA,OAAA,CAAA,eAAA,CAAA;;AAEA,IAAA,cAAA,GAAA,OAAA,CAAA,iBAAA,CAAA;;;;AACA,IAAA,4BAAA,GAAA,OAAA,CAAA,+BAAA,CAAA;;;;;;;;AAEA,IAAMH,cAAAA,GAAN,MAAA","sourcesContent":["\n\nimport { rebind, merge } from \"../utils\";\n\nimport { macd } from \"../calculator\";\n\nimport baseIndicator from \"./baseIndicator\";\nimport { MACD as appearanceOptions } from \"./defaultOptionsForAppearance\";\n\nconst ALGORITHM_TYPE = \"MACD\";\n\nexport default function() {\n\n\tconst base = baseIndicator()\n\t\t.type(ALGORITHM_TYPE)\n\t\t.fill(appearanceOptions.fill)\n\t\t.stroke(appearanceOptions.stroke)\n\t\t.accessor(d => d.macd);\n\n\tconst underlyingAlgorithm = macd();\n\n\tconst mergedAlgorithm = merge()\n\t\t.algorithm(underlyingAlgorithm)\n\t\t.merge((datum, indicator) => { datum.macd = indicator; });\n\n\tconst indicator = function(data, options = { merge: true }) {\n\t\tif (options.merge) {\n\t\t\tif (!base.accessor()) throw new Error(`Set an accessor to ${ALGORITHM_TYPE} before calculating`);\n\t\t\treturn mergedAlgorithm(data);\n\t\t}\n\t\treturn underlyingAlgorithm(data);\n\t};\n\n\trebind(indicator, base, \"id\", \"accessor\", \"stroke\", \"fill\", \"echo\", \"type\");\n\trebind(indicator, underlyingAlgorithm, \"options\", \"undefinedLength\");\n\trebind(indicator, mergedAlgorithm, \"merge\", \"skipUndefined\");\n\n\treturn indicator;\n}\n"]},"metadata":{},"sourceType":"script"}