{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _GenericChartComponent = require(\"../GenericChartComponent\");\n\nvar _GenericChartComponent2 = _interopRequireDefault(_GenericChartComponent);\n\nvar _GenericComponent = require(\"../GenericComponent\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar propTypes = {\n  xPosition: _propTypes2.default.func,\n  drawCoordinate: _propTypes2.default.func,\n  displayFormat: _propTypes2.default.func.isRequired,\n  at: _propTypes2.default.oneOf([\"bottom\", \"top\"]),\n  orient: _propTypes2.default.oneOf([\"bottom\", \"top\"]),\n  text: _propTypes2.default.shape({\n    fontStyle: _propTypes2.default.string,\n    fontWeight: _propTypes2.default.string,\n    fontFamily: _propTypes2.default.string,\n    fontSize: _propTypes2.default.number,\n    fill: _propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.string])\n  }),\n  bg: _propTypes2.default.shape({\n    fill: _propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.string]),\n    stroke: _propTypes2.default.string,\n    strokeWidth: _propTypes2.default.number,\n    padding: _propTypes2.default.shape({\n      left: _propTypes2.default.number,\n      right: _propTypes2.default.number,\n      top: _propTypes2.default.number,\n      bottom: _propTypes2.default.number\n    })\n  }),\n  dx: _propTypes2.default.number,\n  dy: _propTypes2.default.number\n};\nvar defaultProps = {\n  xPosition: xPosition,\n  drawCoordinate: drawCoordinate,\n  at: \"bottom\",\n  orient: \"bottom\",\n  text: {\n    fontStyle: \"\",\n    fontWeight: \"\",\n    fontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n    fontSize: 13,\n    fill: \"rgb(35, 35, 35)\"\n  },\n  bg: {\n    fill: \"rgb(255, 255, 255)\",\n    stroke: \"rgb(35, 35, 35)\",\n    strokeWidth: 1,\n    padding: {\n      left: 7,\n      right: 7,\n      top: 4,\n      bottom: 4\n    }\n  },\n  dx: 7,\n  dy: 7\n};\n\nvar MouseCoordinateXV2 = function (_Component) {\n  _inherits(MouseCoordinateXV2, _Component);\n\n  function MouseCoordinateXV2(props) {\n    _classCallCheck(this, MouseCoordinateXV2);\n\n    var _this = _possibleConstructorReturn(this, (MouseCoordinateXV2.__proto__ || Object.getPrototypeOf(MouseCoordinateXV2)).call(this, props));\n\n    _this.drawOnCanvas = _this.drawOnCanvas.bind(_this);\n    return _this;\n  }\n\n  _createClass(MouseCoordinateXV2, [{\n    key: \"drawOnCanvas\",\n    value: function drawOnCanvas(ctx, moreProps) {\n      var show = moreProps.show,\n          currentItem = moreProps.currentItem;\n      var drawCoordinate = this.props.drawCoordinate;\n\n      if (show && currentItem != null) {\n        var shape = getXCoordinateInfo(ctx, this.props, moreProps);\n        drawCoordinate(ctx, shape, this.props, moreProps);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _react2.default.createElement(_GenericChartComponent2.default, {\n        clip: false,\n        canvasDraw: this.drawOnCanvas,\n        canvasToDraw: _GenericComponent.getMouseCanvas,\n        drawOn: [\"mousemove\", \"pan\", \"drag\"]\n      });\n    }\n  }]);\n\n  return MouseCoordinateXV2;\n}(_react.Component);\n\nMouseCoordinateXV2.defaultProps = defaultProps;\nMouseCoordinateXV2.propTypes = propTypes;\n\nfunction xPosition(props, moreProps) {\n  var currentItem = moreProps.currentItem,\n      xAccessor = moreProps.xAccessor;\n  return xAccessor(currentItem);\n}\n\nfunction getXCoordinateInfo(ctx, props, moreProps) {\n  var xPosition = props.xPosition;\n  var xValue = xPosition(props, moreProps);\n  var at = props.at,\n      displayFormat = props.displayFormat;\n  var text = props.text;\n  var xScale = moreProps.xScale,\n      height = moreProps.chartConfig.height;\n  ctx.font = text.fontStyle + \" \" + text.fontWeight + \" \" + text.fontSize + \"px \" + text.fontFamily;\n  var t = displayFormat(xValue);\n  var textWidth = ctx.measureText(t).width;\n  var y = at === \"bottom\" ? height : 0;\n  var x = Math.round(xScale(xValue));\n  return {\n    x: x,\n    y: y,\n    textWidth: textWidth,\n    text: t\n  };\n}\n\nfunction drawCoordinate(ctx, shape, props, moreProps) {\n  var x = shape.x,\n      y = shape.y,\n      textWidth = shape.textWidth,\n      text = shape.text;\n  var orient = props.orient,\n      dx = props.dx,\n      dy = props.dy;\n  var _props$bg = props.bg,\n      padding = _props$bg.padding,\n      fill = _props$bg.fill,\n      stroke = _props$bg.stroke,\n      strokeWidth = _props$bg.strokeWidth,\n      _props$text = props.text,\n      fontSize = _props$text.fontSize,\n      textFill = _props$text.fill;\n  ctx.textAlign = \"center\";\n  var sign = orient === \"top\" ? -1 : 1;\n  var halfWidth = Math.round(textWidth / 2 + padding.right);\n  var height = Math.round(fontSize + padding.top + padding.bottom);\n  ctx.strokeStyle = typeof stroke === \"function\" ? stroke(moreProps, ctx) : stroke;\n  ctx.fillStyle = typeof fill === \"function\" ? fill(moreProps, ctx) : fill;\n  ctx.lineWidth = typeof strokeWidth === \"function\" ? strokeWidth(moreProps) : strokeWidth;\n  ctx.beginPath();\n  ctx.moveTo(x, y);\n  ctx.lineTo(x + dx, y + sign * dy);\n  ctx.lineTo(x + halfWidth, y + sign * dy);\n  ctx.lineTo(x + halfWidth, y + sign * (dy + height));\n  ctx.lineTo(x - halfWidth, y + sign * (dy + height));\n  ctx.lineTo(x - halfWidth, y + sign * dy);\n  ctx.lineTo(x - dx, y + sign * dy);\n  ctx.closePath();\n  ctx.stroke();\n  ctx.fill();\n  ctx.beginPath();\n  ctx.fillStyle = typeof textFill === \"function\" ? textFill(moreProps, ctx) : textFill;\n  ctx.textBaseline = orient === \"top\" ? \"alphabetic\" : \"hanging\";\n  var pad = orient === \"top\" ? padding.bottom : padding.top;\n  ctx.fillText(text, x, y + sign * (dy + pad + 2));\n}\n\nexports.default = MouseCoordinateXV2;","map":{"version":3,"sources":["../../../src/lib/coordinates/MouseCoordinateXV2.js"],"names":["propTypes","xPosition","drawCoordinate","displayFormat","at","orient","text","fontStyle","fontWeight","fontFamily","fontSize","fill","bg","stroke","strokeWidth","padding","left","right","top","bottom","number","dx","dy","defaultProps","MouseCoordinateXV2","ctx","moreProps","show","currentItem","shape","getXCoordinateInfo","xAccessor","props","xValue","xScale","height","t","textWidth","y","x","Math","textFill","sign","halfWidth","pad"],"mappings":"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","sourcesContent":["\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport GenericChartComponent from \"../GenericChartComponent\";\nimport { getMouseCanvas } from \"../GenericComponent\";\n\n\nconst propTypes = {\n\txPosition: PropTypes.func,\n\tdrawCoordinate: PropTypes.func,\n\tdisplayFormat: PropTypes.func.isRequired,\n\tat: PropTypes.oneOf([\"bottom\", \"top\"]),\n\torient: PropTypes.oneOf([\"bottom\", \"top\"]),\n\ttext: PropTypes.shape({\n\t\tfontStyle: PropTypes.string,\n\t\tfontWeight: PropTypes.string,\n\t\tfontFamily: PropTypes.string,\n\t\tfontSize: PropTypes.number,\n\t\tfill: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n\t}),\n\tbg: PropTypes.shape({\n\t\tfill: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n\t\tstroke: PropTypes.string,\n\t\tstrokeWidth: PropTypes.number,\n\t\tpadding: PropTypes.shape({\n\t\t\tleft: PropTypes.number,\n\t\t\tright: PropTypes.number,\n\t\t\ttop: PropTypes.number,\n\t\t\tbottom: PropTypes.number\n\t\t}),\n\t}),\n\tdx: PropTypes.number,\n\tdy: PropTypes.number\n};\n\nconst defaultProps = {\n\txPosition,\n\tdrawCoordinate,\n\tat: \"bottom\",\n\torient: \"bottom\",\n\n\ttext: {\n\t\tfontStyle: \"\",\n\t\tfontWeight: \"\",\n\t\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n\t\tfontSize: 13,\n\t\tfill: \"rgb(35, 35, 35)\"\n\t},\n\tbg: {\n\t\tfill: \"rgb(255, 255, 255)\",\n\t\tstroke: \"rgb(35, 35, 35)\",\n\t\tstrokeWidth: 1,\n\t\tpadding: {\n\t\t\tleft: 7,\n\t\t\tright: 7,\n\t\t\ttop: 4,\n\t\t\tbottom: 4\n\t\t}\n\t},\n\tdx: 7,\n\tdy: 7\n};\n\nclass MouseCoordinateXV2 extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst { show, currentItem } = moreProps;\n\t\tconst { drawCoordinate } = this.props;\n\n\t\tif (show && currentItem != null) {\n\t\t\tconst shape = getXCoordinateInfo(ctx, this.props, moreProps);\n\t\t\tdrawCoordinate(ctx, shape, this.props, moreProps);\n\t\t}\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<GenericChartComponent\n\t\t\t\tclip={false}\n\t\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\t\tcanvasToDraw={getMouseCanvas}\n\t\t\t\tdrawOn={[\"mousemove\", \"pan\", \"drag\"]}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nMouseCoordinateXV2.defaultProps = defaultProps;\nMouseCoordinateXV2.propTypes = propTypes;\n\n\nfunction xPosition(props, moreProps) {\n\tconst { currentItem, xAccessor } = moreProps;\n\treturn xAccessor(currentItem);\n}\nfunction getXCoordinateInfo(ctx, props, moreProps) {\n\tconst { xPosition } = props;\n\tconst xValue = xPosition(props, moreProps);\n\tconst { at, displayFormat } = props;\n\tconst { text } = props;\n\tconst { xScale, chartConfig: { height } } = moreProps;\n\tctx.font = `${text.fontStyle} ${text.fontWeight} ${text.fontSize}px ${text.fontFamily}`;\n\n\tconst t = displayFormat(xValue);\n\tconst textWidth = ctx.measureText(t).width;\n\n\tconst y = at === \"bottom\" ? height : 0;\n\tconst x = Math.round(xScale(xValue));\n\n\treturn {\n\t\tx,\n\t\ty,\n\t\ttextWidth,\n\t\ttext: t\n\t};\n}\n\nfunction drawCoordinate(\n\tctx,\n\tshape,\n\tprops,\n\tmoreProps\n) {\n\tconst { x, y, textWidth, text } = shape;\n\tconst { orient, dx, dy } = props;\n\n\tconst {\n\t\tbg: { padding, fill, stroke, strokeWidth },\n\t\ttext: { fontSize, fill: textFill }\n\t} = props;\n\n\tctx.textAlign = \"center\";\n\n\tconst sign = orient === \"top\" ? -1 : 1;\n\tconst halfWidth = Math.round(textWidth / 2 + padding.right);\n\tconst height = Math.round(fontSize + padding.top + padding.bottom);\n\n\tctx.strokeStyle = typeof stroke === \"function\" ? stroke(moreProps, ctx) : stroke;\n\tctx.fillStyle = typeof fill === \"function\" ? fill(moreProps, ctx) : fill;\n\tctx.lineWidth = typeof strokeWidth === \"function\" ? strokeWidth(moreProps) : strokeWidth;\n\n\tctx.beginPath();\n\n\tctx.moveTo(x, y);\n\tctx.lineTo(x + dx, y + sign * dy);\n\tctx.lineTo(x + halfWidth, y + sign * dy);\n\tctx.lineTo(x + halfWidth, y + sign * (dy + height));\n\tctx.lineTo(x - halfWidth, y + sign * (dy + height));\n\tctx.lineTo(x - halfWidth, y + sign * dy);\n\tctx.lineTo(x - dx, y + sign * dy);\n\tctx.closePath();\n\tctx.stroke();\n\tctx.fill();\n\n\tctx.beginPath();\n\tctx.fillStyle = typeof textFill === \"function\" ? textFill(moreProps, ctx) : textFill;\n\n\tctx.textBaseline = orient === \"top\" ? \"alphabetic\" : \"hanging\";\n\tconst pad = orient === \"top\" ? padding.bottom : padding.top;\n\n\tctx.fillText(text, x, y + sign * (dy + pad + 2));\n}\n\nexport default MouseCoordinateXV2;"]},"metadata":{},"sourceType":"script"}